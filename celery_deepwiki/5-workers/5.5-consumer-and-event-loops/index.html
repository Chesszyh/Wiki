
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://wiki.neurosama.uk/celery_deepwiki/5-workers/5.5-consumer-and-event-loops/">
      
      
        <link rel="prev" href="../5.4-worker-configuration-and-control/">
      
      
        <link rel="next" href="../5.6-autoscaling/">
      
      
        
          <link rel="alternate" href="./" hreflang="en">
        
          <link rel="alternate" href="../../../zh/celery_deepwiki/5-workers/5.5-consumer-and-event-loops/" hreflang="zh">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Consumer and Event Loops - DeepWiki</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#consumer-and-event-loops" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="DeepWiki" class="md-header__button md-logo" aria-label="DeepWiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DeepWiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Consumer and Event Loops
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/celery_deepwiki/5-workers/5.5-consumer-and-event-loops/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Chesszyh/Wiki" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Welcome to DeepWiki

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../1-celery-overview/1.1-installation-and-setup/" class="md-tabs__link">
          
  
  
  Celery deepwiki

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../lc0_deepwiki/1-lc0-overview/" class="md-tabs__link">
          
  
  
  Lc0 deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../linux_deepwiki/1-linux-kernel-overview/" class="md-tabs__link">
          
  
  
  Linux deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ragflow_deepwiki/1-overview/" class="md-tabs__link">
          
  
  
  Ragflow deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../redis_deepwiki/1-redis-overview/" class="md-tabs__link">
          
  
  
  Redis deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../stockfish_deepwiki/2-core-data-structures-and-types/" class="md-tabs__link">
          
  
  
  Stockfish deepwiki

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DeepWiki" class="md-nav__button md-logo" aria-label="DeepWiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DeepWiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Chesszyh/Wiki" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome to DeepWiki
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Celery deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Celery deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    1 celery overview
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    1 celery overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-celery-overview/1.1-installation-and-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation and Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-celery-overview/1.2-core-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-celery-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Celery Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    2 the celery application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 the celery application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-the-celery-application/2.1-application-initialization-and-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Initialization and Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-the-celery-application/2.2-task-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Registration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-the-celery-application/2.3-message-brokers-and-routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Message Brokers and Routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-the-celery-application/2.4-amqp-layer-and-message-protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AMQP Layer and Message Protocol
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-the-celery-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Celery Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    3 tasks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 tasks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-tasks/3.1-task-definition-and-invocation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Definition and Invocation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-tasks/3.2-task-lifecycle-and-states/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Lifecycle and States
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-tasks/3.3-error-handling-and-retry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Retry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-tasks/3.4-time-limits-and-rate-limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Time Limits and Rate Limits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-tasks/3.5-task-options-and-customization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Options and Customization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    4 canvas workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 canvas workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-canvas-workflows/4.1-signatures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Signature and Composition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-canvas-workflows/4.2-workflow-primitives/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow Primitives
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-canvas-workflows/4.3-advanced-canvas-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced Canvas Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-canvas-workflows/4.4-chord-execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chord Execution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-canvas-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas Workflows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" checked>
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    5 workers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 workers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.1-worker-architecture-and-bootsteps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Architecture and Bootsteps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.2-worker-lifecycle-and-shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Lifecycle and Shutdown
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.3-concurrency-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Concurrency Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.4-worker-configuration-and-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Configuration and Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Consumer and Event Loops
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Consumer and Event Loops
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event-loops-asynloop-vs-synloop" class="md-nav__link">
    <span class="md-ellipsis">
      
        Event Loops: asynloop vs synloop
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Event Loops: asynloop vs synloop">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#event-loop-selection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Event Loop Selection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynloop-non-blocking-event-loop" class="md-nav__link">
    <span class="md-ellipsis">
      
        asynloop: Non-Blocking Event Loop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synloop-blocking-fallback-loop" class="md-nav__link">
    <span class="md-ellipsis">
      
        synloop: Blocking Fallback Loop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-loop-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        Event Loop Comparison
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-processing-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Message Processing Flow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message Processing Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-handler-creation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task Handler Creation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qos-updates-and-message-prioritization" class="md-nav__link">
    <span class="md-ellipsis">
      
        QoS Updates and Message Prioritization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pending-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pending Operations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consumer-component-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consumer Component Architecture
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#qos-and-prefetch-count-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        QoS and Prefetch Count Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QoS and Prefetch Count Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefetch-count-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prefetch Count Calculation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qos-update-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        QoS Update Strategy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prefetch-count-reduction-on-broker-reconnection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prefetch Count Reduction on Broker Reconnection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prefetch Count Reduction on Broker Reconnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefetch-reduction-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prefetch Reduction Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reduction-formula" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reduction Formula
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-messages" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging Messages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interaction-with-task-cancellation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interaction with Task Cancellation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visibility-timeout-reset-during-shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visibility Timeout Reset During Shutdown
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Visibility Timeout Reset During Shutdown">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#visibility-timeout-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visibility Timeout Mechanism
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-for-visibility-timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration for Visibility Timeout
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shutdown-behavior-with-visibility-timeout-reset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Shutdown Behavior with Visibility Timeout Reset
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Scenarios
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-log-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Log Output
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connection-management-and-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connection Management and Recovery
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connection Management and Recovery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#heartbeat-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Heartbeat Monitoring
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-state-verification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connection State Verification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pool-process-verification-asynloop-only" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pool Process Verification (asynloop only)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#broker-reconnection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Broker Reconnection
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hub-and-event-loop-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hub and Event Loop Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hub and Event Loop Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hub-registration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hub Registration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hub-loop-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hub Loop Mechanism
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-drain-for-amqp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Drain for AMQP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#autoscaling-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Autoscaling Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Autoscaling Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autoscaler-registration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Autoscaler Registration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefetch-count-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prefetch Count Updates
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consumer-and-event-loop-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consumer and Event Loop Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transport-specific-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Transport-Specific Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-loop-selection_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Event Loop Selection
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-consumer-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Consumer Behavior
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Consumer Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Coverage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-test-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Test Configurations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.6-autoscaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Autoscaling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    6 result backends
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 result backends
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-result-backends/6.1-backend-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backend Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-result-backends/6.2-backend-implementations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backend Implementations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-result-backends/6.3-result-storage-and-retrieval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Result Serialization and Retrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-result-backends/6.4-chord-coordination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chord Coordination
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-result-backends/6.5-backend-resilience/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Resilience
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-result-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Result Backends
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_13" >
        
          
          <label class="md-nav__link" for="__nav_2_13" id="__nav_2_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    7 periodic tasks (beat)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 periodic tasks (beat)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-periodic-tasks-%28beat%29/7.1-beat-scheduler-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Beat Scheduler Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-periodic-tasks-%28beat%29/7.2-schedule-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schedule Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-periodic-tasks-%28beat%29/7.3-time-and-timezone-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Time and Timezone Handling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-periodic-tasks-%28beat%29/7.4-persistent-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persistent Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-periodic-tasks-%28beat%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Periodic Tasks (Beat)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_15" >
        
          
          <label class="md-nav__link" for="__nav_2_15" id="__nav_2_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    8 monitoring and control
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 monitoring and control
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-monitoring-and-control/8.1-remote-control-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Remote Control Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-monitoring-and-control/8.2-worker-inspection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Inspection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-monitoring-and-control/8.3-event-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-monitoring-and-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Monitoring and Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_17" >
        
          
          <label class="md-nav__link" for="__nav_2_17" id="__nav_2_17_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    9 command line interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 command line interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-command-line-interface/9.1-cli-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-command-line-interface/9.2-worker-and-beat-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker and Beat Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-command-line-interface/9.3-management-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Management Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-command-line-interface/9.4-multi-worker-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-worker Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-command-line-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Line Interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_19" >
        
          
          <label class="md-nav__link" for="__nav_2_19" id="__nav_2_19_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    10 development and testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_19">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 development and testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-development-and-testing/10.1-testing-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-development-and-testing/10.2-test-matrix-and-environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Matrix and Environments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-development-and-testing/10.3-integration-and-smoke-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integration and Smoke Tests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-development-and-testing/10.4-code-quality-and-documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Quality and Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-development-and-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development and Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_21" >
        
          
          <label class="md-nav__link" for="__nav_2_21" id="__nav_2_21_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    11 packaging and distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_21">
            <span class="md-nav__icon md-icon"></span>
            
  
    11 packaging and distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../11-packaging-and-distribution/11.1-package-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../11-packaging-and-distribution/11.2-dependencies-and-extras/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependencies and Extras
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../11-packaging-and-distribution/11.3-version-management-and-release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version Management and Release
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../11-packaging-and-distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Packaging and Distribution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Lc0 deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Lc0 deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/1-lc0-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lc0 Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 building and installation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 building and installation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.1-build-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.2-linux-and-macos-build-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux and macOS Build Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.3-windows-build-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows Build Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.4-version-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building and Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 core engine architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 core engine architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/3.1-uci-protocol-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI Protocol Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/3.2-configuration-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Engine Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 chess representation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 chess representation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.1-bitboards-and-move-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bitboards
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.2-position-encoding-and-history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Position Encoding and History
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.3-syzygy-tablebase-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Syzygy Tablebase Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.4-pgn-and-game-import/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PGN and Game Import
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chess Representation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 search algorithm
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 search algorithm
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.1-mcts-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCTS Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.2-search-parameters-and-stopping-conditions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Parameters and Stopping Conditions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.3-search-tree-caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Caching System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Algorithm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 neural network system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 neural network system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.1-network-interface-and-backend-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Network Interface and Backend Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.2-weights-loading-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Weights Loading and Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.3-cuda-and-cudnn-backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CUDA and cuDNN Backend
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.4-onnx-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ONNX Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.5-xla-and-hlo-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XLA and HLO Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.6-memory-caching-and-performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Caching and Performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Neural Network System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 self play system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 self play system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/7-self-play-system/7.1-tournament-organization-and-game-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tournament Organization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/7-self-play-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Self-Play System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_14" >
        
          
          <label class="md-nav__link" for="__nav_3_14" id="__nav_3_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 utilities and infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 utilities and infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.1-fast-mathematical-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fast Mathematical Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.2-threading-and-synchronization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Threading and Synchronization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.3-benchmarking-and-performance-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Benchmarking and Performance Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities and Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_16" >
        
          
          <label class="md-nav__link" for="__nav_3_16" id="__nav_3_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 continuous integration and deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 continuous integration and deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/9.1-circleci-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CircleCI Workflows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/9.2-windows-build-and-packaging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows Build and Packaging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Continuous Integration and Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Linux deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linux deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/1-linux-kernel-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux Kernel Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 rust for linux
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 rust for linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/2-rust-for-linux/2.1-rust-kernel-apis-and-abstractions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust Kernel APIs and Abstractions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/2-rust-for-linux/2.2-nova-drm-graphics-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nova DRM Graphics Driver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/2-rust-for-linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust for Linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 virtualization (kvm)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 virtualization (kvm)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/3-virtualization-%28kvm%29/3.1-kvm-x86-virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM x86 Virtualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/3-virtualization-%28kvm%29/3.2-kvm-arm64-virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM ARM64 Virtualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/3-virtualization-%28kvm%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Virtualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 core kernel infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 core kernel infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/4.1-process-scheduling-and-sched_ext/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Process Scheduling and sched_ext
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/4.2-tracing-and-observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tracing and Observability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/4.3-build-system-and-kbuild/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System and Kbuild
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Kernel Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 storage and io
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 storage and io
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/5.1-io_uring-asynchronous-io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    io_uring Asynchronous I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/5.2-btrfs-copy-on-write-filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Btrfs Copy-on-Write Filesystem
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/5.3-ufs-storage-controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UFS Storage Controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Storage and I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 graphics and display
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 graphics and display
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/6-graphics-and-display/6.1-amdgpu-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AMDGPU Driver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/6-graphics-and-display/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Graphics and Display
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Ragflow deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Ragflow deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/1-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 getting started and deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 getting started and deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/2-getting-started-and-deployment/2.1-docker-compose-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Compose Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/2-getting-started-and-deployment/2.4-build-system-and-cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System and CI/CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/2-getting-started-and-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started and Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 system architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 system architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/3.1-core-application-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Application Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/3.2-data-storage-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Storage Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/3.3-task-execution-and-queue-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Execution and Queue System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 frontend application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 frontend application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/4-frontend-application/4.1-internationalization-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Internationalization System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/4-frontend-application/4.2-application-structure-and-ui-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Structure and Routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/4-frontend-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Frontend Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 llm integration system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 llm integration system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.1-model-factory-pattern-and-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Factory Pattern and Registration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.2-provider-implementations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Provider Implementations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.3-error-handling-and-retry-logic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Retry Logic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.4-tenant-configuration-and-usage-tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tenant Configuration and Usage Tracking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.5-tool-calling-and-function-use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tool Calling and Function Use
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM Integration System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 document processing pipeline
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 document processing pipeline
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.1-document-parsing-strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document Parsing Strategies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.2-chunking-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chunking Methods
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.3-content-enhancement-and-embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Content Enhancement and Embedding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.4-layout-recognition-and-ocr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layout Recognition and OCR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.5-knowledge-graph-construction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Knowledge Graph Construction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.6-raptor-hierarchical-summarization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAPTOR Hierarchical Summarization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document Processing Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_12" >
        
          
          <label class="md-nav__link" for="__nav_5_12" id="__nav_5_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 data source integration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 data source integration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/7.1-connector-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connector Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/7.2-synchronization-and-scheduling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Synchronization and Scheduling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/7.3-supported-data-sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supported Data Sources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Source Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_14" >
        
          
          <label class="md-nav__link" for="__nav_5_14" id="__nav_5_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 backend api system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 backend api system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.1-api-architecture-and-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Architecture and SDK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.2-authentication-and-authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication and Multi-tenancy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.3-dataset-and-knowledge-base-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset and Knowledge Base APIs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.4-document-and-file-management-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document and File Management APIs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.5-chat-and-conversation-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chat and Conversation APIs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backend API System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_16" >
        
          
          <label class="md-nav__link" for="__nav_5_16" id="__nav_5_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 agent and workflow system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 agent and workflow system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.1-canvas-engine-and-dsl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas Engine and DSL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.2-component-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Component System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.3-built-in-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Built-in Components
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.4-workflow-execution-and-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow Execution and Streaming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.5-state-and-variable-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    State and Variable Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.6-agent-tools-and-react-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Tools and ReAct Loop
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.7-canvas-api-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas API and Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent and Workflow System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_18" >
        
          
          <label class="md-nav__link" for="__nav_5_18" id="__nav_5_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 retrieval and rag system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_18">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 retrieval and rag system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.1-query-processing-and-refinement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query Processing and Refinement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.2-hybrid-search-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hybrid Search Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.3-reranking-and-metadata-filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reranking and Metadata Filtering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.4-response-generation-and-citations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Response Generation and Citations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieval and RAG System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Redis deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Redis deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/1-redis-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 redis core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 redis core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.1-server-architecture-and-lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Server Architecture and Lifecycle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.2-client-connection-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client Connection Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.3-command-processing-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Processing Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.4-configuration-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 data storage and management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 data storage and management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.1-core-data-types-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Data Types Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.2-streams-and-blocking-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Streams and Blocking Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.3-hyperloglog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HyperLogLog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.4-memory-efficient-data-structures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory-Efficient Data Structures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.5-dictionary-and-key-value-store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dictionary and Key-Value Store
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.6-dynamic-string-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dynamic String Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Storage and Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 memory management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 memory management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/4.1-eviction-and-expiration-policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Eviction and Expiration Policies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/4.2-memory-allocators-and-build-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Allocators and Build System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8" >
        
          
          <label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 scripting and extensions
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 scripting and extensions
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/5.1-lua-scripting-and-redis-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lua Scripting and Redis Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/5.2-redis-module-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Module API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scripting and Extensions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_10" >
        
          
          <label class="md-nav__link" for="__nav_6_10" id="__nav_6_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 high availability and distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 high availability and distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/6.1-redis-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Cluster
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/6.2-redis-sentinel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Sentinel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    High Availability and Scaling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/7-persistence-and-replication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persistence and Replication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_13" >
        
          
          <label class="md-nav__link" for="__nav_6_13" id="__nav_6_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/8.1-access-control-lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Access Control Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/8.2-network-security-and-tls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Network Security and TLS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_15" >
        
          
          <label class="md-nav__link" for="__nav_6_15" id="__nav_6_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 client tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 client tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/9-client-tools/9.1-redis-cli-and-benchmark-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis CLI and Benchmark Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/9-client-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_17" >
        
          
          <label class="md-nav__link" for="__nav_6_17" id="__nav_6_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 development and testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 development and testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.1-build-system-and-dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System and Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.2-testing-framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Framework
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.3-continuous-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Continuous Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development and Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Stockfish deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Stockfish deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/2-core-data-structures-and-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Data Structures and Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 board representation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 board representation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.1-position-and-state-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Position and State Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.2-bitboards-and-low-level-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bitboards and Low-level Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.3-move-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Move Generation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Board Representation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 search system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 search system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.1-search-algorithm-and-iterative-deepening/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Algorithm and Iterative Deepening
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.2-thread-management-and-parallel-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thread Management and Parallel Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.3-move-ordering-and-move-picker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Move Ordering and Move Picker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
        
          
          <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 evaluation system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 evaluation system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/5-evaluation-system/5.1-nnue-neural-network-evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NNUE Neural Network Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/5-evaluation-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_8" >
        
          
          <label class="md-nav__link" for="__nav_7_8" id="__nav_7_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 external interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 external interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/6.1-uci-protocol-handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI Protocol Handler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/6.2-uci-options-and-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI Options and Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    External Interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_10" >
        
          
          <label class="md-nav__link" for="__nav_7_10" id="__nav_7_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 infrastructure and support
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 infrastructure and support
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.1-build-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.2-utilities-and-support-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities and Support Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.3-testing-and-benchmarking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing and Benchmarking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Infrastructure and Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event-loops-asynloop-vs-synloop" class="md-nav__link">
    <span class="md-ellipsis">
      
        Event Loops: asynloop vs synloop
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Event Loops: asynloop vs synloop">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#event-loop-selection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Event Loop Selection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynloop-non-blocking-event-loop" class="md-nav__link">
    <span class="md-ellipsis">
      
        asynloop: Non-Blocking Event Loop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synloop-blocking-fallback-loop" class="md-nav__link">
    <span class="md-ellipsis">
      
        synloop: Blocking Fallback Loop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-loop-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        Event Loop Comparison
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-processing-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Message Processing Flow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message Processing Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-handler-creation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task Handler Creation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qos-updates-and-message-prioritization" class="md-nav__link">
    <span class="md-ellipsis">
      
        QoS Updates and Message Prioritization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pending-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pending Operations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consumer-component-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consumer Component Architecture
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#qos-and-prefetch-count-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        QoS and Prefetch Count Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QoS and Prefetch Count Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefetch-count-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prefetch Count Calculation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qos-update-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        QoS Update Strategy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prefetch-count-reduction-on-broker-reconnection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prefetch Count Reduction on Broker Reconnection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prefetch Count Reduction on Broker Reconnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefetch-reduction-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prefetch Reduction Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reduction-formula" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reduction Formula
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-messages" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging Messages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interaction-with-task-cancellation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interaction with Task Cancellation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visibility-timeout-reset-during-shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visibility Timeout Reset During Shutdown
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Visibility Timeout Reset During Shutdown">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#visibility-timeout-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visibility Timeout Mechanism
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-for-visibility-timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration for Visibility Timeout
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shutdown-behavior-with-visibility-timeout-reset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Shutdown Behavior with Visibility Timeout Reset
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Scenarios
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-log-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Log Output
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connection-management-and-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connection Management and Recovery
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connection Management and Recovery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#heartbeat-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Heartbeat Monitoring
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-state-verification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connection State Verification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pool-process-verification-asynloop-only" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pool Process Verification (asynloop only)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#broker-reconnection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Broker Reconnection
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hub-and-event-loop-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hub and Event Loop Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hub and Event Loop Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hub-registration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hub Registration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hub-loop-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hub Loop Mechanism
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-drain-for-amqp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Drain for AMQP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#autoscaling-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Autoscaling Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Autoscaling Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autoscaler-registration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Autoscaler Registration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefetch-count-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prefetch Count Updates
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consumer-and-event-loop-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consumer and Event Loop Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transport-specific-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Transport-Specific Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-loop-selection_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Event Loop Selection
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-consumer-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Consumer Behavior
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Consumer Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Coverage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-test-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Test Configurations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="consumer-and-event-loops">Consumer and Event Loops<a class="headerlink" href="#consumer-and-event-loops" title="Permanent link">&para;</a></h1>
<p>Relevant source files</p>
<ul>
<li><a href="https://github.com/celery/celery/blob/4d068b56/celery/bootsteps.py">celery/bootsteps.py</a></li>
<li><a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py">celery/worker/autoscale.py</a></li>
<li><a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py">celery/worker/components.py</a></li>
<li><a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py">celery/worker/loops.py</a></li>
</ul>
<p>This page documents the Consumer component and the event loop implementations (<code>asynloop</code> and <code>synloop</code>) that drive message consumption in Celery workers. It covers message processing flow, Quality of Service (QoS) management, prefetch count handling, and connection recovery mechanisms.</p>
<p>For information about the overall worker architecture and how the Consumer component is initialized, see page 5.1. For details on worker lifecycle events, see page 5.2. For autoscaling integration, see page 5.6.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The <code>Consumer</code> class defined in <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L218-L243">celery/worker/components.py218-243</a> is the final bootstep in the worker's blueprint. It is marked with <code>last = True</code> to ensure it starts after all infrastructure components (Timer, Hub, Pool) are ready. The Consumer instantiates the actual consumer implementation (via <code>w.consumer_cls</code>) and manages message fetching from the broker.</p>
<p>After initialization, the consumer enters one of two event loop implementations defined in <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py">celery/worker/loops.py</a>:</p>
<table>
<thead>
<tr>
<th>Event Loop</th>
<th>Function</th>
<th>Transport Support</th>
<th>Blocking Model</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>asynloop</strong></td>
<td><code>asynloop()</code> at line 50</td>
<td>AMQP, async Redis</td>
<td>Non-blocking with <code>hub.create_loop()</code></td>
</tr>
<tr>
<td><strong>synloop</strong></td>
<td><code>synloop()</code> at line 101</td>
<td>All transports (fallback)</td>
<td>Blocking with <code>connection.drain_events()</code></td>
</tr>
</tbody>
</table>
<p>The event loops handle:</p>
<ul>
<li>Integration with <code>kombu.asynchronous.Hub</code> for I/O multiplexing</li>
<li>QoS/prefetch count management for backpressure control</li>
<li>Automatic broker reconnection with exponential backoff</li>
<li>Coordination with the execution pool for task dispatch</li>
</ul>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L218-L243">celery/worker/components.py218-243</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L1-L11">celery/worker/loops.py1-11</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L50-L50">celery/worker/loops.py50</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L101-L101">celery/worker/loops.py101</a></p>
<h2 id="event-loops-asynloop-vs-synloop">Event Loops: asynloop vs synloop<a class="headerlink" href="#event-loops-asynloop-vs-synloop" title="Permanent link">&para;</a></h2>
<p>Celery workers use one of two event loop implementations depending on the broker transport capabilities. The event loop is the core mechanism that continuously fetches and processes messages from the broker.</p>
<h3 id="event-loop-selection">Event Loop Selection<a class="headerlink" href="#event-loop-selection" title="Permanent link">&para;</a></h3>
<p>Diagram: Event Loop Selection Based on Transport Type</p>
<p><pre class="mermaid"><code>flowchart TD
    Start["Worker.start()"]
    CheckTransport["Check connection.transport.driver_type"]
    SelectAsynloop["asynloop(obj, connection, consumer, ...)"]
    SelectSynloop["synloop(obj, connection, consumer, ...)"]
    AsynloopImpl["asynloop:50Non-blockinghub.create_loop()next(loop)"]
    SynloopImpl["synloop:101Blockingconnection.drain_events(timeout=2.0)perform_pending_operations()"]

    Start --&gt; CheckTransport
    CheckTransport --&gt; SelectAsynloop
    CheckTransport --&gt; SelectSynloop
    SelectAsynloop --&gt; AsynloopImpl
    SelectSynloop --&gt; SynloopImpl</code></pre>
<strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L50-L99">celery/worker/loops.py50-99</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L101-L136">celery/worker/loops.py101-136</a></p>
<h3 id="asynloop-non-blocking-event-loop">asynloop: Non-Blocking Event Loop<a class="headerlink" href="#asynloop-non-blocking-event-loop" title="Permanent link">&para;</a></h3>
<p>The <code>asynloop</code> function implements a non-blocking event loop using the Hub's poller for I/O multiplexing. It is used for transports that support asynchronous operations.</p>
<p><strong>Function Signature:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>def asynloop(obj, connection, consumer, blueprint, hub, qos,
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>             heartbeat, clock, hbrate=2.0):
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    &quot;&quot;&quot;Non-blocking event loop.&quot;&quot;&quot;
</code></pre></div>
<strong>Key Characteristics:</strong></p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Blocking Strategy</strong></td>
<td>Non-blocking, uses <code>hub.create_loop()</code> iterator</td>
</tr>
<tr>
<td><strong>I/O Model</strong></td>
<td>Event-driven polling with Hub integration</td>
</tr>
<tr>
<td><strong>QoS Updates</strong></td>
<td>Batched when no messages are pending</td>
</tr>
<tr>
<td><strong>Heartbeat</strong></td>
<td>AMQP heartbeat handled by timer callbacks</td>
</tr>
<tr>
<td><strong>Integration</strong></td>
<td>Registers consumer and controller with event loop</td>
</tr>
</tbody>
</table>
<p>Diagram: asynloop Execution Flow with Code Entity References</p>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L50-L98">celery/worker/loops.py50-98</a></p>
<p><strong>asynloop Implementation Details:</strong></p>
<ol>
<li>
<p><strong>Initialization (lines 53-65):</strong></p>
<ul>
<li>Creates task handler via <code>obj.create_task_handler()</code></li>
<li>Sets up AMQP heartbeat monitoring with <code>_enable_amqheartbeats()</code></li>
<li>Assigns handler to <code>consumer.on_message</code></li>
<li>Registers consumer and controller with Hub</li>
<li>Calls <code>consumer.consume()</code> to start consuming</li>
<li>Invokes <code>obj.on_ready()</code> callback</li>
<li>
<p><strong>Event Loop (lines 84-98):</strong></p>
</li>
<li>
<p>Checks <code>blueprint.state == RUN</code> and <code>obj.connection</code> each iteration</p>
</li>
<li>Calls <code>state.maybe_shutdown()</code> to check for shutdown signals</li>
<li>Verifies heartbeat status via <code>heartbeat_error[0]</code></li>
<li>Updates QoS when <code>qos.prev != qos.value</code> (lazy batching)</li>
<li>Calls <code>next(loop)</code> to process next event from Hub</li>
<li>Recreates loop on <code>StopIteration</code></li>
<li>
<p><strong>Pool Verification (lines 70-71):</strong></p>
</li>
<li>
<p>On first start (<code>restart_count == 0</code>), verifies pool started successfully</p>
</li>
<li>Raises <code>WorkerLostError</code> if pool processes failed to start</li>
<li>
<p><strong>AMQP Quick Drain (lines 76-77):</strong></p>
</li>
<li>
<p>For AMQP transports, performs quick drain after consume to clear prefetched messages</p>
</li>
<li>Uses <code>hub.call_soon(_quick_drain, connection)</code></li>
</ul>
</li>
</ol>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L50-L98">celery/worker/loops.py50-98</a></p>
<h3 id="synloop-blocking-fallback-loop">synloop: Blocking Fallback Loop<a class="headerlink" href="#synloop-blocking-fallback-loop" title="Permanent link">&para;</a></h3>
<p>The <code>synloop</code> function implements a blocking event loop for transports that do not support asynchronous operations. It uses <code>connection.drain_events()</code> with a timeout.</p>
<p><strong>Function Signature:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>def synloop(obj, connection, consumer, blueprint, hub, qos,
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>            heartbeat, clock, hbrate=2.0, **kwargs):
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    &quot;&quot;&quot;Fallback blocking event loop for transports that doesn&#39;t support AIO.&quot;&quot;&quot;
</code></pre></div>
<strong>Key Characteristics:</strong></p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Blocking Strategy</strong></td>
<td>Blocking, uses <code>connection.drain_events(timeout=2.0)</code></td>
</tr>
<tr>
<td><strong>I/O Model</strong></td>
<td>Blocking with timeout</td>
</tr>
<tr>
<td><strong>QoS Updates</strong></td>
<td>Checked each iteration</td>
</tr>
<tr>
<td><strong>Heartbeat</strong></td>
<td>Only enabled for green pools (eventlet/gevent)</td>
</tr>
<tr>
<td><strong>Integration</strong></td>
<td>No Hub registration needed</td>
</tr>
</tbody>
</table>
<p>Diagram: synloop Execution Flow with Code Entity References</p>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L101-L136">celery/worker/loops.py101-136</a></p>
<p><strong>synloop Implementation Details:</strong></p>
<ol>
<li>
<p><strong>Initialization (lines 105-113):</strong></p>
<ul>
<li>Creates task handler via <code>obj.create_task_handler()</code></li>
<li>Enables heartbeat only for green pools via <code>_enable_amqheartbeats()</code></li>
<li>Assigns handler to <code>consumer.on_message</code></li>
<li>Calls <code>consumer.consume()</code> to start consuming</li>
<li>Invokes <code>obj.on_ready()</code> callback</li>
<li>
<p><strong>Loop Cycle Function (lines 115-130):</strong></p>
</li>
<li>
<p><code>_loop_cycle()</code> performs one iteration:</p>
<ul>
<li>Checks heartbeat error and raises if present</li>
<li>Updates QoS if needed (<code>qos.prev != qos.value</code>)</li>
<li>Calls <code>obj.perform_pending_operations()</code> for periodic tasks</li>
<li>Calls <code>connection.drain_events(timeout=2.0)</code> to block for messages</li>
<li>Handles <code>socket.timeout</code> gracefully (expected when no messages)</li>
<li>Raises <code>OSError</code> only if in <code>RUN</code> state</li>
</ul>
</li>
<li>
<p><strong>Main Loop (lines 132-136):</strong></p>
</li>
<li>
<p>Continues while <code>blueprint.state == RUN</code> and <code>obj.connection</code> exists</p>
</li>
<li>Calls <code>state.maybe_shutdown()</code> before each iteration</li>
<li>Executes <code>_loop_cycle()</code> in finally block to ensure it runs</li>
</ul>
</li>
</ol>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L101-L136">celery/worker/loops.py101-136</a></p>
<h3 id="event-loop-comparison">Event Loop Comparison<a class="headerlink" href="#event-loop-comparison" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>asynloop</th>
<th>synloop</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Blocking Model</strong></td>
<td>Non-blocking (event-driven)</td>
<td>Blocking with timeout</td>
</tr>
<tr>
<td><strong>Transport Support</strong></td>
<td>AMQP, async Redis</td>
<td>All transports (fallback)</td>
</tr>
<tr>
<td><strong>Hub Integration</strong></td>
<td>Yes, registers with Hub</td>
<td>No Hub registration</td>
</tr>
<tr>
<td><strong>Loop Mechanism</strong></td>
<td><code>next(hub.create_loop())</code></td>
<td><code>connection.drain_events(timeout=2.0)</code></td>
</tr>
<tr>
<td><strong>QoS Update</strong></td>
<td>Lazy (when no messages)</td>
<td>Every iteration</td>
</tr>
<tr>
<td><strong>Heartbeat</strong></td>
<td>Always enabled via timer</td>
<td>Only for green pools</td>
</tr>
<tr>
<td><strong>Pool Verification</strong></td>
<td>Yes (on first start)</td>
<td>No</td>
</tr>
<tr>
<td><strong>AMQP Quick Drain</strong></td>
<td>Yes (after consume)</td>
<td>No</td>
</tr>
<tr>
<td><strong>Performance</strong></td>
<td>Higher (I/O multiplexing)</td>
<td>Lower (blocking per connection)</td>
</tr>
<tr>
<td><strong>Use Case</strong></td>
<td>Production with AMQP/Redis</td>
<td>Fallback/simple transports</td>
</tr>
</tbody>
</table>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L50-L136">celery/worker/loops.py50-136</a></p>
<h2 id="message-processing-flow">Message Processing Flow<a class="headerlink" href="#message-processing-flow" title="Permanent link">&para;</a></h2>
<p>Once the event loop fetches a message from the broker, it flows through the consumer's message processing pipeline.</p>
<p>Diagram: Message Processing Pipeline with Code Entities</p>
<p><pre class="mermaid"><code>flowchart TD
    Broker["Message from Broker"]
    Asynloop["asynloop:84-98next(hub.create_loop())"]
    Synloop["synloop:132-136connection.drain_events()"]
    OnMessage["consumer.on_message [loops:61, 110]"]
    Handler["on_task_received= obj.create_task_handler() [loops:57, 105]"]
    Decode["Decode and deserializemessage body"]
    Strategy["Apply task strategyvia worker.strategies"]
    Request["Create Request objectwith task context"]
    ProcessTask["w.process_task [components:229]or w._process_task_sem"]
    PoolApply["pool.apply_async()"]
    Pool["Worker Poolw.pool [components:234]"]
    TaskRun["Execute task.call()"]
    Backend["Store to result backend"]

    Broker --&gt; Asynloop
    Broker --&gt; Synloop
    Asynloop --&gt; OnMessage
    Synloop --&gt; OnMessage
    OnMessage --&gt; Handler
    Handler --&gt; Decode
    Decode --&gt; Strategy
    Strategy --&gt; Request
    Request --&gt; ProcessTask
    ProcessTask --&gt; PoolApply
    PoolApply --&gt; Pool
    Pool --&gt; TaskRun
    TaskRun --&gt; Backend</code></pre>
<strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L57-L61">celery/worker/loops.py57-61</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L105-L110">celery/worker/loops.py105-110</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L228-L234">celery/worker/components.py228-234</a></p>
<h3 id="task-handler-creation">Task Handler Creation<a class="headerlink" href="#task-handler-creation" title="Permanent link">&para;</a></h3>
<p>The task handler is created during event loop setup via <code>obj.create_task_handler()</code>. This handler is assigned to <code>consumer.on_message</code> to process incoming messages:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a># In asynloop
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>on_task_received = obj.create_task_handler()
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>consumer.on_message = on_task_received
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a># In synloop
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>on_task_received = obj.create_task_handler()
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>consumer.on_message = on_task_received
</code></pre></div>
The handler validates the message, creates a task request context, and dispatches to the pool using the appropriate strategy.</p>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L57-L61">celery/worker/loops.py57-61</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L105-L110">celery/worker/loops.py105-110</a></p>
<h3 id="qos-updates-and-message-prioritization">QoS Updates and Message Prioritization<a class="headerlink" href="#qos-updates-and-message-prioritization" title="Permanent link">&para;</a></h3>
<p>Both event loops implement lazy QoS updates to optimize performance:</p>
<p><strong>asynloop QoS Strategy (lines 89-93):</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a># We only update QoS when there&#39;s no more messages to read.
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a># This groups together qos calls, and makes sure that remote
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a># control commands will be prioritized over task messages.
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>if qos.prev != qos.value:
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    update_qos()
</code></pre></div>
<strong>synloop QoS Strategy (lines 121-122):</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>if qos.prev != qos.value:
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    qos.update()
</code></pre></div>
This lazy update strategy:</p>
<ul>
<li>Batches QoS updates to reduce broker round-trips</li>
<li>Ensures remote control commands are processed before task messages</li>
<li>Updates only when the QoS value has changed</li>
</ul>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L89-L93">celery/worker/loops.py89-93</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L121-L122">celery/worker/loops.py121-122</a></p>
<h3 id="pending-operations">Pending Operations<a class="headerlink" href="#pending-operations" title="Permanent link">&para;</a></h3>
<p>The <code>synloop</code> explicitly calls <code>obj.perform_pending_operations()</code> each iteration to handle periodic tasks like:</p>
<ul>
<li>Timer callbacks</li>
<li>Heartbeat checks</li>
<li>State persistence</li>
<li>Pool maintenance</li>
</ul>
<p>The <code>asynloop</code> handles these operations implicitly through Hub integration.</p>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L106-L106">celery/worker/loops.py106</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L124-L124">celery/worker/loops.py124</a></p>
<h2 id="consumer-component-architecture">Consumer Component Architecture<a class="headerlink" href="#consumer-component-architecture" title="Permanent link">&para;</a></h2>
<p>The Consumer is implemented as a bootstep that is always the last component to start in the worker's initialization sequence. This ensures all infrastructure components (Timer, Hub, Pool) are ready before message consumption begins.</p>
<p>Diagram: Consumer Bootstep Initialization with Code Entities</p>
<p><pre class="mermaid"><code>flowchart TD
    Timer["Timer(bootsteps.Step)components:32"]
    Hub["Hub(bootsteps.StartStopStep)components:56requires = (Timer,)"]
    Pool["Pool(bootsteps.StartStopStep)components:101requires = (Hub,)"]
    Consumer["Consumer(bootsteps.StartStopStep)components:218last = True"]
    CalcPrefetch["Calculate prefetch_count [224-227]If autoscale: max(max_concurrency,1) * multiplierElse: concurrency * multiplier"]
    Instantiate["w.consumer = self.instantiate(    w.consumer_cls, [228]"]
    Param1["process_task = w.process_task [229]"]
    Param2["hostname = w.hostname [230]"]
    Param3["initial_prefetch_count [233]"]
    Param4["pool = w.pool [234]"]
    Param5["timer = w.timer [235]"]
    Param6["hub = w.hub [238]"]
    Param7["controller = w [237]"]

    Timer --&gt; Hub
    Hub --&gt; Pool
    Pool --&gt; Consumer
    Consumer --&gt; CalcPrefetch
    CalcPrefetch --&gt; Instantiate
    Instantiate --&gt; Param1
    Instantiate --&gt; Param2
    Instantiate --&gt; Param3
    Instantiate --&gt; Param4
    Instantiate --&gt; Param5
    Instantiate --&gt; Param6
    Instantiate --&gt; Param7</code></pre>
<strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L218-L243">celery/worker/components.py218-243</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L32-L48">celery/worker/components.py32-48</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L56-L99">celery/worker/components.py56-99</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L101-L179">celery/worker/components.py101-179</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/bootsteps.py#L313-L314">celery/bootsteps.py313-314</a></p>
<p><strong>Consumer Class Definition:</strong></p>
<p>The <code>Consumer</code> class in <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L218-L243">celery/worker/components.py218-243</a> is a <code>StartStopStep</code> that:</p>
<ol>
<li><strong>Marked as Last</strong> (<code>last = True</code>) - Ensures it starts after all dependencies</li>
<li><strong>Calculates Prefetch Count</strong> - Based on concurrency and autoscaling settings</li>
<li><strong>Instantiates Consumer Instance</strong> - Creates the actual consumer with all required parameters</li>
<li><strong>Registers Components</strong> - Passes references to pool, timer, hub, and controller</li>
</ol>
<p><strong>Key Parameters Passed to Consumer:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Source</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>process_task</code></td>
<td><code>w.process_task</code></td>
<td>Message handler function</td>
</tr>
<tr>
<td><code>hostname</code></td>
<td><code>w.hostname</code></td>
<td>Worker hostname for identification</td>
</tr>
<tr>
<td><code>task_events</code></td>
<td><code>w.task_events</code></td>
<td>Enable task event publishing</td>
</tr>
<tr>
<td><code>init_callback</code></td>
<td><code>w.ready_callback</code></td>
<td>Callback when consumer ready</td>
</tr>
<tr>
<td><code>initial_prefetch_count</code></td>
<td>Calculated</td>
<td>Initial QoS prefetch count</td>
</tr>
<tr>
<td><code>pool</code></td>
<td><code>w.pool</code></td>
<td>Execution pool reference</td>
</tr>
<tr>
<td><code>timer</code></td>
<td><code>w.timer</code></td>
<td>Timer for periodic operations</td>
</tr>
<tr>
<td><code>app</code></td>
<td><code>w.app</code></td>
<td>Celery application instance</td>
</tr>
<tr>
<td><code>controller</code></td>
<td><code>w</code></td>
<td>Worker controller reference</td>
</tr>
<tr>
<td><code>hub</code></td>
<td><code>w.hub</code></td>
<td>Event loop hub (if async)</td>
</tr>
</tbody>
</table>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L224-L242">celery/worker/components.py224-242</a></p>
<h2 id="qos-and-prefetch-count-management">QoS and Prefetch Count Management<a class="headerlink" href="#qos-and-prefetch-count-management" title="Permanent link">&para;</a></h2>
<p>Quality of Service (QoS) and prefetch count control how many messages the consumer fetches from the broker before acknowledgment. This implements backpressure to prevent overwhelming workers with more messages than they can process.</p>
<h3 id="prefetch-count-calculation">Prefetch Count Calculation<a class="headerlink" href="#prefetch-count-calculation" title="Permanent link">&para;</a></h3>
<p>The initial prefetch count is calculated in <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L224-L227">celery/worker/components.py224-227</a> based on worker concurrency:</p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Formula</th>
<th>Example (concurrency=5, multiplier=4)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Without autoscaling</strong></td>
<td><code>concurrency × prefetch_multiplier</code></td>
<td>5 × 4 = 20</td>
</tr>
<tr>
<td><strong>With autoscaling</strong></td>
<td><code>max(max_concurrency, 1) × prefetch_multiplier</code></td>
<td>max(10, 1) × 4 = 40</td>
</tr>
</tbody>
</table>
<p><strong>Calculation Logic:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>if w.max_concurrency:
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    prefetch_count = max(w.max_concurrency, 1) * w.prefetch_multiplier
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>else:
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    prefetch_count = w.concurrency * w.prefetch_multiplier
</code></pre></div>
The prefetch multiplier defaults to 4 but can be configured via <code>worker_prefetch_multiplier</code>.</p>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L224-L227">celery/worker/components.py224-227</a></p>
<h3 id="qos-update-strategy">QoS Update Strategy<a class="headerlink" href="#qos-update-strategy" title="Permanent link">&para;</a></h3>
<p>The event loops implement lazy QoS updates to optimize performance. Updates only occur when the QoS value changes and no messages are pending:</p>
<p><strong>In asynloop:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a># Lines 89-93
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a># We only update QoS when there&#39;s no more messages to read.
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a># This groups together qos calls, and makes sure that remote
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a># control commands will be prioritized over task messages.
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>if qos.prev != qos.value:
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    update_qos()
</code></pre></div>
<strong>In synloop:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a># Lines 121-122
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>if qos.prev != qos.value:
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    qos.update()
</code></pre></div>
This strategy:</p>
<ul>
<li>Batches QoS updates to reduce broker communication overhead</li>
<li>Ensures remote control commands are processed before task messages</li>
<li>Only updates when prefetch count actually changes</li>
</ul>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L89-L93">celery/worker/loops.py89-93</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L121-L122">celery/worker/loops.py121-122</a></p>
<h2 id="prefetch-count-reduction-on-broker-reconnection">Prefetch Count Reduction on Broker Reconnection<a class="headerlink" href="#prefetch-count-reduction-on-broker-reconnection" title="Permanent link">&para;</a></h2>
<p>When the broker connection is lost and the worker reconnects, Celery can automatically reduce the prefetch count to prevent over-fetching messages when tasks are already running. This feature is controlled by the <code>worker_enable_prefetch_count_reduction</code> configuration setting.</p>
<h3 id="prefetch-reduction-flow">Prefetch Reduction Flow<a class="headerlink" href="#prefetch-reduction-flow" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    N1["Worker Running5 tasks executingPrefetch: 20"]
    D1["Broker Connection Lost"]
    D2["Tasks Continue Executing5 tasks still running"]
    D3["Worker Attempts Reconnection"]
    R1["Calculate Running Tasksreserved_requests = 5"]
    R2["Calculate Reduced Prefetchmax(multiplier, prefetch - running × multiplier)"]
    R3["Reduced Prefetch Setmax(2, 20 - 5×2) = 10"]
    R4["Log Temporary Reduction"]
    S1["Tasks Complete"]
    S2["Prefetch Gradually RestoredBack to 20"]
    S3["Log Restoration Complete"]

    N1 --&gt; D1
    D1 --&gt; D2
    D2 --&gt; D3
    D3 --&gt; R1
    R1 --&gt; R2
    R2 --&gt; R3
    R3 --&gt; R4
    R4 --&gt; S1
    S1 --&gt; S2
    S2 --&gt; S3</code></pre>
<strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py#L32-L76">t/smoke/tests/test_consumer.py32-76</a></p>
<h3 id="reduction-formula">Reduction Formula<a class="headerlink" href="#reduction-formula" title="Permanent link">&para;</a></h3>
<p>The temporary prefetch count is calculated as:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>reduced_prefetch = max(
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>    prefetch_multiplier,
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    max_prefetch - (running_tasks_count × prefetch_multiplier)
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>)
</code></pre></div>
Where:</p>
<ul>
<li><code>max_prefetch</code> = original prefetch count (e.g., 20)</li>
<li><code>running_tasks_count</code> = number of currently executing tasks (from <code>state.reserved_requests</code>)</li>
<li><code>prefetch_multiplier</code> = configured multiplier (e.g., 2)</li>
</ul>
<p><strong>Example:</strong> With <code>max_prefetch=20</code>, <code>prefetch_multiplier=2</code>, and 5 running tasks:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>reduced_prefetch = max(2, 20 - (5 × 2)) = max(2, 10) = 10
</code></pre></div>
<strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py#L39-L61">t/smoke/tests/test_consumer.py39-61</a></p>
<h3 id="logging-messages">Logging Messages<a class="headerlink" href="#logging-messages" title="Permanent link">&para;</a></h3>
<p>The worker logs the following messages during prefetch count reduction:</p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Log Message Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Reduction Applied</strong></td>
<td><code>"Temporarily reducing the prefetch count to 10 to avoid over-fetching since 5 tasks are currently being processed."</code></td>
</tr>
<tr>
<td><strong>Restoration Notice</strong></td>
<td><code>"The prefetch count will be gradually restored to 20 as the tasks complete processing."</code></td>
</tr>
<tr>
<td><strong>Full Restoration</strong></td>
<td><code>"Resuming normal operations following a restart.\nPrefetch count has been restored to the maximum of 20"</code></td>
</tr>
</tbody>
</table>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py#L52-L75">t/smoke/tests/test_consumer.py52-75</a></p>
<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>worker_enable_prefetch_count_reduction</code></td>
<td>bool</td>
<td>False</td>
<td>Enable automatic prefetch reduction on reconnection</td>
</tr>
<tr>
<td><code>worker_prefetch_multiplier</code></td>
<td>int</td>
<td>4</td>
<td>Multiplier for calculating prefetch count</td>
</tr>
<tr>
<td><code>worker_cancel_long_running_tasks_on_connection_loss</code></td>
<td>bool</td>
<td>False</td>
<td>Cancel long-running tasks on connection loss</td>
</tr>
</tbody>
</table>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py#L34-L37">t/smoke/tests/test_consumer.py34-37</a> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py#L79-L84">t/smoke/tests/test_consumer.py79-84</a> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py#L99-L105">t/smoke/tests/test_consumer.py99-105</a></p>
<h3 id="interaction-with-task-cancellation">Interaction with Task Cancellation<a class="headerlink" href="#interaction-with-task-cancellation" title="Permanent link">&para;</a></h3>
<p>When combined with <code>worker_cancel_long_running_tasks_on_connection_loss = True</code>, the consumer can cancel running tasks during reconnection, allowing new tasks to be fetched immediately:</p>
<p><pre class="mermaid"><code>flowchart TD
    A["Prefetch ReductionEnabled"]
    B["Cancel Taskson Loss?"]
    C["Tasks CancelledNew Tasks FetchedImmediately"]
    D["Tasks ContinueReduced PrefetchPrevents Over-fetch"]

    A --&gt; B
    B --&gt; C
    B --&gt; D</code></pre>
<strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py#L77-L94">t/smoke/tests/test_consumer.py77-94</a></p>
<h2 id="visibility-timeout-reset-during-shutdown">Visibility Timeout Reset During Shutdown<a class="headerlink" href="#visibility-timeout-reset-during-shutdown" title="Permanent link">&para;</a></h2>
<p>When using brokers that support visibility timeout (such as SQS, Redis), unacknowledged messages become invisible to other consumers for a specified duration. During worker shutdown, Celery resets the visibility timeout for unacknowledged messages to make them immediately available to other workers.</p>
<h3 id="visibility-timeout-mechanism">Visibility Timeout Mechanism<a class="headerlink" href="#visibility-timeout-mechanism" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>[Mermaid sequence]</strong>
<em>(图表结构无法解析)</em></p>
</blockquote>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_worker.py#L318-L407">t/smoke/tests/test_worker.py318-407</a></p>
<h3 id="configuration-for-visibility-timeout">Configuration for Visibility Timeout<a class="headerlink" href="#configuration-for-visibility-timeout" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Location</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>visibility_timeout</code></td>
<td>app.conf</td>
<td>Global visibility timeout in seconds</td>
</tr>
<tr>
<td><code>broker_transport_options['visibility_timeout']</code></td>
<td>app.conf</td>
<td>Broker-specific visibility timeout</td>
</tr>
<tr>
<td><code>result_backend_transport_options['visibility_timeout']</code></td>
<td>app.conf</td>
<td>Backend-specific visibility timeout</td>
</tr>
</tbody>
</table>
<p><strong>Example Configuration:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>app.conf.visibility_timeout = 3600  # 1 hour
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>app.conf.broker_transport_options = {
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    &quot;visibility_timeout&quot;: 3600,
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    &quot;polling_interval&quot;: 1,
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>}
</code></pre></div>
<strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_worker.py#L323-L333">t/smoke/tests/test_worker.py323-333</a></p>
<h3 id="shutdown-behavior-with-visibility-timeout-reset">Shutdown Behavior with Visibility Timeout Reset<a class="headerlink" href="#shutdown-behavior-with-visibility-timeout-reset" title="Permanent link">&para;</a></h3>
<p>During soft shutdown (<code>SIGQUIT</code> or configurable via <code>REMAP_SIGTERM</code>):</p>
<ol>
<li><strong>Shutdown Initiated:</strong> Worker receives shutdown signal</li>
<li><strong>Soft Shutdown Period:</strong> Worker waits for <code>worker_soft_shutdown_timeout</code> seconds</li>
<li><strong>Task Tracking:</strong> Worker tracks unacknowledged messages</li>
<li><strong>Visibility Reset:</strong> For unacknowledged messages, visibility timeout is reset to 0</li>
<li><strong>Logging:</strong> Worker logs: <code>"Restoring N unacknowledged message(s)"</code></li>
<li><strong>Exit:</strong> Worker exits, allowing messages to be consumed by other workers</li>
</ol>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_worker.py#L335-L354">t/smoke/tests/test_worker.py335-354</a></p>
<h3 id="test-scenarios">Test Scenarios<a class="headerlink" href="#test-scenarios" title="Permanent link">&para;</a></h3>
<p>The following scenarios demonstrate visibility timeout reset behavior:</p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Description</th>
<th>Expected Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Single Long Task</strong></td>
<td>One task running longer than shutdown timeout</td>
<td>Task interrupted, message restored, redelivered to restarted worker</td>
</tr>
<tr>
<td><strong>Group - Partial Completion</strong></td>
<td>Group with one short task (completes) and one long task (does not complete)</td>
<td>Short task ACKed, long task message restored (1 message)</td>
</tr>
<tr>
<td><strong>Group - No Completion</strong></td>
<td>Group with all long tasks that do not complete</td>
<td>All messages restored (2 messages)</td>
</tr>
</tbody>
</table>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_worker.py#L335-L407">t/smoke/tests/test_worker.py335-407</a></p>
<h3 id="example-log-output">Example Log Output<a class="headerlink" href="#example-log-output" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>worker: Soft shutdown (MainProcess)
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>Initiating Soft Shutdown, terminating in 10 seconds
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>worker: Cold shutdown (MainProcess)
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>Restoring 1 unacknowledged message(s)
</code></pre></div>
<strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_worker.py#L351-L351">t/smoke/tests/test_worker.py351</a></p>
<h2 id="connection-management-and-recovery">Connection Management and Recovery<a class="headerlink" href="#connection-management-and-recovery" title="Permanent link">&para;</a></h2>
<p>The event loops handle broker connection failures with automatic reconnection and state verification.</p>
<h3 id="heartbeat-monitoring">Heartbeat Monitoring<a class="headerlink" href="#heartbeat-monitoring" title="Permanent link">&para;</a></h3>
<p>Both event loops support AMQP heartbeat monitoring via the <code>_enable_amqheartbeats()</code> helper function in <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L28-L47">celery/worker/loops.py28-47</a></p>
<p><strong>Heartbeat Configuration:</strong></p>
<p><pre class="mermaid"><code>flowchart TD
    GetInterval["connection.get_heartbeat_interval()"]
    CheckSupport["connection.supports_heartbeats"]
    CreateCallback["Define tick(rate) callback"]
    TimerCall["timer.call_repeatedly(interval/rate, tick)"]
    Check["connection.heartbeat_check(rate)"]
    Error["Store exception in heartbeat_error[0]"]
    LoopCheck["if heartbeat_error[0] is not None:    raise heartbeat_error[0]"]

    GetInterval --&gt; CheckSupport
    CheckSupport --&gt; CreateCallback
    CreateCallback --&gt; TimerCall
    TimerCall --&gt; Check
    Check --&gt; Error
    Error --&gt; LoopCheck</code></pre>
<strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L28-L47">celery/worker/loops.py28-47</a></p>
<p><strong>Heartbeat Implementation:</strong></p>
<p>The <code>_enable_amqheartbeats()</code> function:</p>
<ol>
<li>Retrieves negotiated heartbeat interval from connection</li>
<li>Verifies broker supports heartbeats</li>
<li>Schedules <code>connection.heartbeat_check(rate)</code> via timer at <code>heartbeat/rate</code> intervals</li>
<li>Stores any exceptions in <code>heartbeat_error</code> list (passed by reference)</li>
<li>Event loop checks <code>heartbeat_error[0]</code> and raises if not None</li>
</ol>
<p><strong>asynloop usage (line 59):</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>heartbeat_error = _enable_amqheartbeats(hub.timer, connection, rate=hbrate)
</code></pre></div>
<strong>synloop usage (lines 108-109):</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>if getattr(obj.pool, &#39;is_green&#39;, False):
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>    heartbeat_error = _enable_amqheartbeats(obj.timer, connection, rate=hbrate)
</code></pre></div>
Note: <code>synloop</code> only enables heartbeats for green pools (eventlet/gevent) to avoid blocking.</p>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L28-L47">celery/worker/loops.py28-47</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L59-L59">celery/worker/loops.py59</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L108-L109">celery/worker/loops.py108-109</a></p>
<h3 id="connection-state-verification">Connection State Verification<a class="headerlink" href="#connection-state-verification" title="Permanent link">&para;</a></h3>
<p>The event loops continuously verify connection state and worker status:</p>
<p><strong>Blueprint State Check:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>while blueprint.state == RUN and obj.connection:
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>    # Process messages
</code></pre></div>
Both loops check:</p>
<ul>
<li><code>blueprint.state == RUN</code> - Worker not in shutdown mode</li>
<li><code>obj.connection</code> - Connection still exists</li>
<li><code>state.maybe_shutdown()</code> - Check for shutdown signals</li>
</ul>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L84-L84">celery/worker/loops.py84</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L132-L132">celery/worker/loops.py132</a></p>
<h3 id="pool-process-verification-asynloop-only">Pool Process Verification (asynloop only)<a class="headerlink" href="#pool-process-verification-asynloop-only" title="Permanent link">&para;</a></h3>
<p>The <code>asynloop</code> verifies that pool processes started successfully on the first run:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a># Lines 70-71
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>if not obj.restart_count and not obj.pool.did_start_ok():
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>    raise WorkerLostError(&#39;Could not start worker processes&#39;)
</code></pre></div>
This check:</p>
<ul>
<li>Only runs on first start (<code>restart_count == 0</code>)</li>
<li>Prevents infinite loop if pool processes fail to start</li>
<li>Raises <code>WorkerLostError</code> to trigger graceful shutdown</li>
</ul>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L70-L71">celery/worker/loops.py70-71</a></p>
<h3 id="broker-reconnection">Broker Reconnection<a class="headerlink" href="#broker-reconnection" title="Permanent link">&para;</a></h3>
<p>When the broker connection fails, the worker automatically reconnects with exponential backoff:</p>
<ol>
<li><strong>Detection:</strong> Event loop detects connection error during message drain</li>
<li><strong>Retry Loop:</strong> Kombu connection layer implements exponential backoff</li>
<li><strong>Logging:</strong> Worker logs <code>"Trying again in X.XX seconds... (N/100)"</code></li>
<li><strong>Reconnection:</strong> Establishes new connection when broker available</li>
<li><strong>Prefetch Adjustment:</strong> Applies prefetch count reduction if enabled (see page 5.6)</li>
<li><strong>Resume:</strong> Event loop continues processing messages</li>
</ol>
<p><strong>Retry Configuration:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>broker_connection_retry</code></td>
<td>True</td>
<td>Enable automatic reconnection</td>
</tr>
<tr>
<td><code>broker_connection_max_retries</code></td>
<td>100</td>
<td>Maximum retry attempts</td>
</tr>
<tr>
<td><code>broker_connection_retry_on_startup</code></td>
<td>True</td>
<td>Retry connection during startup</td>
</tr>
</tbody>
</table>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L84-L98">celery/worker/loops.py84-98</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L132-L136">celery/worker/loops.py132-136</a></p>
<h2 id="hub-and-event-loop-integration">Hub and Event Loop Integration<a class="headerlink" href="#hub-and-event-loop-integration" title="Permanent link">&para;</a></h2>
<p>The Hub (from kombu.asynchronous) provides the I/O multiplexing layer that drives the <code>asynloop</code>. It manages file descriptors, timers, and the event polling mechanism.</p>
<h3 id="hub-registration">Hub Registration<a class="headerlink" href="#hub-registration" title="Permanent link">&para;</a></h3>
<p>Components register with the Hub during <code>asynloop</code> initialization:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a># Lines 62-63
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>obj.controller.register_with_event_loop(hub)
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>obj.register_with_event_loop(hub)
</code></pre></div>
Registration allows components to:</p>
<ul>
<li>Register file descriptors for I/O polling</li>
<li>Schedule callbacks on the event loop</li>
<li>Integrate with the Hub's poller</li>
</ul>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L62-L63">celery/worker/loops.py62-63</a></p>
<h3 id="hub-loop-mechanism">Hub Loop Mechanism<a class="headerlink" href="#hub-loop-mechanism" title="Permanent link">&para;</a></h3>
<p>The Hub creates an iterator that yields on each I/O event:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a># Lines 82-98
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>hub.propagate_errors = errors
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>loop = hub.create_loop()
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>while blueprint.state == RUN and obj.connection:
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>    # ... state and QoS checks ...
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>    try:
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>        next(loop)
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>    except StopIteration:
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>        loop = hub.create_loop()
</code></pre></div>
The <code>hub.create_loop()</code> method:</p>
<ul>
<li>Returns an iterator that polls registered file descriptors</li>
<li>Yields control after each I/O event</li>
<li>Raises <code>StopIteration</code> when poller needs reset</li>
<li>Gets recreated after <code>StopIteration</code></li>
</ul>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L82-L98">celery/worker/loops.py82-98</a></p>
<h3 id="quick-drain-for-amqp">Quick Drain for AMQP<a class="headerlink" href="#quick-drain-for-amqp" title="Permanent link">&para;</a></h3>
<p>For AMQP transports, <code>asynloop</code> performs a quick drain after consuming to clear any prefetched messages:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a># Lines 76-77
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>if connection.transport.driver_type == &#39;amqp&#39;:
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>    hub.call_soon(_quick_drain, connection)
</code></pre></div>
The <code>_quick_drain()</code> helper (lines 19-25):</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>def _quick_drain(connection, timeout=0.1):
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>    try:
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>        connection.drain_events(timeout=timeout)
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>    except Exception as exc:
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>        exc_errno = getattr(exc, &#39;errno&#39;, None)
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>        if exc_errno is not None and exc_errno != errno.EAGAIN:
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>            raise
</code></pre></div>
This ensures the consumer starts in a clean state without buffered messages.</p>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L76-L77">celery/worker/loops.py76-77</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L19-L25">celery/worker/loops.py19-25</a></p>
<h2 id="autoscaling-integration">Autoscaling Integration<a class="headerlink" href="#autoscaling-integration" title="Permanent link">&para;</a></h2>
<p>The Consumer integrates with the Autoscaler component (see page 5.6) to dynamically adjust prefetch count when worker concurrency changes.</p>
<h3 id="autoscaler-registration">Autoscaler Registration<a class="headerlink" href="#autoscaler-registration" title="Permanent link">&para;</a></h3>
<p>The <code>WorkerComponent</code> bootstep in <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py#L31-L58">celery/worker/autoscale.py31-58</a> registers the autoscaler with the event loop:</p>
<p><strong>WorkerComponent.register_with_event_loop() Implementation:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a># celery/worker/autoscale.py:50-54
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>def register_with_event_loop(self, w, hub):
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>    w.consumer.on_task_message.add(w.autoscaler.maybe_scale)
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>    hub.call_repeatedly(
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>        w.autoscaler.keepalive, w.autoscaler.maybe_scale,
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>    )
</code></pre></div>
This method:</p>
<ul>
<li>Adds <code>w.autoscaler.maybe_scale</code> to the <code>consumer.on_task_message</code> signal, triggering scaling checks on each task message</li>
<li>Schedules periodic <code>maybe_scale()</code> calls via <code>hub.call_repeatedly()</code> with <code>keepalive</code> interval (default 30 seconds from <code>AUTOSCALE_KEEPALIVE</code> at line 28)</li>
</ul>
<p><strong>Scaling Logic:</strong> The <code>Autoscaler.maybe_scale()</code> method at <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py#L94-L96">celery/worker/autoscale.py94-96</a> checks if scaling is needed and calls <code>pool.maintain_pool()</code> if adjustments were made.</p>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py#L28-L28">celery/worker/autoscale.py28</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py#L31-L58">celery/worker/autoscale.py31-58</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py#L50-L54">celery/worker/autoscale.py50-54</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py#L94-L96">celery/worker/autoscale.py94-96</a></p>
<h3 id="prefetch-count-updates">Prefetch Count Updates<a class="headerlink" href="#prefetch-count-updates" title="Permanent link">&para;</a></h3>
<p>When the <code>Autoscaler</code> changes max concurrency via the <code>update()</code> method at <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py#L98-L109">celery/worker/autoscale.py98-109</a> it updates the consumer's prefetch count:</p>
<p><strong>Autoscaler._update_consumer_prefetch_count() Implementation:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a># celery/worker/autoscale.py:133-138
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>def _update_consumer_prefetch_count(self, new_max):
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    diff = new_max - self.max_concurrency
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    if diff:
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>        self.worker.consumer._update_prefetch_count(diff)
</code></pre></div>
This method:</p>
<ul>
<li>Calculates the difference between new and old max concurrency</li>
<li>Calls <code>consumer._update_prefetch_count(diff)</code> to adjust prefetch incrementally</li>
<li>Maintains the relationship: <code>prefetch_count = max_concurrency × prefetch_multiplier</code></li>
</ul>
<p>The update is called from <code>Autoscaler.update()</code> at line 103 when <code>max</code> parameter is provided.</p>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py#L98-L109">celery/worker/autoscale.py98-109</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py#L133-L138">celery/worker/autoscale.py133-138</a></p>
<h2 id="configuration-reference">Configuration Reference<a class="headerlink" href="#configuration-reference" title="Permanent link">&para;</a></h2>
<h3 id="consumer-and-event-loop-settings">Consumer and Event Loop Settings<a class="headerlink" href="#consumer-and-event-loop-settings" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>worker_prefetch_multiplier</code></td>
<td>int</td>
<td>4</td>
<td>Multiplier for calculating prefetch count from concurrency</td>
</tr>
<tr>
<td><code>worker_concurrency</code></td>
<td>int</td>
<td>CPU count</td>
<td>Number of worker processes/threads</td>
</tr>
<tr>
<td><code>worker_pool</code></td>
<td>str</td>
<td>'prefork'</td>
<td>Pool implementation (prefork, eventlet, gevent, solo, threads)</td>
</tr>
<tr>
<td><code>broker_connection_retry</code></td>
<td>bool</td>
<td>True</td>
<td>Enable automatic broker reconnection</td>
</tr>
<tr>
<td><code>broker_connection_max_retries</code></td>
<td>int</td>
<td>100</td>
<td>Maximum reconnection attempts</td>
</tr>
<tr>
<td><code>broker_heartbeat</code></td>
<td>int</td>
<td>120</td>
<td>AMQP heartbeat interval (seconds, 0 to disable)</td>
</tr>
<tr>
<td><code>task_acks_late</code></td>
<td>bool</td>
<td>False</td>
<td>Acknowledge messages after task execution</td>
</tr>
<tr>
<td><code>worker_disable_rate_limits</code></td>
<td>bool</td>
<td>False</td>
<td>Disable rate limiting for tasks</td>
</tr>
</tbody>
</table>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py#L224-L242">celery/worker/components.py224-242</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L28-L47">celery/worker/loops.py28-47</a></p>
<h3 id="transport-specific-settings">Transport-Specific Settings<a class="headerlink" href="#transport-specific-settings" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Transport</th>
<th>Event Loop</th>
<th>Heartbeat Support</th>
<th>Configuration Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AMQP (RabbitMQ)</strong></td>
<td>asynloop</td>
<td>Yes</td>
<td>Native async support, uses Hub</td>
</tr>
<tr>
<td><strong>Redis</strong></td>
<td>asynloop/synloop</td>
<td>No (uses polling)</td>
<td>Async Redis uses asynloop</td>
</tr>
<tr>
<td><strong>SQS</strong></td>
<td>synloop</td>
<td>No</td>
<td>Polling-based, blocking loop</td>
</tr>
<tr>
<td><strong>Kafka</strong></td>
<td>synloop</td>
<td>No</td>
<td>Requires blocking drain</td>
</tr>
</tbody>
</table>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L50-L50">celery/worker/loops.py50</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L101-L101">celery/worker/loops.py101</a></p>
<h3 id="event-loop-selection_1">Event Loop Selection<a class="headerlink" href="#event-loop-selection_1" title="Permanent link">&para;</a></h3>
<p>The event loop is selected based on:</p>
<ol>
<li><strong>Transport driver type</strong> - AMQP transports use asynloop</li>
<li><strong>Pool type</strong> - Green pools (eventlet/gevent) may use synloop with heartbeats</li>
<li><strong>Worker configuration</strong> - Can be influenced by pool selection</li>
</ol>
<p>To explicitly select event loop characteristics:</p>
<ul>
<li>Use <code>-P prefork</code> with AMQP for asynloop</li>
<li>Use <code>-P solo</code> or <code>-P threads</code> with non-AMQP for synloop</li>
<li>Green pools (eventlet/gevent) use synloop but with green heartbeats</li>
</ul>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L1-L11">celery/worker/loops.py1-11</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/loops.py#L108-L109">celery/worker/loops.py108-109</a></p>
<h2 id="testing-consumer-behavior">Testing Consumer Behavior<a class="headerlink" href="#testing-consumer-behavior" title="Permanent link">&para;</a></h2>
<p>The Celery test suite includes comprehensive smoke tests for consumer behavior:</p>
<h3 id="test-coverage">Test Coverage<a class="headerlink" href="#test-coverage" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Test Category</th>
<th>File</th>
<th>Key Tests</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Prefetch Count Reduction</strong></td>
<td><a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py">t/smoke/tests/test_consumer.py</a></td>
<td><code>test_reducing_prefetch_count</code>, <code>test_prefetch_count_restored</code></td>
</tr>
<tr>
<td><strong>Visibility Timeout</strong></td>
<td><a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_worker.py#L318-L407">t/smoke/tests/test_worker.py318-407</a></td>
<td><code>test_soft_shutdown_reset_visibility_timeout</code></td>
</tr>
<tr>
<td><strong>Broker Recovery</strong></td>
<td><a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py#L121-L147">t/smoke/tests/test_consumer.py121-147</a></td>
<td><code>test_worker_consume_tasks_after_redis_broker_restart</code></td>
</tr>
<tr>
<td><strong>Task Cancellation</strong></td>
<td><a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py#L77-L94">t/smoke/tests/test_consumer.py77-94</a></td>
<td><code>test_max_prefetch_passed_on_broker_restart</code></td>
</tr>
</tbody>
</table>
<p><strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py">t/smoke/tests/test_consumer.py</a> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_worker.py">t/smoke/tests/test_worker.py</a></p>
<h3 id="example-test-configurations">Example Test Configurations<a class="headerlink" href="#example-test-configurations" title="Permanent link">&para;</a></h3>
<p>The smoke tests use specific worker configurations to verify consumer behavior:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a># Prefetch count reduction test configuration
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>app.conf.worker_prefetch_multiplier = 2
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>app.conf.worker_concurrency = 5
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>app.conf.worker_enable_prefetch_count_reduction = True
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>app.conf.visibility_timeout = 3600
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>app.conf.broker_transport_options = {
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>    &quot;visibility_timeout&quot;: 3600,
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>    &quot;polling_interval&quot;: 1,
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>}
</code></pre></div>
<strong>Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py#L14-L29">t/smoke/tests/test_consumer.py14-29</a></p>
<hr />
<p><strong>Page Sources:</strong> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/components.py">celery/worker/components.py</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/worker/autoscale.py">celery/worker/autoscale.py</a> <a href="https://github.com/celery/celery/blob/4d068b56/celery/bootsteps.py">celery/bootsteps.py</a> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_consumer.py">t/smoke/tests/test_consumer.py</a> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/tests/test_worker.py">t/smoke/tests/test_worker.py</a> <a href="https://github.com/celery/celery/blob/4d068b56/t/smoke/conftest.py">t/smoke/conftest.py</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>