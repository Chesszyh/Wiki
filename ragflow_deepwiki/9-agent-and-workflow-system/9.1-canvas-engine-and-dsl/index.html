
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://wiki.neurosama.uk/ragflow_deepwiki/9-agent-and-workflow-system/9.1-canvas-engine-and-dsl/">
      
      
        <link rel="prev" href="../../8-backend-api-system/">
      
      
        <link rel="next" href="../9.2-component-system-architecture/">
      
      
        
          <link rel="alternate" href="./" hreflang="en">
        
          <link rel="alternate" href="../../../zh/ragflow_deepwiki/9-agent-and-workflow-system/9.1-canvas-engine-and-dsl/" hreflang="zh">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Canvas Engine and DSL - DeepWiki</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#canvas-engine-and-dsl" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="DeepWiki" class="md-header__button md-logo" aria-label="DeepWiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DeepWiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Canvas Engine and DSL
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/ragflow_deepwiki/9-agent-and-workflow-system/9.1-canvas-engine-and-dsl/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Chesszyh/Wiki" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Welcome to DeepWiki

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../celery_deepwiki/1-celery-overview/1.1-installation-and-setup/" class="md-tabs__link">
          
  
  
  Celery deepwiki

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../lc0_deepwiki/1-lc0-overview/" class="md-tabs__link">
          
  
  
  Lc0 deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../linux_deepwiki/1-linux-kernel-overview/" class="md-tabs__link">
          
  
  
  Linux deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../1-overview/" class="md-tabs__link">
          
  
  
  Ragflow deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../redis_deepwiki/1-redis-overview/" class="md-tabs__link">
          
  
  
  Redis deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../stockfish_deepwiki/2-core-data-structures-and-types/" class="md-tabs__link">
          
  
  
  Stockfish deepwiki

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DeepWiki" class="md-nav__button md-logo" aria-label="DeepWiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DeepWiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Chesszyh/Wiki" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome to DeepWiki
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Celery deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Celery deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    1 celery overview
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    1 celery overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/1.1-installation-and-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation and Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/1.2-core-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Celery Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 the celery application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 the celery application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.1-application-initialization-and-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Initialization and Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.2-task-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Registration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.3-message-brokers-and-routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Message Brokers and Routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.4-amqp-layer-and-message-protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AMQP Layer and Message Protocol
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Celery Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 tasks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 tasks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.1-task-definition-and-invocation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Definition and Invocation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.2-task-lifecycle-and-states/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Lifecycle and States
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.3-error-handling-and-retry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Retry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.4-time-limits-and-rate-limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Time Limits and Rate Limits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.5-task-options-and-customization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Options and Customization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 canvas workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 canvas workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.1-signatures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Signature and Composition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.2-workflow-primitives/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow Primitives
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.3-advanced-canvas-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced Canvas Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.4-chord-execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chord Execution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas Workflows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 workers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 workers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.1-worker-architecture-and-bootsteps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Architecture and Bootsteps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.2-worker-lifecycle-and-shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Lifecycle and Shutdown
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.3-concurrency-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Concurrency Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.4-worker-configuration-and-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Configuration and Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.5-consumer-and-event-loops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Consumer and Event Loops
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.6-autoscaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Autoscaling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 result backends
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 result backends
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.1-backend-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backend Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.2-backend-implementations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backend Implementations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.3-result-storage-and-retrieval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Result Serialization and Retrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.4-chord-coordination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chord Coordination
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.5-backend-resilience/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Resilience
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Result Backends
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_13" >
        
          
          <label class="md-nav__link" for="__nav_2_13" id="__nav_2_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 periodic tasks (beat)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 periodic tasks (beat)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.1-beat-scheduler-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Beat Scheduler Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.2-schedule-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schedule Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.3-time-and-timezone-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Time and Timezone Handling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.4-persistent-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persistent Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Periodic Tasks (Beat)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_15" >
        
          
          <label class="md-nav__link" for="__nav_2_15" id="__nav_2_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 monitoring and control
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 monitoring and control
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.1-remote-control-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Remote Control Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.2-worker-inspection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Inspection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.3-event-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Monitoring and Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_17" >
        
          
          <label class="md-nav__link" for="__nav_2_17" id="__nav_2_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 command line interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 command line interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.1-cli-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.2-worker-and-beat-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker and Beat Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.3-management-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Management Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.4-multi-worker-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-worker Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Line Interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_19" >
        
          
          <label class="md-nav__link" for="__nav_2_19" id="__nav_2_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 development and testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_19">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 development and testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.1-testing-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.2-test-matrix-and-environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Matrix and Environments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.3-integration-and-smoke-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integration and Smoke Tests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.4-code-quality-and-documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Quality and Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development and Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_21" >
        
          
          <label class="md-nav__link" for="__nav_2_21" id="__nav_2_21_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    11 packaging and distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_21">
            <span class="md-nav__icon md-icon"></span>
            
  
    11 packaging and distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.1-package-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.2-dependencies-and-extras/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependencies and Extras
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.3-version-management-and-release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version Management and Release
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Packaging and Distribution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Lc0 deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Lc0 deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/1-lc0-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lc0 Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 building and installation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 building and installation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.1-build-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.2-linux-and-macos-build-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux and macOS Build Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.3-windows-build-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows Build Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.4-version-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building and Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 core engine architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 core engine architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/3.1-uci-protocol-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI Protocol Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/3.2-configuration-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Engine Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 chess representation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 chess representation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.1-bitboards-and-move-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bitboards
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.2-position-encoding-and-history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Position Encoding and History
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.3-syzygy-tablebase-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Syzygy Tablebase Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.4-pgn-and-game-import/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PGN and Game Import
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chess Representation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 search algorithm
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 search algorithm
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.1-mcts-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCTS Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.2-search-parameters-and-stopping-conditions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Parameters and Stopping Conditions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.3-search-tree-caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Caching System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Algorithm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 neural network system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 neural network system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.1-network-interface-and-backend-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Network Interface and Backend Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.2-weights-loading-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Weights Loading and Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.3-cuda-and-cudnn-backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CUDA and cuDNN Backend
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.4-onnx-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ONNX Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.5-xla-and-hlo-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XLA and HLO Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.6-memory-caching-and-performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Caching and Performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Neural Network System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 self play system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 self play system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/7-self-play-system/7.1-tournament-organization-and-game-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tournament Organization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/7-self-play-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Self-Play System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_14" >
        
          
          <label class="md-nav__link" for="__nav_3_14" id="__nav_3_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 utilities and infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 utilities and infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.1-fast-mathematical-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fast Mathematical Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.2-threading-and-synchronization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Threading and Synchronization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.3-benchmarking-and-performance-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Benchmarking and Performance Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities and Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_16" >
        
          
          <label class="md-nav__link" for="__nav_3_16" id="__nav_3_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 continuous integration and deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 continuous integration and deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/9.1-circleci-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CircleCI Workflows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/9.2-windows-build-and-packaging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows Build and Packaging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Continuous Integration and Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Linux deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linux deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/1-linux-kernel-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux Kernel Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 rust for linux
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 rust for linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/2-rust-for-linux/2.1-rust-kernel-apis-and-abstractions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust Kernel APIs and Abstractions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/2-rust-for-linux/2.2-nova-drm-graphics-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nova DRM Graphics Driver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/2-rust-for-linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust for Linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 virtualization (kvm)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 virtualization (kvm)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/3-virtualization-%28kvm%29/3.1-kvm-x86-virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM x86 Virtualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/3-virtualization-%28kvm%29/3.2-kvm-arm64-virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM ARM64 Virtualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/3-virtualization-%28kvm%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Virtualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 core kernel infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 core kernel infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/4.1-process-scheduling-and-sched_ext/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Process Scheduling and sched_ext
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/4.2-tracing-and-observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tracing and Observability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/4.3-build-system-and-kbuild/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System and Kbuild
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Kernel Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 storage and io
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 storage and io
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/5.1-io_uring-asynchronous-io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    io_uring Asynchronous I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/5.2-btrfs-copy-on-write-filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Btrfs Copy-on-Write Filesystem
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/5.3-ufs-storage-controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UFS Storage Controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Storage and I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 graphics and display
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 graphics and display
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/6-graphics-and-display/6.1-amdgpu-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AMDGPU Driver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/6-graphics-and-display/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Graphics and Display
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Ragflow deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Ragflow deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    2 getting started and deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 getting started and deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-getting-started-and-deployment/2.1-docker-compose-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Compose Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-getting-started-and-deployment/2.4-build-system-and-cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System and CI/CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-getting-started-and-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started and Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    3 system architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 system architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-system-architecture/3.1-core-application-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Application Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-system-architecture/3.2-data-storage-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Storage Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-system-architecture/3.3-task-execution-and-queue-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Execution and Queue System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    4 frontend application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 frontend application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-frontend-application/4.1-internationalization-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Internationalization System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-frontend-application/4.2-application-structure-and-ui-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Structure and Routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-frontend-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Frontend Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    5 llm integration system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 llm integration system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/5.1-model-factory-pattern-and-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Factory Pattern and Registration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/5.2-provider-implementations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Provider Implementations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/5.3-error-handling-and-retry-logic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Retry Logic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/5.4-tenant-configuration-and-usage-tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tenant Configuration and Usage Tracking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/5.5-tool-calling-and-function-use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tool Calling and Function Use
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM Integration System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    6 document processing pipeline
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 document processing pipeline
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.1-document-parsing-strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document Parsing Strategies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.2-chunking-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chunking Methods
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.3-content-enhancement-and-embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Content Enhancement and Embedding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.4-layout-recognition-and-ocr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layout Recognition and OCR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.5-knowledge-graph-construction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Knowledge Graph Construction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.6-raptor-hierarchical-summarization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAPTOR Hierarchical Summarization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document Processing Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_12" >
        
          
          <label class="md-nav__link" for="__nav_5_12" id="__nav_5_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    7 data source integration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 data source integration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-data-source-integration/7.1-connector-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connector Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-data-source-integration/7.2-synchronization-and-scheduling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Synchronization and Scheduling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-data-source-integration/7.3-supported-data-sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supported Data Sources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-data-source-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Source Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_14" >
        
          
          <label class="md-nav__link" for="__nav_5_14" id="__nav_5_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    8 backend api system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 backend api system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-backend-api-system/8.1-api-architecture-and-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Architecture and SDK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-backend-api-system/8.2-authentication-and-authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication and Multi-tenancy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-backend-api-system/8.3-dataset-and-knowledge-base-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset and Knowledge Base APIs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-backend-api-system/8.4-document-and-file-management-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document and File Management APIs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-backend-api-system/8.5-chat-and-conversation-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chat and Conversation APIs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-backend-api-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backend API System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_16" checked>
        
          
          <label class="md-nav__link" for="__nav_5_16" id="__nav_5_16_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    9 agent and workflow system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_16_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 agent and workflow system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Canvas Engine and DSL
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas Engine and DSL
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dsl-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        DSL Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DSL Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complete-dsl-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete DSL Schema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Complete DSL Schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dsl-structure-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        DSL Structure Diagram
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#components-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Components Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Fields
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#history-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        History Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieval-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Retrieval Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Memory Field
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#globals-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Globals Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variables-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variables Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graph-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Graph Field
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-and-canvas-classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Graph and Canvas Classes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Graph and Canvas Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Class Hierarchy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graph-class" class="md-nav__link">
    <span class="md-ellipsis">
      
        Graph Class
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canvas-class" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canvas Class
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-loading-and-instantiation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Component Loading and Instantiation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component Loading and Instantiation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#component-loading-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Component Loading Process
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-reference-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Reference Syntax
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Variable Reference Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variable-expression-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Expression Format
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-resolution-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Resolution Process
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-resolution-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Resolution Implementation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-substitution-in-strings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Substitution in Strings
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-graph-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Component Graph Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component Graph Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#execution-flow-definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Execution Flow Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-flow-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Control Flow Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control Flow Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#switchcategorize" class="md-nav__link">
    <span class="md-ellipsis">
      
        Switch/Categorize
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loopiteration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loop/Iteration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Nested Components
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dsl-serialization" class="md-nav__link">
    <span class="md-ellipsis">
      
        DSL Serialization
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DSL Serialization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#converting-graph-to-dsl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Converting Graph to DSL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canvas-specific-serialization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canvas-Specific Serialization
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-identification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task Identification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cancellation-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cancellation Mechanism
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-reset" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Reset
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration with Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integration with Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#component-interface" class="md-nav__link">
    <span class="md-ellipsis">
      
        Component Interface
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#input-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Input Resolution
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-workflow-dsl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Workflow DSL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example Workflow DSL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-rag-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Simple RAG Workflow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-workflow-with-categorize" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Workflow with Categorize
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#canvas-completion-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canvas Completion Endpoint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saving-canvas-dsl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Saving Canvas DSL
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9.2-component-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Component System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9.3-built-in-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Built-in Components
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9.4-workflow-execution-and-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow Execution and Streaming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9.5-state-and-variable-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    State and Variable Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9.6-agent-tools-and-react-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Tools and ReAct Loop
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9.7-canvas-api-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas API and Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent and Workflow System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_18" >
        
          
          <label class="md-nav__link" for="__nav_5_18" id="__nav_5_18_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    10 retrieval and rag system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_18">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 retrieval and rag system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-retrieval-and-rag-system/10.1-query-processing-and-refinement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query Processing and Refinement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-retrieval-and-rag-system/10.2-hybrid-search-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hybrid Search Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-retrieval-and-rag-system/10.3-reranking-and-metadata-filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reranking and Metadata Filtering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-retrieval-and-rag-system/10.4-response-generation-and-citations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Response Generation and Citations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-retrieval-and-rag-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieval and RAG System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Redis deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Redis deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/1-redis-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 redis core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 redis core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.1-server-architecture-and-lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Server Architecture and Lifecycle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.2-client-connection-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client Connection Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.3-command-processing-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Processing Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.4-configuration-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 data storage and management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 data storage and management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.1-core-data-types-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Data Types Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.2-streams-and-blocking-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Streams and Blocking Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.3-hyperloglog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HyperLogLog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.4-memory-efficient-data-structures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory-Efficient Data Structures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.5-dictionary-and-key-value-store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dictionary and Key-Value Store
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.6-dynamic-string-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dynamic String Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Storage and Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 memory management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 memory management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/4.1-eviction-and-expiration-policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Eviction and Expiration Policies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/4.2-memory-allocators-and-build-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Allocators and Build System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8" >
        
          
          <label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 scripting and extensions
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 scripting and extensions
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/5.1-lua-scripting-and-redis-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lua Scripting and Redis Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/5.2-redis-module-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Module API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scripting and Extensions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_10" >
        
          
          <label class="md-nav__link" for="__nav_6_10" id="__nav_6_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 high availability and distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 high availability and distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/6.1-redis-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Cluster
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/6.2-redis-sentinel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Sentinel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    High Availability and Scaling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/7-persistence-and-replication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persistence and Replication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_13" >
        
          
          <label class="md-nav__link" for="__nav_6_13" id="__nav_6_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/8.1-access-control-lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Access Control Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/8.2-network-security-and-tls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Network Security and TLS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_15" >
        
          
          <label class="md-nav__link" for="__nav_6_15" id="__nav_6_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 client tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 client tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/9-client-tools/9.1-redis-cli-and-benchmark-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis CLI and Benchmark Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/9-client-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_17" >
        
          
          <label class="md-nav__link" for="__nav_6_17" id="__nav_6_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 development and testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 development and testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.1-build-system-and-dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System and Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.2-testing-framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Framework
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.3-continuous-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Continuous Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development and Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Stockfish deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Stockfish deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/2-core-data-structures-and-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Data Structures and Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 board representation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 board representation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.1-position-and-state-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Position and State Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.2-bitboards-and-low-level-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bitboards and Low-level Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.3-move-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Move Generation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Board Representation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 search system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 search system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.1-search-algorithm-and-iterative-deepening/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Algorithm and Iterative Deepening
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.2-thread-management-and-parallel-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thread Management and Parallel Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.3-move-ordering-and-move-picker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Move Ordering and Move Picker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
        
          
          <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 evaluation system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 evaluation system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/5-evaluation-system/5.1-nnue-neural-network-evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NNUE Neural Network Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/5-evaluation-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_8" >
        
          
          <label class="md-nav__link" for="__nav_7_8" id="__nav_7_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 external interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 external interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/6.1-uci-protocol-handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI Protocol Handler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/6.2-uci-options-and-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI Options and Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    External Interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_10" >
        
          
          <label class="md-nav__link" for="__nav_7_10" id="__nav_7_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 infrastructure and support
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 infrastructure and support
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.1-build-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.2-utilities-and-support-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities and Support Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.3-testing-and-benchmarking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing and Benchmarking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Infrastructure and Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dsl-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        DSL Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DSL Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complete-dsl-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete DSL Schema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Complete DSL Schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dsl-structure-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        DSL Structure Diagram
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#components-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Components Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Fields
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#history-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        History Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieval-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Retrieval Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Memory Field
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#globals-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Globals Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variables-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variables Field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graph-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Graph Field
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-and-canvas-classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Graph and Canvas Classes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Graph and Canvas Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Class Hierarchy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graph-class" class="md-nav__link">
    <span class="md-ellipsis">
      
        Graph Class
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canvas-class" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canvas Class
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-loading-and-instantiation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Component Loading and Instantiation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component Loading and Instantiation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#component-loading-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Component Loading Process
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-reference-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Reference Syntax
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Variable Reference Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variable-expression-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Expression Format
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-resolution-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Resolution Process
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-resolution-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Resolution Implementation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-substitution-in-strings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Substitution in Strings
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-graph-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Component Graph Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component Graph Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#execution-flow-definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Execution Flow Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-flow-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Control Flow Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control Flow Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#switchcategorize" class="md-nav__link">
    <span class="md-ellipsis">
      
        Switch/Categorize
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loopiteration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loop/Iteration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Nested Components
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dsl-serialization" class="md-nav__link">
    <span class="md-ellipsis">
      
        DSL Serialization
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DSL Serialization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#converting-graph-to-dsl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Converting Graph to DSL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canvas-specific-serialization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canvas-Specific Serialization
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-identification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task Identification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cancellation-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cancellation Mechanism
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-reset" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Reset
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration with Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integration with Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#component-interface" class="md-nav__link">
    <span class="md-ellipsis">
      
        Component Interface
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#input-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Input Resolution
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-workflow-dsl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Workflow DSL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example Workflow DSL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-rag-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Simple RAG Workflow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-workflow-with-categorize" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Workflow with Categorize
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#canvas-completion-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canvas Completion Endpoint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saving-canvas-dsl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Saving Canvas DSL
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="canvas-engine-and-dsl">Canvas Engine and DSL<a class="headerlink" href="#canvas-engine-and-dsl" title="Permanent link">&para;</a></h1>
<p>Relevant source files</p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py">agent/canvas.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/component/agent_with_tools.py">agent/component/agent_with_tools.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/component/base.py">agent/component/base.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/component/categorize.py">agent/component/categorize.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/component/llm.py">agent/component/llm.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/tools/base.py">agent/tools/base.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/api_app.py">api/apps/api_app.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/canvas_app.py">api/apps/canvas_app.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/rag/prompts/generator.py">rag/prompts/generator.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/web/src/components/knowledge-base-item.tsx">web/src/components/knowledge-base-item.tsx</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/web/src/interfaces/request/flow.ts">web/src/interfaces/request/flow.ts</a></li>
</ul>
<p>This document describes the Canvas workflow engine and its JSON-based Domain-Specific Language (DSL). The Canvas engine orchestrates multi-step AI agent workflows by executing components defined in a directed graph structure.</p>
<p>For component implementation details, see <a href="/infiniflow/ragflow/9.2-component-system-architecture">Component System Architecture</a>. For built-in components, see <a href="/infiniflow/ragflow/9.3-built-in-components">Built-in Components</a>. For execution details and streaming, see <a href="/infiniflow/ragflow/9.4-workflow-execution-and-streaming">Workflow Execution and Streaming</a>. For variable management, see <a href="/infiniflow/ragflow/9.5-state-and-variable-management">State and Variable Management</a>. For Canvas APIs, see <a href="/infiniflow/ragflow/9.6-agent-tools-and-react-loop">Canvas API and Management</a>. For the frontend workflow editor, see <a href="/infiniflow/ragflow/9.7-canvas-api-and-management">Agent Canvas UI</a>.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The Canvas engine enables users to build complex AI workflows by connecting components in a graph structure. Each workflow is defined as a JSON DSL document that specifies:</p>
<ul>
<li>Components and their configurations</li>
<li>Execution flow between components</li>
<li>Global variables and state</li>
<li>Conversation history and retrieval results</li>
</ul>
<p>The engine supports two modes:</p>
<ol>
<li><strong>Agent Mode</strong> (<code>Canvas</code> class): Interactive conversational workflows with history tracking</li>
<li><strong>DataFlow Mode</strong> (<code>Graph</code> class base): Document processing pipelines</li>
</ol>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L1-L814">agent/canvas.py1-814</a></p>
<h2 id="dsl-structure">DSL Structure<a class="headerlink" href="#dsl-structure" title="Permanent link">&para;</a></h2>
<h3 id="complete-dsl-schema">Complete DSL Schema<a class="headerlink" href="#complete-dsl-schema" title="Permanent link">&para;</a></h3>
<p>The DSL is a JSON object with the following top-level structure:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>{
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  &quot;components&quot;: {},
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>  &quot;history&quot;: [],
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  &quot;path&quot;: [],
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>  &quot;retrieval&quot;: {},
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  &quot;memory&quot;: [],
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>  &quot;globals&quot;: {},
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>  &quot;variables&quot;: {},
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>  &quot;graph&quot;: {}
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>}
</code></pre></div>
<h4 id="dsl-structure-diagram">DSL Structure Diagram<a class="headerlink" href="#dsl-structure-diagram" title="Permanent link">&para;</a></h4>
<p><pre class="mermaid"><code>flowchart TD
    OBJ["obj{component_name, params}"]
    DOWNSTREAM["downstream[component_ids]"]
    UPSTREAM["upstream[component_ids]"]
    PARENT["parent_idstring"]
    COMPONENTS["components{component_id: {...}}"]
    HISTORY["history[(role, content), ...]"]
    PATH["path[component_id, ...]"]
    RETRIEVAL["retrieval[{chunks, doc_aggs}, ...]"]
    MEMORY["memory[(user, assist, summ), ...]"]
    GLOBALS["globals{sys., env.}"]
    VARIABLES["variables{name: {type, value}, ...}"]
    GRAPH["graph{nodes, edges}"]

    COMPONENTS --&gt; ComponentStructure</code></pre>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L42-L78">agent/canvas.py42-78</a></p>
<h3 id="components-field">Components Field<a class="headerlink" href="#components-field" title="Permanent link">&para;</a></h3>
<p>The <code>components</code> field is a dictionary mapping component IDs to component definitions:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>{
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>  &quot;components&quot;: {
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    &quot;begin&quot;: {
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>      &quot;obj&quot;: {
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>        &quot;component_name&quot;: &quot;Begin&quot;,
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        &quot;params&quot;: {
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>          &quot;prologue&quot;: &quot;How can I help you?&quot;,
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>          &quot;mode&quot;: &quot;Dialog&quot;,
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>          &quot;inputs&quot;: {}
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>        }
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>      },
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>      &quot;downstream&quot;: [&quot;retrieval_0&quot;],
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>      &quot;upstream&quot;: []
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    },
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    &quot;retrieval_0&quot;: {
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>      &quot;obj&quot;: {
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>        &quot;component_name&quot;: &quot;Retrieval&quot;,
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>        &quot;params&quot;: {
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>          &quot;kb_ids&quot;: [&quot;kb123&quot;],
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>          &quot;similarity_threshold&quot;: 0.2,
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>          &quot;top_n&quot;: 6
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>        }
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>      },
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>      &quot;downstream&quot;: [&quot;generate_0&quot;],
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>      &quot;upstream&quot;: [&quot;begin&quot;]
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>    },
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>    &quot;generate_0&quot;: {
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>      &quot;obj&quot;: {
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>        &quot;component_name&quot;: &quot;Generate&quot;,
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>        &quot;params&quot;: {
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>          &quot;llm_id&quot;: &quot;model123&quot;,
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>          &quot;temperature&quot;: 0.1,
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>          &quot;cite&quot;: true
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>        }
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>      },
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>      &quot;downstream&quot;: [&quot;answer_0&quot;],
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>      &quot;upstream&quot;: [&quot;retrieval_0&quot;]
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>    }
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>  }
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a>}
</code></pre></div>
<strong>Field Descriptions:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>obj.component_name</code></td>
<td>string</td>
<td>Component type identifier (e.g., "Begin", "Retrieval", "Generate")</td>
</tr>
<tr>
<td><code>obj.params</code></td>
<td>object</td>
<td>Component-specific configuration parameters</td>
</tr>
<tr>
<td><code>downstream</code></td>
<td>string[]</td>
<td>List of component IDs to execute after this component</td>
</tr>
<tr>
<td><code>upstream</code></td>
<td>string[]</td>
<td>List of component IDs that execute before this component</td>
</tr>
<tr>
<td><code>parent_id</code></td>
<td>string (optional)</td>
<td>Parent component ID for nested components (Loop/Iteration items)</td>
</tr>
</tbody>
</table>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L42-L68">agent/canvas.py42-68</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L91-L105">agent/canvas.py91-105</a></p>
<h3 id="state-fields">State Fields<a class="headerlink" href="#state-fields" title="Permanent link">&para;</a></h3>
<h4 id="history-field">History Field<a class="headerlink" href="#history-field" title="Permanent link">&para;</a></h4>
<p>Stores conversation turns as a list of tuples:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>{
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>  &quot;history&quot;: [
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    [&quot;user&quot;, &quot;What is RAGFlow?&quot;],
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    [&quot;assistant&quot;, {&quot;content&quot;: &quot;RAGFlow is...&quot;, &quot;attachment&quot;: {}}]
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>  ]
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>}
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L294-L294">agent/canvas.py294</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L705-L714">agent/canvas.py705-714</a></p>
<h4 id="path-field">Path Field<a class="headerlink" href="#path-field" title="Permanent link">&para;</a></h4>
<p>Records the execution path as an ordered list of component IDs:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>{
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>  &quot;path&quot;: [&quot;begin&quot;, &quot;retrieval_0&quot;, &quot;generate_0&quot;, &quot;answer_0&quot;]
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>}
</code></pre></div>
The path is built dynamically during execution and determines which components have already run.</p>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L70-L70">agent/canvas.py70</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L105-L105">agent/canvas.py105</a></p>
<h4 id="retrieval-field">Retrieval Field<a class="headerlink" href="#retrieval-field" title="Permanent link">&para;</a></h4>
<p>Stores retrieved document chunks and aggregations for each execution round:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>{
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>  &quot;retrieval&quot;: [
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    {
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>      &quot;chunks&quot;: {
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>        &quot;123&quot;: {&quot;content&quot;: &quot;...&quot;, &quot;doc_id&quot;: &quot;doc1&quot;},
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>        &quot;456&quot;: {&quot;content&quot;: &quot;...&quot;, &quot;doc_id&quot;: &quot;doc2&quot;}
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>      },
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>      &quot;doc_aggs&quot;: {
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>        &quot;document1.pdf&quot;: {&quot;doc_name&quot;: &quot;document1.pdf&quot;, &quot;doc_id&quot;: &quot;doc1&quot;}
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>      }
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>    }
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>  ]
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>}
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L71-L71">agent/canvas.py71</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L309-L309">agent/canvas.py309</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L786-L804">agent/canvas.py786-804</a></p>
<h4 id="memory-field">Memory Field<a class="headerlink" href="#memory-field" title="Permanent link">&para;</a></h4>
<p>Long-term memory storage for multi-turn conversations:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>{
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>  &quot;memory&quot;: [
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    [&quot;user question&quot;, &quot;assistant response&quot;, &quot;summary&quot;]
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>  ]
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>}
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L310-L310">agent/canvas.py310</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L806-L810">agent/canvas.py806-810</a></p>
<h3 id="globals-field">Globals Field<a class="headerlink" href="#globals-field" title="Permanent link">&para;</a></h3>
<p>System and environment variables accessible throughout the workflow:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>{
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>  &quot;globals&quot;: {
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    &quot;sys.query&quot;: &quot;What is RAGFlow?&quot;,
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    &quot;sys.user_id&quot;: &quot;tenant123&quot;,
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    &quot;sys.conversation_turns&quot;: 3,
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    &quot;sys.files&quot;: [],
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>    &quot;env.api_key&quot;: &quot;sk-xxx&quot;,
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    &quot;env.custom_var&quot;: &quot;value&quot;
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>  }
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>}
</code></pre></div>
<strong>System Variables</strong> (<code>sys.*</code>):</p>
<ul>
<li><code>sys.query</code>: Current user query</li>
<li><code>sys.user_id</code>: Tenant/user identifier</li>
<li><code>sys.conversation_turns</code>: Number of conversation rounds</li>
<li><code>sys.files</code>: Uploaded files (images, documents)</li>
</ul>
<p><strong>Environment Variables</strong> (<code>env.*</code>): User-defined variables that persist across workflow executions.</p>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L72-L77">agent/canvas.py72-77</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L282-L287">agent/canvas.py282-287</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L295-L307">agent/canvas.py295-307</a></p>
<h3 id="variables-field">Variables Field<a class="headerlink" href="#variables-field" title="Permanent link">&para;</a></h3>
<p>Variable definitions with type information:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>{
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>  &quot;variables&quot;: {
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    &quot;api_endpoint&quot;: {
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>      &quot;type&quot;: &quot;string&quot;,
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>      &quot;value&quot;: &quot;https://api.example.com&quot;
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    },
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    &quot;max_retries&quot;: {
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>      &quot;type&quot;: &quot;number&quot;,
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>      &quot;value&quot;: 3
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>    },
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    &quot;enabled&quot;: {
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>      &quot;type&quot;: &quot;boolean&quot;,
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>      &quot;value&quot;: true
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>    }
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>  }
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>}
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L304-L307">agent/canvas.py304-307</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L339-L359">agent/canvas.py339-359</a></p>
<h3 id="graph-field">Graph Field<a class="headerlink" href="#graph-field" title="Permanent link">&para;</a></h3>
<p>Frontend visualization metadata (nodes and edges for ReactFlow):</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>{
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>  &quot;graph&quot;: {
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    &quot;nodes&quot;: [
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>      {
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>        &quot;id&quot;: &quot;begin&quot;,
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>        &quot;type&quot;: &quot;beginNode&quot;,
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>        &quot;data&quot;: {&quot;name&quot;: &quot;Start&quot;, &quot;params&quot;: {}},
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>        &quot;position&quot;: {&quot;x&quot;: 100, &quot;y&quot;: 100}
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>      }
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>    ],
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>    &quot;edges&quot;: [
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>      {
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>        &quot;id&quot;: &quot;e1&quot;,
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>        &quot;source&quot;: &quot;begin&quot;,
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>        &quot;target&quot;: &quot;retrieval_0&quot;
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>      }
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>    ]
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>  }
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>}
</code></pre></div>
This field is used by the frontend canvas editor and not directly by the execution engine.</p>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L139-L142">agent/canvas.py139-142</a></p>
<h2 id="graph-and-canvas-classes">Graph and Canvas Classes<a class="headerlink" href="#graph-and-canvas-classes" title="Permanent link">&para;</a></h2>
<h3 id="class-hierarchy">Class Hierarchy<a class="headerlink" href="#class-hierarchy" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    RUN["run()Execute workflow with SSE"]
    RESET["reset()Clear state"]
    GET_HIST["get_history()Get conversation history"]
    ADD_REF["add_reference()Store retrieval results"]
    GET_FILES["get_files_async()Process uploaded files"]
    LOAD["load()Load components from DSL"]
    GET_VAR["get_variable_value()Resolve variable references"]
    SET_VAR["set_variable_value()Set variable values"]
    IS_CANCEL["is_canceled()Check cancellation"]
    GET_CPN["get_component()Get component by ID"]
    Graph["Graph (Base Class)agent/canvas.py:40-277"]
    Canvas["Canvas (Agent Mode)agent/canvas.py:279-814"]

    Graph --&gt; Canvas
    Graph --&gt; GraphMethods
    Canvas --&gt; CanvasMethods</code></pre>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L40-L277">agent/canvas.py40-277</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L279-L814">agent/canvas.py279-814</a></p>
<h3 id="graph-class">Graph Class<a class="headerlink" href="#graph-class" title="Permanent link">&para;</a></h3>
<p>The <code>Graph</code> class provides the base workflow orchestration functionality:</p>
<p><strong>Constructor:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>def __init__(self, dsl: str, tenant_id=None, task_id=None)
</code></pre></div>
<strong>Key Attributes:</strong></p>
<ul>
<li><code>self.components</code>: Dictionary of component instances</li>
<li><code>self.path</code>: Execution path (list of component IDs)</li>
<li><code>self.dsl</code>: Parsed DSL dictionary</li>
<li><code>self.task_id</code>: Unique task identifier</li>
<li><code>self._tenant_id</code>: Tenant identifier</li>
<li><code>self._thread_pool</code>: ThreadPoolExecutor for parallel execution</li>
</ul>
<p><strong>Core Methods:</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>load()</code></td>
<td>Parse DSL, instantiate components, validate parameters</td>
</tr>
<tr>
<td><code>get_component(cpn_id)</code></td>
<td>Get component dictionary by ID</td>
</tr>
<tr>
<td><code>get_component_obj(cpn_id)</code></td>
<td>Get ComponentBase instance by ID</td>
</tr>
<tr>
<td><code>get_variable_value(exp)</code></td>
<td>Resolve variable expressions like <code>{cpn_id@output}</code></td>
</tr>
<tr>
<td><code>set_variable_value(exp, value)</code></td>
<td>Set variable values</td>
</tr>
<tr>
<td><code>is_canceled()</code></td>
<td>Check if task has been canceled via Redis</td>
</tr>
<tr>
<td><code>cancel_task()</code></td>
<td>Mark task as canceled</td>
</tr>
</tbody>
</table>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L40-L277">agent/canvas.py40-277</a></p>
<h3 id="canvas-class">Canvas Class<a class="headerlink" href="#canvas-class" title="Permanent link">&para;</a></h3>
<p>The <code>Canvas</code> class extends <code>Graph</code> for conversational agent workflows:</p>
<p><strong>Constructor:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>def __init__(self, dsl: str, tenant_id=None, task_id=None, canvas_id=None)
</code></pre></div>
<strong>Additional State:</strong></p>
<ul>
<li><code>self.globals</code>: System and environment variables</li>
<li><code>self.variables</code>: Variable definitions</li>
<li><code>self.history</code>: Conversation history</li>
<li><code>self.retrieval</code>: Retrieved chunks per round</li>
<li><code>self.memory</code>: Long-term memory</li>
<li><code>self.message_id</code>: Current message identifier</li>
<li><code>self._id</code>: Canvas identifier</li>
</ul>
<p><strong>Key Methods:</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>run(**kwargs)</code></td>
<td>Execute workflow, yielding SSE events</td>
</tr>
<tr>
<td><code>reset(mem=False)</code></td>
<td>Clear state, optionally preserve memory</td>
</tr>
<tr>
<td><code>get_history(window_size)</code></td>
<td>Get last N conversation turns</td>
</tr>
<tr>
<td><code>add_user_input(question)</code></td>
<td>Append user message to history</td>
</tr>
<tr>
<td><code>add_reference(chunks, doc_infos)</code></td>
<td>Store retrieval results</td>
</tr>
<tr>
<td><code>get_files_async(files)</code></td>
<td>Process uploaded files (images, documents)</td>
</tr>
<tr>
<td><code>tool_use_callback(...)</code></td>
<td>Log tool invocations</td>
</tr>
</tbody>
</table>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L279-L814">agent/canvas.py279-814</a></p>
<h2 id="component-loading-and-instantiation">Component Loading and Instantiation<a class="headerlink" href="#component-loading-and-instantiation" title="Permanent link">&para;</a></h2>
<h3 id="component-loading-process">Component Loading Process<a class="headerlink" href="#component-loading-process" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    DSL["DSL JSON"]
    PARSE["Parse JSONjson.loads()"]
    VALIDATE["Validate Paramsparam.check()"]
    INSTANTIATE["Instantiate Componentscomponent_class()"]
    GRAPH["Graph ObjectReady to Execute"]

    DSL --&gt; PARSE
    PARSE --&gt; VALIDATE
    VALIDATE --&gt; INSTANTIATE
    INSTANTIATE --&gt; GRAPH</code></pre>
The <code>load()</code> method performs component instantiation:</p>
<ol>
<li><strong>Parse Components:</strong> Iterate through <code>dsl["components"]</code> dictionary</li>
<li><strong>Get Parameter Class:</strong> Use <code>component_class(component_name + "Param")</code></li>
<li><strong>Update Parameters:</strong> Call <code>param.update(cpn["obj"]["params"])</code></li>
<li><strong>Validate:</strong> Call <code>param.check()</code> to validate configuration</li>
<li><strong>Instantiate Component:</strong> Use <code>component_class(component_name)(canvas, id, param)</code></li>
<li><strong>Store Instance:</strong> Replace <code>cpn["obj"]</code> with the instantiated component</li>
</ol>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L91-L105">agent/canvas.py91-105</a></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a># Example from canvas.py
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>def load(self):
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    self.components = self.dsl[&quot;components&quot;]
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>    for k, cpn in self.components.items():
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>        # Get parameter class
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>        param = component_class(cpn[&quot;obj&quot;][&quot;component_name&quot;] + &quot;Param&quot;)()
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>        # Update with DSL params
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>        param.update(cpn[&quot;obj&quot;][&quot;params&quot;])
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>        # Validate
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>        try:
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>            param.check()
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>        except Exception as e:
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>            raise ValueError(self.get_component_name(k) + f&quot;: {e}&quot;)
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>        # Instantiate component
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>        cpn[&quot;obj&quot;] = component_class(cpn[&quot;obj&quot;][&quot;component_name&quot;])(self, k, param)
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L91-L105">agent/canvas.py91-105</a></p>
<h2 id="variable-reference-syntax">Variable Reference Syntax<a class="headerlink" href="#variable-reference-syntax" title="Permanent link">&para;</a></h2>
<p>Variables in the DSL use a special syntax for referencing component outputs and global variables:</p>
<h3 id="variable-expression-format">Variable Expression Format<a class="headerlink" href="#variable-expression-format" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{component_id@output_name}</code></td>
<td>Component output</td>
<td><code>{retrieval_0@content}</code></td>
</tr>
<tr>
<td><code>{sys.variable_name}</code></td>
<td>System variable</td>
<td><code>{sys.query}</code></td>
</tr>
<tr>
<td><code>{env.variable_name}</code></td>
<td>Environment variable</td>
<td><code>{env.api_key}</code></td>
</tr>
<tr>
<td><code>{component_id@output.field}</code></td>
<td>Nested field access</td>
<td><code>{retrieval_0@result.score}</code></td>
</tr>
<tr>
<td><code>{component_id@output.0}</code></td>
<td>Array index</td>
<td><code>{retrieval_0@chunks.0}</code></td>
</tr>
</tbody>
</table>
<h3 id="variable-resolution-process">Variable Resolution Process<a class="headerlink" href="#variable-resolution-process" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    INPUT["Input String'Use {retrieval_0@content} with {sys.query}'"]
    REGEX["Regex Matchvariable_ref_patt"]
    PARSE["Parse ExpressionSplit @ or sys./env."]
    CHECK["Check Component Exists"]
    GET["Get Output Valuecpn['obj'].output(key)"]
    NESTED["Navigate Nested Pathobj.field1.field2"]
    REPLACE["Replace in String"]
    OUTPUT["Output String'Use retrieved_text with user_question'"]

    INPUT --&gt; REGEX
    REGEX --&gt; PARSE
    PARSE --&gt; CHECK
    CHECK --&gt; GET
    GET --&gt; NESTED
    NESTED --&gt; REPLACE
    REPLACE --&gt; OUTPUT</code></pre>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L162-L233">agent/canvas.py162-233</a></p>
<h3 id="variable-resolution-implementation">Variable Resolution Implementation<a class="headerlink" href="#variable-resolution-implementation" title="Permanent link">&para;</a></h3>
<p>The <code>get_variable_value()</code> method resolves variable expressions:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>def get_variable_value(self, exp: str) -&gt; Any:
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>    exp = exp.strip(&quot;{&quot;).strip(&quot;}&quot;).strip(&quot; &quot;)
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    # Global variable (sys.* or env.*)
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>    if exp.find(&quot;@&quot;) &lt; 0:
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>        return self.globals[exp]
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    # Component output
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    cpn_id, var_nm = exp.split(&quot;@&quot;)
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>    cpn = self.get_component(cpn_id)
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>    if not cpn:
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>        raise Exception(f&quot;Can&#39;t find variable: &#39;{cpn_id}@{var_nm}&#39;&quot;)
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>    # Handle nested paths (e.g., output.field.subfield)
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>    parts = var_nm.split(&quot;.&quot;, 1)
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>    root_key = parts[0]
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>    rest = parts[1] if len(parts) &gt; 1 else &quot;&quot;
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>    root_val = cpn[&quot;obj&quot;].output(root_key)
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>    if not rest:
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>        return root_val
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>    return self.get_variable_param_value(root_val, rest)
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L189-L233">agent/canvas.py189-233</a></p>
<h3 id="variable-substitution-in-strings">Variable Substitution in Strings<a class="headerlink" href="#variable-substitution-in-strings" title="Permanent link">&para;</a></h3>
<p>The <code>get_value_with_variable()</code> method substitutes variables in strings:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>def get_value_with_variable(self, value: str) -&gt; Any:
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>    pat = re.compile(r&quot;\{* *\{([a-zA-Z:0-9]+@[A-Za-z0-9_.-]+|sys\.[A-Za-z0-9_.]+|env\.[A-Za-z0-9_.]+)\} *\}*&quot;)
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>    out_parts = []
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>    last = 0
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    for m in pat.finditer(value):
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>        out_parts.append(value[last:m.start()])
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>        key = m.group(1)
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>        v = self.get_variable_value(key)
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>        # Handle different value types
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>        if v is None:
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>            rep = &quot;&quot;
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>        elif isinstance(v, partial):
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>            # Stream chunks
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>            buf = []
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>            for chunk in v():
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>                buf.append(chunk)
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>            rep = &quot;&quot;.join(buf)
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>        elif isinstance(v, str):
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>            rep = v
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a>        else:
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>            rep = json.dumps(v, ensure_ascii=False)
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>        out_parts.append(rep)
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a>        last = m.end()
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>
<a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a>    out_parts.append(value[last:])
<a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a>    return &quot;&quot;.join(out_parts)
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L162-L187">agent/canvas.py162-187</a></p>
<h2 id="component-graph-structure">Component Graph Structure<a class="headerlink" href="#component-graph-structure" title="Permanent link">&para;</a></h2>
<h3 id="execution-flow-definition">Execution Flow Definition<a class="headerlink" href="#execution-flow-definition" title="Permanent link">&para;</a></h3>
<p>Components are connected through <code>downstream</code> and <code>upstream</code> arrays:</p>
<p><pre class="mermaid"><code>flowchart TD
    Begin["begin(Begin)"]
    Retrieval["retrieval_0(Retrieval)"]
    Generate["generate_0(Generate)"]
    Message["message_0(Message)"]

    Begin --&gt; Retrieval
    Retrieval --&gt; Generate
    Generate --&gt; Message
    Retrieval --&gt; Begin
    Generate --&gt; Retrieval
    Message --&gt; Generate</code></pre>
<strong>Example DSL:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>{
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>  &quot;components&quot;: {
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>    &quot;begin&quot;: {
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>      &quot;downstream&quot;: [&quot;retrieval_0&quot;],
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>      &quot;upstream&quot;: []
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>    },
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>    &quot;retrieval_0&quot;: {
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>      &quot;downstream&quot;: [&quot;generate_0&quot;],
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>      &quot;upstream&quot;: [&quot;begin&quot;]
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>    },
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>    &quot;generate_0&quot;: {
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>      &quot;downstream&quot;: [&quot;message_0&quot;],
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>      &quot;upstream&quot;: [&quot;retrieval_0&quot;]
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>    },
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>    &quot;message_0&quot;: {
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>      &quot;downstream&quot;: [],
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>      &quot;upstream&quot;: [&quot;generate_0&quot;]
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>    }
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>  }
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>}
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L42-L68">agent/canvas.py42-68</a></p>
<h3 id="control-flow-components">Control Flow Components<a class="headerlink" href="#control-flow-components" title="Permanent link">&para;</a></h3>
<p>Special components modify the execution path:</p>
<h4 id="switchcategorize">Switch/Categorize<a class="headerlink" href="#switchcategorize" title="Permanent link">&para;</a></h4>
<p>Conditional branching based on LLM classification:</p>
<p><pre class="mermaid"><code>flowchart TD
    Categorize["categorize_0(Categorize)"]
    Category1["path_1"]
    Category2["path_2"]
    Default["path_default"]

    Categorize --&gt; Category1
    Categorize --&gt; Category2
    Categorize --&gt; Default</code></pre>
The component sets <code>_next</code> output to determine which downstream components execute.</p>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L600-L601">agent/canvas.py600-601</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/component/categorize.py#L1-L164">agent/component/categorize.py1-164</a></p>
<h4 id="loopiteration">Loop/Iteration<a class="headerlink" href="#loopiteration" title="Permanent link">&para;</a></h4>
<p>Repeat execution over items:</p>
<p><pre class="mermaid"><code>flowchart TD
    Loop["loop_0(Loop)"]
    LoopItem["loop_0_item(LoopItem)"]
    Process["process_0"]
    Next["Next"]

    Loop --&gt; LoopItem
    LoopItem --&gt; Process
    Process --&gt; LoopItem
    LoopItem --&gt; Loop
    Loop --&gt; Next</code></pre>
Loop components have nested item components with <code>parent_id</code> references.</p>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L596-L609">agent/canvas.py596-609</a></p>
<h3 id="nested-components">Nested Components<a class="headerlink" href="#nested-components" title="Permanent link">&para;</a></h3>
<p>Loop and Iteration components have child item components:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>{
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>  &quot;loop_0&quot;: {
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>    &quot;obj&quot;: {&quot;component_name&quot;: &quot;Loop&quot;, &quot;params&quot;: {&quot;items&quot;: [1,2,3]}},
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    &quot;downstream&quot;: [&quot;next_0&quot;]
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>  },
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>  &quot;loop_0_item&quot;: {
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>    &quot;obj&quot;: {&quot;component_name&quot;: &quot;LoopItem&quot;, &quot;params&quot;: {}},
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>    &quot;parent_id&quot;: &quot;loop_0&quot;,
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    &quot;downstream&quot;: [&quot;process_0&quot;]
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>  },
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>  &quot;process_0&quot;: {
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>    &quot;parent_id&quot;: &quot;loop_0&quot;,
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>    &quot;downstream&quot;: []
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>  }
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>}
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L596-L609">agent/canvas.py596-609</a></p>
<h2 id="dsl-serialization">DSL Serialization<a class="headerlink" href="#dsl-serialization" title="Permanent link">&para;</a></h2>
<h3 id="converting-graph-to-dsl">Converting Graph to DSL<a class="headerlink" href="#converting-graph-to-dsl" title="Permanent link">&para;</a></h3>
<p>The <code>__str__()</code> method serializes the Graph back to JSON:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>def __str__(self):
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>    self.dsl[&quot;path&quot;] = self.path
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>    self.dsl[&quot;task_id&quot;] = self.task_id
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>    dsl = {&quot;components&quot;: {}}
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>    # Copy non-component fields
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>    for k in self.dsl.keys():
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>        if k in [&quot;components&quot;]:
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>            continue
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>        dsl[k] = deepcopy(self.dsl[k])
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>    # Serialize components
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>    for k, cpn in self.components.items():
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>        if k not in dsl[&quot;components&quot;]:
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>            dsl[&quot;components&quot;][k] = {}
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>        for c in cpn.keys():
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>            if c == &quot;obj&quot;:
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>                # Serialize component to JSON
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>                dsl[&quot;components&quot;][k][c] = json.loads(str(cpn[&quot;obj&quot;]))
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>                continue
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>            dsl[&quot;components&quot;][k][c] = deepcopy(cpn[c])
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>    return json.dumps(dsl, ensure_ascii=False)
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L107-L126">agent/canvas.py107-126</a></p>
<h3 id="canvas-specific-serialization">Canvas-Specific Serialization<a class="headerlink" href="#canvas-specific-serialization" title="Permanent link">&para;</a></h3>
<p>The Canvas class adds history, retrieval, and memory:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>def __str__(self):
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>    self.dsl[&quot;history&quot;] = self.history
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>    self.dsl[&quot;retrieval&quot;] = self.retrieval
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    self.dsl[&quot;memory&quot;] = self.memory
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>    return super().__str__()
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L312-L316">agent/canvas.py312-316</a></p>
<h2 id="task-management">Task Management<a class="headerlink" href="#task-management" title="Permanent link">&para;</a></h2>
<h3 id="task-identification">Task Identification<a class="headerlink" href="#task-identification" title="Permanent link">&para;</a></h3>
<p>Each workflow execution has a unique task ID:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>def __init__(self, dsl: str, tenant_id=None, task_id=None):
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>    # ...
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>    self.task_id = task_id if task_id else get_uuid()
</code></pre></div>
The task ID is used for:</p>
<ul>
<li>Cancellation via Redis: <code>{task_id}-cancel</code></li>
<li>Logging: <code>{task_id}-{message_id}-logs</code></li>
<li>Progress tracking</li>
</ul>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L81-L88">agent/canvas.py81-88</a></p>
<h3 id="cancellation-mechanism">Cancellation Mechanism<a class="headerlink" href="#cancellation-mechanism" title="Permanent link">&para;</a></h3>
<p>Tasks can be canceled through Redis:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>def is_canceled(self) -&gt; bool:
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>    return has_canceled(self.task_id)
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>def cancel_task(self) -&gt; bool:
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>    try:
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>        REDIS_CONN.set(f&quot;{self.task_id}-cancel&quot;, &quot;x&quot;)
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>    except Exception as e:
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>        logging.exception(e)
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>        return False
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>    return True
</code></pre></div>
The execution loop checks cancellation status before each batch and raises <code>TaskCanceledException</code> if canceled.</p>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L267-L276">agent/canvas.py267-276</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L406-L409">agent/canvas.py406-409</a></p>
<h2 id="state-management">State Management<a class="headerlink" href="#state-management" title="Permanent link">&para;</a></h2>
<h3 id="state-reset">State Reset<a class="headerlink" href="#state-reset" title="Permanent link">&para;</a></h3>
<p>The <code>reset()</code> method clears execution state:</p>
<p><strong>Graph Reset:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>def reset(self):
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>    self.path = []
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>    for k, cpn in self.components.items():
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>        self.components[k][&quot;obj&quot;].reset()
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>    try:
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>        REDIS_CONN.delete(f&quot;{self.task_id}-logs&quot;)
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>        REDIS_CONN.delete(f&quot;{self.task_id}-cancel&quot;)
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>    except Exception as e:
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>        logging.exception(e)
</code></pre></div>
<strong>Canvas Reset:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>def reset(self, mem=False):
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>    super().reset()
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    if not mem:
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>        self.history = []
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>        self.retrieval = []
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>        self.memory = []
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>    # Reset system variables
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>    for k in self.globals.keys():
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>        if k.startswith(&quot;sys.&quot;):
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>            if isinstance(self.globals[k], str):
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>                self.globals[k] = &quot;&quot;
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>            elif isinstance(self.globals[k], int):
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>                self.globals[k] = 0
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>            # ... other types
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>        # Reset environment variables from definitions
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>        if k.startswith(&quot;env.&quot;):
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>            key = k[4:]
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>            if key in self.variables:
<a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a>                variable = self.variables[key]
<a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a>                self.globals[k] = variable[&quot;value&quot;] or default_value
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L128-L136">agent/canvas.py128-136</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L318-L360">agent/canvas.py318-360</a></p>
<h2 id="integration-with-components">Integration with Components<a class="headerlink" href="#integration-with-components" title="Permanent link">&para;</a></h2>
<h3 id="component-interface">Component Interface<a class="headerlink" href="#component-interface" title="Permanent link">&para;</a></h3>
<p>Components access the Canvas through their <code>_canvas</code> attribute:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>class ComponentBase(ABC):
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>    def __init__(self, canvas, id, param: ComponentParamBase):
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>        from agent.canvas import Graph
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>        assert isinstance(canvas, Graph), &quot;canvas must be an instance of Canvas&quot;
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>        self._canvas = canvas
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>        self._id = id
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>        self._param = param
</code></pre></div>
Components can:</p>
<ul>
<li>Get variable values: <code>self._canvas.get_variable_value("{cpn_id@output}")</code></li>
<li>Set outputs: <code>self.set_output(key, value)</code></li>
<li>Access history: <code>self._canvas.get_history(window_size)</code></li>
<li>Add references: <code>self._canvas.add_reference(chunks, doc_infos)</code></li>
</ul>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/component/base.py#L380-L386">agent/component/base.py380-386</a></p>
<h3 id="input-resolution">Input Resolution<a class="headerlink" href="#input-resolution" title="Permanent link">&para;</a></h3>
<p>Components use <code>get_input_elements_from_text()</code> to find variable references in their parameters:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>def get_input_elements_from_text(self, txt: str) -&gt; dict[str, dict[str, str]]:
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>    res = {}
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>    for r in re.finditer(self.variable_ref_patt, txt, flags=re.IGNORECASE | re.DOTALL):
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>        exp = r.group(1)
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>        cpn_id, var_nm = exp.split(&quot;@&quot;) if exp.find(&quot;@&quot;) &gt; 0 else (&quot;&quot;, exp)
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>        res[exp] = {
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>            &quot;name&quot;: (self._canvas.get_component_name(cpn_id) + f&quot;@{var_nm}&quot;) if cpn_id else exp,
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>            &quot;value&quot;: self._canvas.get_variable_value(exp),
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>            &quot;_retrieval&quot;: self._canvas.get_variable_value(f&quot;{cpn_id}@_references&quot;) if cpn_id else None,
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>            &quot;_cpn_id&quot;: cpn_id
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>        }
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>    return res
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/component/base.py#L495-L506">agent/component/base.py495-506</a></p>
<h2 id="example-workflow-dsl">Example Workflow DSL<a class="headerlink" href="#example-workflow-dsl" title="Permanent link">&para;</a></h2>
<h3 id="simple-rag-workflow">Simple RAG Workflow<a class="headerlink" href="#simple-rag-workflow" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>{
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>  &quot;components&quot;: {
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>    &quot;begin&quot;: {
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>      &quot;obj&quot;: {
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>        &quot;component_name&quot;: &quot;Begin&quot;,
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>        &quot;params&quot;: {
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>          &quot;prologue&quot;: &quot;How can I help you today?&quot;,
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>          &quot;mode&quot;: &quot;Dialog&quot;
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>        }
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>      },
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>      &quot;downstream&quot;: [&quot;retrieval_0&quot;],
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>      &quot;upstream&quot;: []
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>    },
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>    &quot;retrieval_0&quot;: {
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>      &quot;obj&quot;: {
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a>        &quot;component_name&quot;: &quot;Retrieval&quot;,
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>        &quot;params&quot;: {
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>          &quot;kb_ids&quot;: [&quot;kb_abc123&quot;],
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>          &quot;similarity_threshold&quot;: 0.2,
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a>          &quot;top_n&quot;: 6,
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a>          &quot;query&quot;: &quot;{sys.query}&quot;
<a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a>        }
<a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a>      },
<a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a>      &quot;downstream&quot;: [&quot;generate_0&quot;],
<a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a>      &quot;upstream&quot;: [&quot;begin&quot;]
<a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a>    },
<a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a>    &quot;generate_0&quot;: {
<a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a>      &quot;obj&quot;: {
<a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a>        &quot;component_name&quot;: &quot;Generate&quot;,
<a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a>        &quot;params&quot;: {
<a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a>          &quot;llm_id&quot;: &quot;gpt-4&quot;,
<a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a>          &quot;temperature&quot;: 0.1,
<a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a>          &quot;prompt&quot;: &quot;Based on these documents:\n{retrieval_0@content}\n\nAnswer: {sys.query}&quot;,
<a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a>          &quot;cite&quot;: true
<a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a>        }
<a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a>      },
<a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a>      &quot;downstream&quot;: [&quot;message_0&quot;],
<a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a>      &quot;upstream&quot;: [&quot;retrieval_0&quot;]
<a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a>    },
<a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a>    &quot;message_0&quot;: {
<a id="__codelineno-24-41" name="__codelineno-24-41" href="#__codelineno-24-41"></a>      &quot;obj&quot;: {
<a id="__codelineno-24-42" name="__codelineno-24-42" href="#__codelineno-24-42"></a>        &quot;component_name&quot;: &quot;Message&quot;,
<a id="__codelineno-24-43" name="__codelineno-24-43" href="#__codelineno-24-43"></a>        &quot;params&quot;: {
<a id="__codelineno-24-44" name="__codelineno-24-44" href="#__codelineno-24-44"></a>          &quot;content&quot;: &quot;{generate_0@content}&quot;
<a id="__codelineno-24-45" name="__codelineno-24-45" href="#__codelineno-24-45"></a>        }
<a id="__codelineno-24-46" name="__codelineno-24-46" href="#__codelineno-24-46"></a>      },
<a id="__codelineno-24-47" name="__codelineno-24-47" href="#__codelineno-24-47"></a>      &quot;downstream&quot;: [],
<a id="__codelineno-24-48" name="__codelineno-24-48" href="#__codelineno-24-48"></a>      &quot;upstream&quot;: [&quot;generate_0&quot;]
<a id="__codelineno-24-49" name="__codelineno-24-49" href="#__codelineno-24-49"></a>    }
<a id="__codelineno-24-50" name="__codelineno-24-50" href="#__codelineno-24-50"></a>  },
<a id="__codelineno-24-51" name="__codelineno-24-51" href="#__codelineno-24-51"></a>  &quot;history&quot;: [],
<a id="__codelineno-24-52" name="__codelineno-24-52" href="#__codelineno-24-52"></a>  &quot;path&quot;: [&quot;begin&quot;],
<a id="__codelineno-24-53" name="__codelineno-24-53" href="#__codelineno-24-53"></a>  &quot;retrieval&quot;: [{&quot;chunks&quot;: {}, &quot;doc_aggs&quot;: {}}],
<a id="__codelineno-24-54" name="__codelineno-24-54" href="#__codelineno-24-54"></a>  &quot;globals&quot;: {
<a id="__codelineno-24-55" name="__codelineno-24-55" href="#__codelineno-24-55"></a>    &quot;sys.query&quot;: &quot;&quot;,
<a id="__codelineno-24-56" name="__codelineno-24-56" href="#__codelineno-24-56"></a>    &quot;sys.user_id&quot;: &quot;tenant_123&quot;,
<a id="__codelineno-24-57" name="__codelineno-24-57" href="#__codelineno-24-57"></a>    &quot;sys.conversation_turns&quot;: 0,
<a id="__codelineno-24-58" name="__codelineno-24-58" href="#__codelineno-24-58"></a>    &quot;sys.files&quot;: []
<a id="__codelineno-24-59" name="__codelineno-24-59" href="#__codelineno-24-59"></a>  }
<a id="__codelineno-24-60" name="__codelineno-24-60" href="#__codelineno-24-60"></a>}
</code></pre></div>
<h3 id="conditional-workflow-with-categorize">Conditional Workflow with Categorize<a class="headerlink" href="#conditional-workflow-with-categorize" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>{
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>  &quot;components&quot;: {
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>    &quot;begin&quot;: {
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>      &quot;obj&quot;: {&quot;component_name&quot;: &quot;Begin&quot;, &quot;params&quot;: {}},
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>      &quot;downstream&quot;: [&quot;categorize_0&quot;],
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>      &quot;upstream&quot;: []
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>    },
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>    &quot;categorize_0&quot;: {
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>      &quot;obj&quot;: {
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>        &quot;component_name&quot;: &quot;Categorize&quot;,
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>        &quot;params&quot;: {
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>          &quot;query&quot;: &quot;{sys.query}&quot;,
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>          &quot;category_description&quot;: {
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>            &quot;Technical&quot;: {
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>              &quot;description&quot;: &quot;Technical questions about the system&quot;,
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>              &quot;examples&quot;: [&quot;How do I deploy?&quot;, &quot;What&#39;s the API?&quot;],
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>              &quot;to&quot;: [&quot;retrieval_tech&quot;]
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>            },
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>            &quot;General&quot;: {
<a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>              &quot;description&quot;: &quot;General questions&quot;,
<a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>              &quot;examples&quot;: [&quot;What is this?&quot;],
<a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>              &quot;to&quot;: [&quot;retrieval_general&quot;]
<a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a>            }
<a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a>          }
<a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a>        }
<a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a>      },
<a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a>      &quot;downstream&quot;: [],
<a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a>      &quot;upstream&quot;: [&quot;begin&quot;]
<a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a>    },
<a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a>    &quot;retrieval_tech&quot;: {
<a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a>      &quot;obj&quot;: {
<a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a>        &quot;component_name&quot;: &quot;Retrieval&quot;,
<a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a>        &quot;params&quot;: {&quot;kb_ids&quot;: [&quot;kb_technical&quot;]}
<a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a>      },
<a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a>      &quot;downstream&quot;: [&quot;generate_0&quot;],
<a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a>      &quot;upstream&quot;: []
<a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a>    },
<a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a>    &quot;retrieval_general&quot;: {
<a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a>      &quot;obj&quot;: {
<a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a>        &quot;component_name&quot;: &quot;Retrieval&quot;,
<a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a>        &quot;params&quot;: {&quot;kb_ids&quot;: [&quot;kb_general&quot;]}
<a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a>      },
<a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a>      &quot;downstream&quot;: [&quot;generate_0&quot;],
<a id="__codelineno-25-44" name="__codelineno-25-44" href="#__codelineno-25-44"></a>      &quot;upstream&quot;: []
<a id="__codelineno-25-45" name="__codelineno-25-45" href="#__codelineno-25-45"></a>    },
<a id="__codelineno-25-46" name="__codelineno-25-46" href="#__codelineno-25-46"></a>    &quot;generate_0&quot;: {
<a id="__codelineno-25-47" name="__codelineno-25-47" href="#__codelineno-25-47"></a>      &quot;obj&quot;: {&quot;component_name&quot;: &quot;Generate&quot;, &quot;params&quot;: {}},
<a id="__codelineno-25-48" name="__codelineno-25-48" href="#__codelineno-25-48"></a>      &quot;downstream&quot;: [&quot;message_0&quot;],
<a id="__codelineno-25-49" name="__codelineno-25-49" href="#__codelineno-25-49"></a>      &quot;upstream&quot;: []
<a id="__codelineno-25-50" name="__codelineno-25-50" href="#__codelineno-25-50"></a>    }
<a id="__codelineno-25-51" name="__codelineno-25-51" href="#__codelineno-25-51"></a>  }
<a id="__codelineno-25-52" name="__codelineno-25-52" href="#__codelineno-25-52"></a>}
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L42-L78">agent/canvas.py42-78</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/component/categorize.py#L29-L95">agent/component/categorize.py29-95</a></p>
<h2 id="api-integration">API Integration<a class="headerlink" href="#api-integration" title="Permanent link">&para;</a></h2>
<h3 id="canvas-completion-endpoint">Canvas Completion Endpoint<a class="headerlink" href="#canvas-completion-endpoint" title="Permanent link">&para;</a></h3>
<p>The Canvas API receives requests and instantiates the Canvas:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>@manager.route(&#39;/completion&#39;, methods=[&#39;POST&#39;])
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>@validate_request(&quot;id&quot;)
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>@login_required
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>async def run():
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>    req = await get_request_json()
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>    query = req.get(&quot;query&quot;, &quot;&quot;)
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>    files = req.get(&quot;files&quot;, [])
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>    inputs = req.get(&quot;inputs&quot;, {})
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>    e, cvs = await asyncio.to_thread(UserCanvasService.get_by_id, req[&quot;id&quot;])
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>    if not isinstance(cvs.dsl, str):
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>        cvs.dsl = json.dumps(cvs.dsl, ensure_ascii=False)
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>    try:
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>        canvas = Canvas(cvs.dsl, current_user.id, canvas_id=cvs.id)
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>    except Exception as e:
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>        return server_error_response(e)
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a>
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>    async def sse():
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>        try:
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>            async for ans in canvas.run(query=query, files=files, user_id=user_id, inputs=inputs):
<a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a>                yield &quot;data:&quot; + json.dumps(ans, ensure_ascii=False) + &quot;\n\n&quot;
<a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a>
<a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>            cvs.dsl = json.loads(str(canvas))
<a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a>            UserCanvasService.update_by_id(req[&quot;id&quot;], cvs.to_dict())
<a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a>        except Exception as e:
<a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a>            logging.exception(e)
<a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a>            canvas.cancel_task()
<a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a>            yield &quot;data:&quot; + json.dumps({&quot;code&quot;: 500, &quot;message&quot;: str(e)}, ensure_ascii=False) + &quot;\n\n&quot;
<a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a>
<a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a>    resp = Response(sse(), mimetype=&quot;text/event-stream&quot;)
<a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a>    return resp
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/canvas_app.py#L126-L180">api/apps/canvas_app.py126-180</a></p>
<h3 id="saving-canvas-dsl">Saving Canvas DSL<a class="headerlink" href="#saving-canvas-dsl" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>@manager.route(&#39;/set&#39;, methods=[&#39;POST&#39;])
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>@validate_request(&quot;dsl&quot;, &quot;title&quot;)
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>@login_required
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>async def save():
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>    req = await get_request_json()
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>    if not isinstance(req[&quot;dsl&quot;], str):
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>        req[&quot;dsl&quot;] = json.dumps(req[&quot;dsl&quot;], ensure_ascii=False)
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>    req[&quot;dsl&quot;] = json.loads(req[&quot;dsl&quot;])
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>    if &quot;id&quot; not in req:
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>        req[&quot;id&quot;] = get_uuid()
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>        if not UserCanvasService.save(**req):
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>            return get_data_error_result(message=&quot;Fail to save canvas.&quot;)
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>    else:
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>        UserCanvasService.update_by_id(req[&quot;id&quot;], req)
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>    return get_json_result(data=req)
</code></pre></div>
Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/canvas_app.py#L67-L92">api/apps/canvas_app.py67-92</a></p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>The Canvas Engine and DSL provide:</p>
<ol>
<li><strong>Flexible Workflow Definition</strong>: JSON-based DSL describes component graphs with parameters</li>
<li><strong>Variable System</strong>: Reference component outputs and global variables using <code>{expr}</code> syntax</li>
<li><strong>Execution Orchestration</strong>: Graph traversal with dynamic path building and control flow</li>
<li><strong>State Management</strong>: History, retrieval results, memory, and variables</li>
<li><strong>Task Control</strong>: Cancellation, logging, and progress tracking via Redis</li>
<li><strong>Component Integration</strong>: Components access Canvas through well-defined interfaces</li>
</ol>
<p>The DSL separates workflow definition from execution, enabling:</p>
<ul>
<li>Visual workflow editors (ReactFlow-based UI)</li>
<li>Workflow templates and versioning</li>
<li>API-driven workflow creation and execution</li>
<li>State persistence across executions</li>
</ul>
<p>For execution details, see <a href="/infiniflow/ragflow/9.4-workflow-execution-and-streaming">Workflow Execution and Streaming</a>. For variable resolution details, see <a href="/infiniflow/ragflow/9.5-state-and-variable-management">State and Variable Management</a>.</p>
<p>Sources: <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/canvas.py#L1-L814">agent/canvas.py1-814</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/canvas_app.py#L1-L559">api/apps/canvas_app.py1-559</a> <a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/component/base.py#L361-L580">agent/component/base.py361-580</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>