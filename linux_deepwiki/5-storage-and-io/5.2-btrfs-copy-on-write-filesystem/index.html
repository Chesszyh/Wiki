
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://wiki.neurosama.uk/linux_deepwiki/5-storage-and-io/5.2-btrfs-copy-on-write-filesystem/">
      
      
        <link rel="prev" href="../5.1-io_uring-asynchronous-io/">
      
      
        <link rel="next" href="../5.3-ufs-storage-controller/">
      
      
        
          <link rel="alternate" href="./" hreflang="en">
        
          <link rel="alternate" href="../../../zh/linux_deepwiki/5-storage-and-io/5.2-btrfs-copy-on-write-filesystem/" hreflang="zh">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Btrfs Copy-on-Write Filesystem - DeepWiki</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#btrfs-copy-on-write-filesystem" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="DeepWiki" class="md-header__button md-logo" aria-label="DeepWiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DeepWiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Btrfs Copy-on-Write Filesystem
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/linux_deepwiki/5-storage-and-io/5.2-btrfs-copy-on-write-filesystem/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Chesszyh/Wiki" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Welcome to DeepWiki

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../celery_deepwiki/1-celery-overview/1.1-installation-and-setup/" class="md-tabs__link">
          
  
  
  Celery deepwiki

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../lc0_deepwiki/1-lc0-overview/" class="md-tabs__link">
          
  
  
  Lc0 deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../1-linux-kernel-overview/" class="md-tabs__link">
          
  
  
  Linux deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ragflow_deepwiki/1-overview/" class="md-tabs__link">
          
  
  
  Ragflow deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../redis_deepwiki/1-redis-overview/" class="md-tabs__link">
          
  
  
  Redis deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../stockfish_deepwiki/2-core-data-structures-and-types/" class="md-tabs__link">
          
  
  
  Stockfish deepwiki

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DeepWiki" class="md-nav__button md-logo" aria-label="DeepWiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DeepWiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Chesszyh/Wiki" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome to DeepWiki
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Celery deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Celery deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    1 celery overview
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    1 celery overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/1.1-installation-and-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation and Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/1.2-core-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Celery Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 the celery application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 the celery application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.1-application-initialization-and-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Initialization and Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.2-task-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Registration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.3-message-brokers-and-routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Message Brokers and Routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.4-amqp-layer-and-message-protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AMQP Layer and Message Protocol
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Celery Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 tasks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 tasks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.1-task-definition-and-invocation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Definition and Invocation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.2-task-lifecycle-and-states/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Lifecycle and States
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.3-error-handling-and-retry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Retry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.4-time-limits-and-rate-limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Time Limits and Rate Limits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.5-task-options-and-customization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Options and Customization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 canvas workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 canvas workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.1-signatures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Signature and Composition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.2-workflow-primitives/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow Primitives
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.3-advanced-canvas-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced Canvas Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.4-chord-execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chord Execution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas Workflows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 workers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 workers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.1-worker-architecture-and-bootsteps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Architecture and Bootsteps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.2-worker-lifecycle-and-shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Lifecycle and Shutdown
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.3-concurrency-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Concurrency Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.4-worker-configuration-and-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Configuration and Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.5-consumer-and-event-loops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Consumer and Event Loops
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.6-autoscaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Autoscaling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 result backends
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 result backends
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.1-backend-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backend Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.2-backend-implementations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backend Implementations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.3-result-storage-and-retrieval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Result Serialization and Retrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.4-chord-coordination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chord Coordination
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.5-backend-resilience/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Resilience
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Result Backends
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_13" >
        
          
          <label class="md-nav__link" for="__nav_2_13" id="__nav_2_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 periodic tasks (beat)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 periodic tasks (beat)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.1-beat-scheduler-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Beat Scheduler Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.2-schedule-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schedule Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.3-time-and-timezone-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Time and Timezone Handling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.4-persistent-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persistent Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Periodic Tasks (Beat)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_15" >
        
          
          <label class="md-nav__link" for="__nav_2_15" id="__nav_2_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 monitoring and control
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 monitoring and control
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.1-remote-control-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Remote Control Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.2-worker-inspection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker Inspection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.3-event-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Monitoring and Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_17" >
        
          
          <label class="md-nav__link" for="__nav_2_17" id="__nav_2_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 command line interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 command line interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.1-cli-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.2-worker-and-beat-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker and Beat Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.3-management-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Management Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.4-multi-worker-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-worker Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Line Interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_19" >
        
          
          <label class="md-nav__link" for="__nav_2_19" id="__nav_2_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 development and testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_19">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 development and testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.1-testing-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.2-test-matrix-and-environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Matrix and Environments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.3-integration-and-smoke-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integration and Smoke Tests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.4-code-quality-and-documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Quality and Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development and Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_21" >
        
          
          <label class="md-nav__link" for="__nav_2_21" id="__nav_2_21_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    11 packaging and distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_21">
            <span class="md-nav__icon md-icon"></span>
            
  
    11 packaging and distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.1-package-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Package Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.2-dependencies-and-extras/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependencies and Extras
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.3-version-management-and-release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version Management and Release
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Packaging and Distribution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Lc0 deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Lc0 deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/1-lc0-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lc0 Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 building and installation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 building and installation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.1-build-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.2-linux-and-macos-build-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux and macOS Build Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.3-windows-build-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows Build Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.4-version-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building and Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 core engine architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 core engine architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/3.1-uci-protocol-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI Protocol Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/3.2-configuration-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Engine Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 chess representation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 chess representation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.1-bitboards-and-move-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bitboards
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.2-position-encoding-and-history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Position Encoding and History
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.3-syzygy-tablebase-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Syzygy Tablebase Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.4-pgn-and-game-import/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PGN and Game Import
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chess Representation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 search algorithm
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 search algorithm
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.1-mcts-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCTS Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.2-search-parameters-and-stopping-conditions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Parameters and Stopping Conditions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.3-search-tree-caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Caching System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Algorithm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 neural network system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 neural network system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.1-network-interface-and-backend-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Network Interface and Backend Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.2-weights-loading-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Weights Loading and Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.3-cuda-and-cudnn-backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CUDA and cuDNN Backend
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.4-onnx-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ONNX Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.5-xla-and-hlo-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XLA and HLO Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.6-memory-caching-and-performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Caching and Performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Neural Network System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 self play system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 self play system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/7-self-play-system/7.1-tournament-organization-and-game-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tournament Organization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/7-self-play-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Self-Play System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_14" >
        
          
          <label class="md-nav__link" for="__nav_3_14" id="__nav_3_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 utilities and infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 utilities and infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.1-fast-mathematical-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fast Mathematical Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.2-threading-and-synchronization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Threading and Synchronization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.3-benchmarking-and-performance-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Benchmarking and Performance Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities and Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_16" >
        
          
          <label class="md-nav__link" for="__nav_3_16" id="__nav_3_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 continuous integration and deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 continuous integration and deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/9.1-circleci-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CircleCI Workflows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/9.2-windows-build-and-packaging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows Build and Packaging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Continuous Integration and Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Linux deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linux deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-linux-kernel-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux Kernel Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    2 rust for linux
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 rust for linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-rust-for-linux/2.1-rust-kernel-apis-and-abstractions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust Kernel APIs and Abstractions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-rust-for-linux/2.2-nova-drm-graphics-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nova DRM Graphics Driver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-rust-for-linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust for Linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    3 virtualization (kvm)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 virtualization (kvm)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-virtualization-%28kvm%29/3.1-kvm-x86-virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM x86 Virtualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-virtualization-%28kvm%29/3.2-kvm-arm64-virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM ARM64 Virtualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-virtualization-%28kvm%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Virtualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    4 core kernel infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 core kernel infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-core-kernel-infrastructure/4.1-process-scheduling-and-sched_ext/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Process Scheduling and sched_ext
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-core-kernel-infrastructure/4.2-tracing-and-observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tracing and Observability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-core-kernel-infrastructure/4.3-build-system-and-kbuild/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System and Kbuild
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-core-kernel-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Kernel Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" checked>
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    5 storage and io
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 storage and io
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.1-io_uring-asynchronous-io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    io_uring Asynchronous I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Btrfs Copy-on-Write Filesystem
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Btrfs Copy-on-Write Filesystem
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#purpose-and-scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        Purpose and Scope
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-level-component-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        High-Level Component Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-data-structures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Data Structures
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Data Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#b-tree-management-ctree" class="md-nav__link">
    <span class="md-ellipsis">
      
        B-tree Management (ctree)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extent-buffers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extent Buffers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inode-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inode Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copy-on-write-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Copy-on-Write Mechanism
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Copy-on-Write Mechanism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cow-data-write-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        COW Data Write Path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cow-metadata-write-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        COW Metadata Write Path
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extent-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extent Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extent Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extent-allocation-tree-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extent Allocation Tree Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delayed-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delayed References
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snapshots-and-subvolumes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Snapshots and Subvolumes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Snapshots and Subvolumes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subvolume-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Subvolume Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference-counting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reference Counting
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raid-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        RAID Support
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RAID Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#raid-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        RAID Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compression" class="md-nav__link">
    <span class="md-ellipsis">
      
        Compression
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compression-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Compression Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-integrity-and-checksumming" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Integrity and Checksumming
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Integrity and Checksumming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checksumming-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Checksumming Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tree-logging-for-fast-fsync" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tree Logging for Fast Fsync
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tree Logging for Fast Fsync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tree-log-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tree Log Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-device-and-volume-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Device and Volume Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Device and Volume Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volume-management-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Volume Management Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zoned-device-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Zoned Device Support
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Zoned Device Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zoned-device-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Zoned Device Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Path
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I/O Path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#read-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        Read Path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        Write Path
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Transaction Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transaction Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transaction-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Transaction Lifecycle
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#block-groups-and-space-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Block Groups and Space Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Block Groups and Space Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#block-group-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Block Group Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quota-groups-qgroups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quota Groups (Qgroups)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quota Groups (Qgroups)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qgroup-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Qgroup Hierarchy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.3-ufs-storage-controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UFS Storage Controller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Storage and I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    6 graphics and display
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 graphics and display
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-graphics-and-display/6.1-amdgpu-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AMDGPU Driver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-graphics-and-display/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Graphics and Display
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Ragflow deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Ragflow deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/1-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 getting started and deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 getting started and deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/2-getting-started-and-deployment/2.1-docker-compose-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Compose Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/2-getting-started-and-deployment/2.4-build-system-and-cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System and CI/CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/2-getting-started-and-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started and Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 system architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 system architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/3.1-core-application-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Application Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/3.2-data-storage-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Storage Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/3.3-task-execution-and-queue-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Execution and Queue System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 frontend application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 frontend application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/4-frontend-application/4.1-internationalization-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Internationalization System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/4-frontend-application/4.2-application-structure-and-ui-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Structure and Routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/4-frontend-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Frontend Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 llm integration system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 llm integration system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.1-model-factory-pattern-and-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Factory Pattern and Registration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.2-provider-implementations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Provider Implementations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.3-error-handling-and-retry-logic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling and Retry Logic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.4-tenant-configuration-and-usage-tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tenant Configuration and Usage Tracking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.5-tool-calling-and-function-use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tool Calling and Function Use
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM Integration System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 document processing pipeline
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 document processing pipeline
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.1-document-parsing-strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document Parsing Strategies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.2-chunking-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chunking Methods
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.3-content-enhancement-and-embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Content Enhancement and Embedding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.4-layout-recognition-and-ocr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layout Recognition and OCR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.5-knowledge-graph-construction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Knowledge Graph Construction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.6-raptor-hierarchical-summarization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RAPTOR Hierarchical Summarization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document Processing Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_12" >
        
          
          <label class="md-nav__link" for="__nav_5_12" id="__nav_5_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 data source integration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 data source integration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/7.1-connector-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connector Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/7.2-synchronization-and-scheduling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Synchronization and Scheduling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/7.3-supported-data-sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supported Data Sources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Source Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_14" >
        
          
          <label class="md-nav__link" for="__nav_5_14" id="__nav_5_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 backend api system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 backend api system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.1-api-architecture-and-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Architecture and SDK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.2-authentication-and-authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication and Multi-tenancy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.3-dataset-and-knowledge-base-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset and Knowledge Base APIs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.4-document-and-file-management-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document and File Management APIs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.5-chat-and-conversation-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chat and Conversation APIs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backend API System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_16" >
        
          
          <label class="md-nav__link" for="__nav_5_16" id="__nav_5_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 agent and workflow system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 agent and workflow system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.1-canvas-engine-and-dsl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas Engine and DSL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.2-component-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Component System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.3-built-in-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Built-in Components
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.4-workflow-execution-and-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow Execution and Streaming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.5-state-and-variable-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    State and Variable Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.6-agent-tools-and-react-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Tools and ReAct Loop
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.7-canvas-api-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas API and Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent and Workflow System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_18" >
        
          
          <label class="md-nav__link" for="__nav_5_18" id="__nav_5_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 retrieval and rag system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_18">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 retrieval and rag system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.1-query-processing-and-refinement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query Processing and Refinement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.2-hybrid-search-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hybrid Search Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.3-reranking-and-metadata-filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reranking and Metadata Filtering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.4-response-generation-and-citations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Response Generation and Citations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieval and RAG System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Redis deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Redis deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/1-redis-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 redis core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 redis core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.1-server-architecture-and-lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Server Architecture and Lifecycle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.2-client-connection-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client Connection Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.3-command-processing-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Processing Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.4-configuration-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 data storage and management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 data storage and management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.1-core-data-types-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Data Types Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.2-streams-and-blocking-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Streams and Blocking Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.3-hyperloglog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HyperLogLog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.4-memory-efficient-data-structures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory-Efficient Data Structures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.5-dictionary-and-key-value-store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dictionary and Key-Value Store
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.6-dynamic-string-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dynamic String Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Storage and Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 memory management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 memory management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/4.1-eviction-and-expiration-policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Eviction and Expiration Policies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/4.2-memory-allocators-and-build-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Allocators and Build System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8" >
        
          
          <label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 scripting and extensions
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 scripting and extensions
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/5.1-lua-scripting-and-redis-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lua Scripting and Redis Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/5.2-redis-module-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Module API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scripting and Extensions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_10" >
        
          
          <label class="md-nav__link" for="__nav_6_10" id="__nav_6_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 high availability and distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 high availability and distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/6.1-redis-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Cluster
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/6.2-redis-sentinel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Sentinel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    High Availability and Scaling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/7-persistence-and-replication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persistence and Replication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_13" >
        
          
          <label class="md-nav__link" for="__nav_6_13" id="__nav_6_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/8.1-access-control-lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Access Control Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/8.2-network-security-and-tls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Network Security and TLS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_15" >
        
          
          <label class="md-nav__link" for="__nav_6_15" id="__nav_6_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 client tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 client tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/9-client-tools/9.1-redis-cli-and-benchmark-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis CLI and Benchmark Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/9-client-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_17" >
        
          
          <label class="md-nav__link" for="__nav_6_17" id="__nav_6_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 development and testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 development and testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.1-build-system-and-dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System and Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.2-testing-framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Framework
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.3-continuous-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Continuous Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development and Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Stockfish deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Stockfish deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/2-core-data-structures-and-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Data Structures and Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 board representation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 board representation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.1-position-and-state-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Position and State Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.2-bitboards-and-low-level-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bitboards and Low-level Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.3-move-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Move Generation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Board Representation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 search system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 search system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.1-search-algorithm-and-iterative-deepening/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Algorithm and Iterative Deepening
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.2-thread-management-and-parallel-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thread Management and Parallel Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.3-move-ordering-and-move-picker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Move Ordering and Move Picker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
        
          
          <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 evaluation system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 evaluation system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/5-evaluation-system/5.1-nnue-neural-network-evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NNUE Neural Network Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/5-evaluation-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_8" >
        
          
          <label class="md-nav__link" for="__nav_7_8" id="__nav_7_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 external interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 external interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/6.1-uci-protocol-handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI Protocol Handler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/6.2-uci-options-and-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI Options and Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    External Interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_10" >
        
          
          <label class="md-nav__link" for="__nav_7_10" id="__nav_7_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 infrastructure and support
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 infrastructure and support
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.1-build-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.2-utilities-and-support-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities and Support Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.3-testing-and-benchmarking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing and Benchmarking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Infrastructure and Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#purpose-and-scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        Purpose and Scope
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-level-component-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        High-Level Component Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-data-structures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Data Structures
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Data Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#b-tree-management-ctree" class="md-nav__link">
    <span class="md-ellipsis">
      
        B-tree Management (ctree)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extent-buffers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extent Buffers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inode-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inode Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copy-on-write-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Copy-on-Write Mechanism
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Copy-on-Write Mechanism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cow-data-write-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        COW Data Write Path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cow-metadata-write-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        COW Metadata Write Path
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extent-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extent Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extent Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extent-allocation-tree-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extent Allocation Tree Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delayed-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delayed References
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snapshots-and-subvolumes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Snapshots and Subvolumes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Snapshots and Subvolumes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subvolume-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Subvolume Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference-counting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reference Counting
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raid-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        RAID Support
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RAID Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#raid-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        RAID Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compression" class="md-nav__link">
    <span class="md-ellipsis">
      
        Compression
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compression-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Compression Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-integrity-and-checksumming" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Integrity and Checksumming
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Integrity and Checksumming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checksumming-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Checksumming Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tree-logging-for-fast-fsync" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tree Logging for Fast Fsync
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tree Logging for Fast Fsync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tree-log-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tree Log Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-device-and-volume-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Device and Volume Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Device and Volume Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volume-management-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Volume Management Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zoned-device-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Zoned Device Support
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Zoned Device Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zoned-device-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Zoned Device Architecture
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Path
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I/O Path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#read-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        Read Path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        Write Path
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Transaction Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transaction Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transaction-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Transaction Lifecycle
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#block-groups-and-space-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Block Groups and Space Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Block Groups and Space Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#block-group-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Block Group Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quota-groups-qgroups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quota Groups (Qgroups)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quota Groups (Qgroups)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qgroup-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Qgroup Hierarchy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="btrfs-copy-on-write-filesystem">Btrfs Copy-on-Write Filesystem<a class="headerlink" href="#btrfs-copy-on-write-filesystem" title="Permanent link">&para;</a></h1>
<p>Relevant source files</p>
<ul>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/afs/callback.c">fs/afs/callback.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/accessors.h">fs/btrfs/accessors.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/backref.c">fs/btrfs/backref.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/bio.c">fs/btrfs/bio.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/bio.h">fs/btrfs/bio.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/block-group.c">fs/btrfs/block-group.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/block-group.h">fs/btrfs/block-group.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/btrfs_inode.h">fs/btrfs/btrfs_inode.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/compression.c">fs/btrfs/compression.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/compression.h">fs/btrfs/compression.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ctree.c">fs/btrfs/ctree.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/defrag.c">fs/btrfs/defrag.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/delayed-inode.c">fs/btrfs/delayed-inode.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/delayed-inode.h">fs/btrfs/delayed-inode.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/delayed-ref.c">fs/btrfs/delayed-ref.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/delayed-ref.h">fs/btrfs/delayed-ref.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/dev-replace.c">fs/btrfs/dev-replace.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/dir-item.c">fs/btrfs/dir-item.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/direct-io.c">fs/btrfs/direct-io.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.c">fs/btrfs/disk-io.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.h">fs/btrfs/disk-io.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent-tree.c">fs/btrfs/extent-tree.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent-tree.h">fs/btrfs/extent-tree.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c">fs/btrfs/extent_io.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.h">fs/btrfs/extent_io.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/file-item.c">fs/btrfs/file-item.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/file-item.h">fs/btrfs/file-item.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/file.c">fs/btrfs/file.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/free-space-cache.c">fs/btrfs/free-space-cache.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/free-space-cache.h">fs/btrfs/free-space-cache.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/free-space-tree.c">fs/btrfs/free-space-tree.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/fs.h">fs/btrfs/fs.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode-item.c">fs/btrfs/inode-item.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode.c">fs/btrfs/inode.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ioctl.c">fs/btrfs/ioctl.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/messages.c">fs/btrfs/messages.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/messages.h">fs/btrfs/messages.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/misc.h">fs/btrfs/misc.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ordered-data.c">fs/btrfs/ordered-data.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/qgroup.c">fs/btrfs/qgroup.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/raid-stripe-tree.c">fs/btrfs/raid-stripe-tree.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/raid56.c">fs/btrfs/raid56.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/raid56.h">fs/btrfs/raid56.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ref-verify.c">fs/btrfs/ref-verify.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/reflink.c">fs/btrfs/reflink.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/relocation.c">fs/btrfs/relocation.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/relocation.h">fs/btrfs/relocation.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/root-tree.c">fs/btrfs/root-tree.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/scrub.c">fs/btrfs/scrub.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/send.c">fs/btrfs/send.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/space-info.c">fs/btrfs/space-info.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/space-info.h">fs/btrfs/space-info.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/subpage.c">fs/btrfs/subpage.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/subpage.h">fs/btrfs/subpage.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/super.c">fs/btrfs/super.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/transaction.c">fs/btrfs/transaction.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-checker.c">fs/btrfs/tree-checker.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-log.c">fs/btrfs/tree-log.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-log.h">fs/btrfs/tree-log.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/volumes.c">fs/btrfs/volumes.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/volumes.h">fs/btrfs/volumes.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/xattr.c">fs/btrfs/xattr.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/zoned.c">fs/btrfs/zoned.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/include/uapi/linux/btrfs.h">include/uapi/linux/btrfs.h</a></li>
</ul>
<h2 id="purpose-and-scope">Purpose and Scope<a class="headerlink" href="#purpose-and-scope" title="Permanent link">&para;</a></h2>
<p>This document describes the Btrfs (B-tree filesystem) implementation in the Linux kernel, focusing on its copy-on-write (COW) architecture, B-tree-based storage structures, extent management, and advanced features including snapshots, RAID, compression, and data integrity mechanisms. Btrfs is designed as a modern filesystem with built-in volume management, checksumming, and support for advanced storage scenarios including zoned devices.</p>
<p>For information about the VFS layer that Btrfs integrates with, see <a href="/torvalds/linux/5.2-btrfs-copy-on-write-filesystem">Virtual File System Layer</a>. For flash-optimized filesystems, see <a href="#5.3.1">F2FS Flash Filesystem</a>. For layered filesystems that can use Btrfs as backing storage, see <a href="#5.3.3">OverlayFS and Layered Filesystems</a>.</p>
<h2 id="architecture-overview">Architecture Overview<a class="headerlink" href="#architecture-overview" title="Permanent link">&para;</a></h2>
<p>Btrfs implements a copy-on-write B-tree filesystem with integrated volume management. The architecture consists of multiple interconnected B-trees managing different aspects of the filesystem, with all modifications using COW semantics.</p>
<h3 id="high-level-component-structure">High-Level Component Structure<a class="headerlink" href="#high-level-component-structure" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    VFS["VFS Layerfile_operationsinode_operations"]
    Inode["Inode Layerfs/btrfs/inode.cstruct btrfs_inodebtrfs_file_operations"]
    CTree["B-tree Managementfs/btrfs/ctree.cbtrfs_search_slot()struct btrfs_path"]
    ExtentTree["Extent Treefs/btrfs/extent-tree.cbtrfs_reserve_extent()__btrfs_free_extent()"]
    TreeLog["Tree Logfs/btrfs/tree-log.cbtrfs_log_inode()btrfs_sync_log()"]
    ExtentIO["Extent I/Ofs/btrfs/extent_io.cstruct extent_buffersubmit_one_bio()"]
    Bio["Bio Layerfs/btrfs/bio.cstruct btrfs_biobtrfs_submit_bbio()"]
    Compression["Compressionfs/btrfs/compression.cbtrfs_compress_folios()compress_file_range()"]
    Volumes["Volume Managerfs/btrfs/volumes.cstruct btrfs_io_contextbtrfs_map_bio()"]
    Snapshot["Snapshotsbtrfs_copy_root()COW subvolumes"]
    RAID["RAID Enginefs/btrfs/raid56.cstruct btrfs_raid_bioRAID 0/1/5/6/10"]
    QGroup["Quota Groupsfs/btrfs/qgroup.cstruct btrfs_qgroup"]
    Zoned["Zoned Devicefs/btrfs/zoned.cbtrfs_zoned_device_info"]
    DiskIO["Disk I/Ofs/btrfs/disk-io.cread_tree_block()btree_csum_one_bio()"]
    BlockGroup["Block Groupsfs/btrfs/block-group.cstruct btrfs_block_group"]

    VFS --&gt; Inode
    Inode --&gt; CTree
    Inode --&gt; ExtentIO
    Inode --&gt; TreeLog
    CTree --&gt; ExtentTree
    ExtentIO --&gt; Bio
    ExtentIO --&gt; Compression
    Bio --&gt; Volumes
    Volumes --&gt; RAID
    Volumes --&gt; Zoned
    ExtentTree --&gt; BlockGroup
    BlockGroup --&gt; DiskIO
    TreeLog --&gt; CTree
    Snapshot --&gt; CTree
    QGroup --&gt; ExtentTree</code></pre>
Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode.c#L1-L100">fs/btrfs/inode.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ctree.c#L1-L50">fs/btrfs/ctree.c1-50</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent-tree.c#L1-L50">fs/btrfs/extent-tree.c1-50</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c#L1-L50">fs/btrfs/extent_io.c1-50</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/bio.c#L1-L50">fs/btrfs/bio.c1-50</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-log.c#L1-L100">fs/btrfs/tree-log.c1-100</a></p>
<h2 id="core-data-structures">Core Data Structures<a class="headerlink" href="#core-data-structures" title="Permanent link">&para;</a></h2>
<h3 id="b-tree-management-ctree">B-tree Management (ctree)<a class="headerlink" href="#b-tree-management-ctree" title="Permanent link">&para;</a></h3>
<p>Btrfs uses multiple B-trees to organize filesystem metadata. The central tree structure is managed by <code>ctree.c</code>, which provides search, insertion, and deletion operations.</p>
<p><strong>Key B-tree Types:</strong></p>
<table>
<thead>
<tr>
<th>Tree Type</th>
<th>Purpose</th>
<th>Root Location</th>
</tr>
</thead>
<tbody>
<tr>
<td>FS Tree</td>
<td>File and directory metadata</td>
<td>Per-subvolume</td>
</tr>
<tr>
<td>Extent Tree</td>
<td>Extent allocation tracking</td>
<td>Global</td>
</tr>
<tr>
<td>Chunk Tree</td>
<td>Device extent mapping</td>
<td>Global</td>
</tr>
<tr>
<td>Device Tree</td>
<td>Device information</td>
<td>Global</td>
</tr>
<tr>
<td>Root Tree</td>
<td>Subvolume root pointers</td>
<td>Global</td>
</tr>
<tr>
<td>Log Tree</td>
<td>Fast fsync operations</td>
<td>Per-subvolume</td>
</tr>
<tr>
<td>Checksum Tree</td>
<td>Data checksums</td>
<td>Global</td>
</tr>
</tbody>
</table>
<p><strong>Primary B-tree Operations:</strong></p>
<p><pre class="mermaid"><code>flowchart TD
    Search["btrfs_search_slot()fs/btrfs/ctree.c"]
    Insert["btrfs_insert_empty_item()fs/btrfs/ctree.c"]
    Delete["btrfs_del_item()fs/btrfs/ctree.c"]
    Split["split_leaf()split_node()fs/btrfs/ctree.c:29-40"]
    COW["__btrfs_cow_block()ctree.cCopy-on-write node"]
    ExtentBuffer["struct extent_bufferextent_io.cIn-memory tree node"]
    BtrfsPath["struct btrfs_pathTree traversal state"]

    Search --&gt; Split
    Insert --&gt; Split
    Insert --&gt; COW
    Delete --&gt; Search
    Search --&gt; ExtentBuffer
    Insert --&gt; ExtentBuffer
    Delete --&gt; ExtentBuffer
    Search --&gt; BtrfsPath
    Insert --&gt; BtrfsPath
    Delete --&gt; BtrfsPath</code></pre>
The <code>struct btrfs_path</code> is used for tree traversal, maintaining locks and references to tree nodes at each level:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>struct btrfs_path
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>├── nodes[BTRFS_MAX_LEVEL] - extent_buffer pointers for each tree level
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>├── slots[BTRFS_MAX_LEVEL] - current slot in each node
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>├── locks[BTRFS_MAX_LEVEL] - lock state (read/write) for each level
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>└── Functions: btrfs_alloc_path(), btrfs_free_path(), btrfs_release_path()
</code></pre></div>
Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ctree.c#L27-L175">fs/btrfs/ctree.c27-175</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ctree.c#L138-L153">fs/btrfs/ctree.c138-153</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ctree.c#L160-L175">fs/btrfs/ctree.c160-175</a></p>
<h3 id="extent-buffers">Extent Buffers<a class="headerlink" href="#extent-buffers" title="Permanent link">&para;</a></h3>
<p>Extent buffers (<code>struct extent_buffer</code> in <code>extent_io.c</code>) represent in-memory tree nodes and are the fundamental unit for B-tree operations. They are managed by the extent I/O subsystem.</p>
<p><pre class="mermaid"><code>flowchart TD
    EB["struct extent_bufferfs/btrfs/extent_io.c:222-241"]
    Folios["folios[]Page cache storagefolio_size, folio_shift"]
    Metadata["Tree Metadatastart (bytenr)len (nodesize)btrfs_header_level()btrfs_header_generation()"]
    Lock["Lockingread_lock, write_lockspinning_readers/writers"]
    Ref["Reference Countingrefcount_t refsatomic operations"]
    Cache["extent_buffer_cachekmem_cacheextent_buffer_init_cachep()"]
    ReadOp["btrfs_read_extent_buffer()fs/btrfs/disk-io.c:223-262read_extent_buffer_pages()"]
    WriteOp["btree_csum_one_bio()fs/btrfs/disk-io.c:267-338Checksum tree block"]
    Validate["btrfs_validate_extent_buffer()fs/btrfs/disk-io.c:366-476csum_tree_block()btrfs_check_leaf/node()"]
    Find["find_extent_buffer()Lookup in radix tree"]
    Alloc["alloc_extent_buffer()fs/btrfs/disk-io.c:607-644Allocate new buffer"]

    EB --&gt; Folios
    EB --&gt; Metadata
    EB --&gt; Lock
    EB --&gt; Ref
    Cache --&gt; EB
    EB --&gt; ReadOp
    EB --&gt; WriteOp
    ReadOp --&gt; Validate
    Cache --&gt; Find
    Cache --&gt; Alloc</code></pre>
Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c#L222-L241">fs/btrfs/extent_io.c222-241</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.c#L223-L262">fs/btrfs/disk-io.c223-262</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.c#L267-L338">fs/btrfs/disk-io.c267-338</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.c#L366-L476">fs/btrfs/disk-io.c366-476</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.c#L607-L644">fs/btrfs/disk-io.c607-644</a></p>
<h3 id="inode-structure">Inode Structure<a class="headerlink" href="#inode-structure" title="Permanent link">&para;</a></h3>
<p>The <code>struct btrfs_inode</code> (defined in <code>fs/btrfs/btrfs_inode.h</code>) extends the VFS inode with Btrfs-specific metadata:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>struct btrfs_inode (btrfs_inode.h:45-350)
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>├── vfs_inode - Standard VFS inode (struct inode)
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>├── root - struct btrfs_root pointer to containing subvolume
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>├── io_tree - struct extent_io_tree for extent state tracking
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>│   ├── EXTENT_DELALLOC - Delayed allocation ranges
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>│   ├── EXTENT_LOCKED - Locked ranges during I/O
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>│   ├── EXTENT_UPTODATE - Cached data
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>│   └── EXTENT_DIRTY - Dirty ranges
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>├── file_extent_tree - struct extent_io_tree for file extent mapping
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>├── ordered_tree - struct rb_root for ordered extent tracking
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>├── disk_i_size - u64 size on disk (may lag i_size during writes)
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>├── flags - u32 inode flags:
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>│   ├── BTRFS_INODE_NODATACOW - Don&#39;t COW data
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>│   ├── BTRFS_INODE_COMPRESS - Enable compression
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>│   ├── BTRFS_INODE_NOCOMPRESS - Disable compression
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>│   ├── BTRFS_INODE_PREALLOC - Preallocated extents
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>│   └── BTRFS_INODE_SYNC - Synchronous I/O
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>├── delalloc_bytes - u64 bytes in delalloc state
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>├── csum_bytes - u64 bytes needing checksum
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>├── defrag_compress - Compression for defrag
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>└── ordered_extents - List of struct btrfs_ordered_extent
</code></pre></div>
Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/btrfs_inode.h#L1-L350">fs/btrfs/btrfs_inode.h1-350</a></p>
<h2 id="copy-on-write-mechanism">Copy-on-Write Mechanism<a class="headerlink" href="#copy-on-write-mechanism" title="Permanent link">&para;</a></h2>
<p>Btrfs implements copy-on-write at multiple levels: data extents, metadata blocks, and entire B-tree nodes. This enables snapshots, crash recovery, and efficient cloning.</p>
<h3 id="cow-data-write-path">COW Data Write Path<a class="headerlink" href="#cow-data-write-path" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    Write["User write()file.c"]
    Dirty["btrfs_dirty_folio()file.c:70-120"]
    Delalloc["btrfs_set_extent_delalloc()Mark range as delalloc"]
    Writeback["Writeback triggered"]
    CowRange["cow_file_range()or run_delalloc_cow()"]
    ReserveExtent["btrfs_reserve_extent()extent-tree.cAllocate new extent"]
    CreateOrdered["btrfs_alloc_ordered_extent()Track ordered write"]
    SubmitBio["btrfs_submit_bbio()Submit I/O"]
    Finish["btrfs_finish_ordered_extent()Update metadata after I/O"]
    UpdateExtentTree["Insert file extent itemUpdate extent tree"]

    Write --&gt; Dirty
    Dirty --&gt; Delalloc
    Delalloc --&gt; Writeback
    Writeback --&gt; CowRange
    CowRange --&gt; ReserveExtent
    ReserveExtent --&gt; CreateOrdered
    CreateOrdered --&gt; SubmitBio
    SubmitBio --&gt; Finish
    Finish --&gt; UpdateExtentTree</code></pre>
<strong>COW Flow for File Data:</strong></p>
<ol>
<li><strong>Delalloc Phase</strong> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode.c#L77-L120">fs/btrfs/inode.c77-120</a> - User writes mark pages dirty and set the <code>EXTENT_DELALLOC</code> bit in the <code>io_tree</code></li>
<li><strong>Extent Reservation</strong> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent-tree.c">fs/btrfs/extent-tree.c</a> - During writeback, allocate new extents without modifying old data</li>
<li><strong>Ordered Extent Creation</strong> - Track the write with <code>btrfs_ordered_extent</code> to maintain consistency</li>
<li><strong>Bio Submission</strong> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/bio.c">fs/btrfs/bio.c</a> - Write data to new location</li>
<li><strong>Metadata Update</strong> - After successful write, insert new file extent item in transaction</li>
</ol>
<h3 id="cow-metadata-write-path">COW Metadata Write Path<a class="headerlink" href="#cow-metadata-write-path" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    ModifyTree["Modify B-treebtrfs_search_slot(trans, root, key, path, 1, 1)fs/btrfs/ctree.cins_len=1, cow=1"]
    CheckCOW["Check if COW neededtree_mod_log_needs_log()"]
    COWNode["__btrfs_cow_block()fs/btrfs/ctree.c:242-292Copy-on-write tree node"]
    AllocTree["btrfs_alloc_tree_block()fs/btrfs/extent-tree.cAllocate new tree blockReserve extent"]
    CopyContent["copy_extent_buffer_full()Copy entire node contentto new location"]
    UpdateHeader["btrfs_set_header_bytenr()btrfs_set_header_generation()Update metadata"]
    UpdateParent["Update parent nodePoint to new bytenrbtrfs_set_node_blockptr()"]
    OldNode["Old node remainsReferenced by snapshotsPrevious transactions"]
    AddDelayedRef["btrfs_add_delayed_extent_op()fs/btrfs/delayed-ref.cQueue old extent free"]
    PinExtent["btrfs_pin_extent()Pin until transaction commits"]
    SetDirty["btrfs_mark_buffer_dirty()Mark new node dirtyfor writeback"]

    ModifyTree --&gt; CheckCOW
    CheckCOW --&gt; COWNode
    COWNode --&gt; AllocTree
    AllocTree --&gt; CopyContent
    CopyContent --&gt; UpdateHeader
    UpdateHeader --&gt; UpdateParent
    UpdateParent --&gt; OldNode
    OldNode --&gt; AddDelayedRef
    AddDelayedRef --&gt; PinExtent
    UpdateHeader --&gt; SetDirty</code></pre>
The COW mechanism for metadata ensures that:</p>
<ul>
<li>Snapshots see a consistent point-in-time view via unchanged old tree blocks</li>
<li>Crash recovery can roll back to last committed transaction stored in superblock</li>
<li>Concurrent readers can access old versions while writers modify new copies</li>
<li>Old extents are freed only after new transaction commits via delayed references</li>
</ul>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ctree.c#L242-L292">fs/btrfs/ctree.c242-292</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent-tree.c#L1-L100">fs/btrfs/extent-tree.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/delayed-ref.c#L1-L50">fs/btrfs/delayed-ref.c1-50</a></p>
<h2 id="extent-management">Extent Management<a class="headerlink" href="#extent-management" title="Permanent link">&para;</a></h2>
<p>Btrfs manages disk space through extents tracked in the extent allocation tree. Each extent represents a contiguous range of disk blocks.</p>
<h3 id="extent-allocation-tree-structure">Extent Allocation Tree Structure<a class="headerlink" href="#extent-allocation-tree-structure" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    ExtentTree["Extent TreeBTRFS_EXTENT_TREE_OBJECTID"]
    ExtentItem["EXTENT_ITEMextent allocation record"]
    BackrefItem["Backref itemsEXTENT_DATA_REFSHARED_BLOCK_REF"]
    PhysAddr["Physical extentbytenr, num_bytes"]
    RefCount["Reference countIncremented by snapshots"]
    Flags["FlagsDATA, METADATA, TREE_BLOCK"]
    DataRef["Data backrefroot, objectid, offset"]
    SharedRef["Shared backrefparent tree block"]

    ExtentTree --&gt; ExtentItem
    ExtentItem --&gt; BackrefItem
    ExtentItem --&gt; PhysAddr
    ExtentItem --&gt; RefCount
    ExtentItem --&gt; Flags
    BackrefItem --&gt; DataRef
    BackrefItem --&gt; SharedRef</code></pre>
<strong>Extent Allocation Flow:</strong></p>
<p>The function <code>btrfs_reserve_extent()</code> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent-tree.c">fs/btrfs/extent-tree.c</a> allocates space:</p>
<ol>
<li>Select appropriate block group based on data/metadata type and RAID profile</li>
<li>Search free space in block group using either free space cache or free space tree</li>
<li>Reserve the extent in memory structures</li>
<li>Insert extent item into extent tree during transaction commit</li>
</ol>
<p><strong>File Extent Items:</strong></p>
<p>File data extents are tracked with <code>EXTENT_DATA</code> items in the FS tree:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>File Extent Item
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>├── disk_bytenr - Physical location (or 0 for holes/inline)
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>├── disk_num_bytes - Size of extent on disk
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>├── offset - Offset within disk extent (for shared extents)
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>├── num_bytes - Logical size in file
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>├── compression - Compression type (NONE, ZLIB, LZO, ZSTD)
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>└── encryption - Encryption type (currently unused)
</code></pre></div>
Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent-tree.c#L1-L100">fs/btrfs/extent-tree.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/file.c#L137-L248">fs/btrfs/file.c137-248</a></p>
<h3 id="delayed-references">Delayed References<a class="headerlink" href="#delayed-references" title="Permanent link">&para;</a></h3>
<p>Btrfs uses delayed references to batch extent tree updates for efficiency:</p>
<p><pre class="mermaid"><code>flowchart TD
    Operation["File operationwrite, snapshot, etc."]
    AddDelayedRef["btrfs_add_delayed_ref()delayed-ref.c"]
    DelayedRefHead["delayed_ref_headPer-extent head node"]
    DelayedRefNode["delayed_ref_nodeIndividual ref update"]
    RunDelayed["__btrfs_run_delayed_refs()Process queued updates"]
    UpdateExtent["Update extent tree_btrfs_free_extent()alloc_reserved*()"]
    Transaction["Transaction commit"]

    Operation --&gt; AddDelayedRef
    AddDelayedRef --&gt; DelayedRefHead
    DelayedRefHead --&gt; DelayedRefNode
    Transaction --&gt; RunDelayed
    RunDelayed --&gt; UpdateExtent</code></pre>
Delayed references accumulate reference count changes (+1 for new refs, -1 for deletions) and are applied in batches during transaction commit, reducing B-tree modifications.</p>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/delayed-ref.c#L1-L50">fs/btrfs/delayed-ref.c1-50</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent-tree.c#L48-L61">fs/btrfs/extent-tree.c48-61</a></p>
<h2 id="snapshots-and-subvolumes">Snapshots and Subvolumes<a class="headerlink" href="#snapshots-and-subvolumes" title="Permanent link">&para;</a></h2>
<p>Snapshots and subvolumes are core features enabled by COW. Each subvolume is an independent B-tree namespace with its own root.</p>
<h3 id="subvolume-structure">Subvolume Structure<a class="headerlink" href="#subvolume-structure" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    RootTree["Root TreeBTRFS_ROOT_TREE_OBJECTID"]
    RootItem1["Root Itemsubvolume 1"]
    RootItem2["Root Itemsubvolume 2"]
    RootItem3["Root Itemsnapshot of subvol 1"]
    FSTree1["FS TreeFiles and dirs"]
    FSTree2["FS TreeFiles and dirs"]
    FSTree3["FS TreeShared with subvol 1"]
    SharedExtent["Shared ExtentsReference counted"]

    RootTree --&gt; RootItem1
    RootTree --&gt; RootItem2
    RootTree --&gt; RootItem3
    RootItem1 --&gt; FSTree1
    RootItem2 --&gt; FSTree2
    RootItem3 --&gt; FSTree3
    FSTree1 --&gt; SharedExtent
    FSTree3 --&gt; SharedExtent</code></pre>
<strong>Snapshot Creation:</strong></p>
<p>Creating a snapshot involves:</p>
<ol>
<li>COW the root tree block of source subvolume</li>
<li>Create new root item pointing to the COW'd tree</li>
<li>Increment reference counts on all shared extents (via delayed refs)</li>
<li>Both subvolumes now share the same tree blocks and extents</li>
</ol>
<p>All subsequent modifications use COW, so the snapshot remains unchanged while the original subvolume evolves.</p>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ioctl.c#L1-L100">fs/btrfs/ioctl.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ctree.c#L177-L186">fs/btrfs/ctree.c177-186</a></p>
<h3 id="reference-counting">Reference Counting<a class="headerlink" href="#reference-counting" title="Permanent link">&para;</a></h3>
<p>Btrfs maintains reference counts for extents in the extent tree. When an extent is referenced by multiple snapshots, its reference count reflects this:</p>
<ul>
<li><strong>Simple reference</strong>: Single owner, ref_count = 1</li>
<li><strong>Shared reference</strong>: Multiple owners (snapshots), ref_count &gt; 1</li>
<li><strong>Backref walking</strong>: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/backref.c">fs/btrfs/backref.c</a> provides functions to find all references to an extent</li>
</ul>
<h2 id="raid-support">RAID Support<a class="headerlink" href="#raid-support" title="Permanent link">&para;</a></h2>
<p>Btrfs implements software RAID with support for RAID 0, 1, 10, 5, and 6. The RAID layer is integrated into the volume manager.</p>
<h3 id="raid-architecture">RAID Architecture<a class="headerlink" href="#raid-architecture" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    FileWrite["File write operation"]
    BioSubmit["btrfs_submit_bbio()bio.c"]
    MapBio["btrfs_map_bio()volumes.cMap logical to physical"]
    ChunkMap["Chunk Mappingbtrfs_chunk_map"]
    Profile["RAID ProfileRAID0/1/10/5/6"]
    RAID0["RAID 0Stripe across devices"]
    RAID1["RAID 1Mirror to N devices"]
    RAID56["RAID 5/6Parity stripes"]
    RBIO["btrfs_raid_bioraid56.cRAID 5/6 I/O structure"]
    ParityCalc["Parity calculationasync workers"]
    DeviceIO["Device I/Oto physical devices"]

    FileWrite --&gt; BioSubmit
    BioSubmit --&gt; MapBio
    MapBio --&gt; ChunkMap
    ChunkMap --&gt; Profile
    Profile --&gt; RAID0
    Profile --&gt; RAID1
    Profile --&gt; RAID56
    RAID56 --&gt; RBIO
    RBIO --&gt; ParityCalc
    RAID0 --&gt; DeviceIO
    RAID1 --&gt; DeviceIO
    ParityCalc --&gt; DeviceIO</code></pre>
<strong>RAID Profiles:</strong></p>
<table>
<thead>
<tr>
<th>Profile</th>
<th>Redundancy</th>
<th>Min Devices</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>RAID0</td>
<td>None</td>
<td>2</td>
<td>Striping for performance</td>
</tr>
<tr>
<td>RAID1</td>
<td>1 copy</td>
<td>2</td>
<td>Mirroring (2-way or N-way)</td>
</tr>
<tr>
<td>RAID10</td>
<td>1 copy</td>
<td>4</td>
<td>Striped mirrors</td>
</tr>
<tr>
<td>RAID5</td>
<td>1 parity</td>
<td>3</td>
<td>Single parity stripe</td>
</tr>
<tr>
<td>RAID6</td>
<td>2 parity</td>
<td>4</td>
<td>Double parity stripe</td>
</tr>
</tbody>
</table>
<p>RAID 5/6 implementation is in <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/raid56.c#L1-L150">fs/btrfs/raid56.c1-150</a> with support for:</p>
<ul>
<li>Parity calculation using CPU or async workers</li>
<li>Read-modify-write for partial stripe updates</li>
<li>Reconstruction on device failure</li>
<li>Scrubbing to verify parity correctness</li>
</ul>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/volumes.c#L1-L100">fs/btrfs/volumes.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/raid56.c#L1-L150">fs/btrfs/raid56.c1-150</a></p>
<h2 id="compression">Compression<a class="headerlink" href="#compression" title="Permanent link">&para;</a></h2>
<p>Btrfs supports transparent compression of file data with multiple algorithms. Compression is applied per extent during writeback.</p>
<h3 id="compression-flow">Compression Flow<a class="headerlink" href="#compression-flow" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    Write["Writeback beginscompress_file_range()fs/btrfs/inode.c:879-1074async_chunk work"]
    NeedCompress["inode_need_compress()fs/btrfs/inode.c:808-835Check mount opts, props, flags"]
    CompressType["Select compressionBTRFS_COMPRESS_ZLIB=1BTRFS_COMPRESS_LZO=2BTRFS_COMPRESS_ZSTD=3From inode-&gt;defrag_compress or fs_info"]
    CompressLevel["Compression Levelfs_info-&gt;compress_levelinode-&gt;defrag_compress_level"]
    CompressFolios["btrfs_compress_folios()fs/btrfs/compression.cDispatch to zlib_compress_folios()or lzo_compress_folios()or zstd_compress_folios()"]
    CheckRatio["Check compression ratioif (total_compressed + blocksize &gt; total_in)goto mark_incompressible"]
    Inline["Try inline extentcow_file_range_inline()fs/btrfs/inode.c:706-753can_cow_file_range_inline()"]
    Regular["add_async_extent()Create compressed extentSet compress_type"]
    Fallback["mark_incompressible:Set BTRFS_INODE_NOCOMPRESSadd_async_extent(NONE)"]
    WriteExtent["submit_one_async_extent()fs/btrfs/inode.c:1121-1231btrfs_alloc_ordered_extent()Set BTRFS_ORDERED_COMPRESSED"]

    Write --&gt; NeedCompress
    NeedCompress --&gt; CompressType
    CompressType --&gt; CompressLevel
    CompressLevel --&gt; CompressFolios
    CompressFolios --&gt; CheckRatio
    CheckRatio --&gt; Inline
    CheckRatio --&gt; Regular
    CheckRatio --&gt; Fallback
    Inline --&gt; WriteExtent
    Regular --&gt; WriteExtent</code></pre>
<strong>Compression Algorithms:</strong></p>
<p>Btrfs supports multiple compression algorithms <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/compression.c#L1-L100">fs/btrfs/compression.c1-100</a>:</p>
<ul>
<li><strong>ZLIB</strong> (<code>BTRFS_COMPRESS_ZLIB</code>): Default, balanced compression ratio using deflate</li>
<li><strong>LZO</strong> (<code>BTRFS_COMPRESS_LZO</code>): Fast compression with lower ratio, suitable for CPU-constrained systems</li>
<li><strong>ZSTD</strong> (<code>BTRFS_COMPRESS_ZSTD</code>): Modern algorithm with configurable levels (1-15), best balance of speed and ratio</li>
</ul>
<p>Compression is controlled by:</p>
<ol>
<li>Mount options: <code>compress=zlib</code>, <code>compress=lzo</code>, <code>compress=zstd:level</code></li>
<li>Per-file properties: <code>btrfs.compression</code> extended attribute</li>
<li>Inode flags: <code>BTRFS_INODE_COMPRESS</code>, <code>BTRFS_INODE_NOCOMPRESS</code> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/btrfs_inode.h">fs/btrfs/btrfs_inode.h</a></li>
<li>Defrag settings: <code>inode-&gt;defrag_compress</code> and <code>inode-&gt;defrag_compress_level</code></li>
</ol>
<p><strong>Decompression on Read:</strong></p>
<p>Compressed extents are decompressed during read via <code>btrfs_submit_compressed_read()</code> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/compression.c">fs/btrfs/compression.c</a> which:</p>
<ol>
<li>Allocates decompression pages</li>
<li>Submits read bio for compressed data</li>
<li>Queues async decompression work on completion</li>
<li>Copies decompressed data to page cache</li>
</ol>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode.c#L808-L835">fs/btrfs/inode.c808-835</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode.c#L879-L1074">fs/btrfs/inode.c879-1074</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode.c#L706-L753">fs/btrfs/inode.c706-753</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode.c#L1121-L1231">fs/btrfs/inode.c1121-1231</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/compression.c#L1-L100">fs/btrfs/compression.c1-100</a></p>
<h2 id="data-integrity-and-checksumming">Data Integrity and Checksumming<a class="headerlink" href="#data-integrity-and-checksumming" title="Permanent link">&para;</a></h2>
<p>Btrfs checksums all data and metadata to detect corruption. Checksums are stored separately from data in the checksum tree.</p>
<h3 id="checksumming-architecture">Checksumming Architecture<a class="headerlink" href="#checksumming-architecture" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    Write["Write I/O"]
    CalcCsum["Calculate checksumbtrfs_csum_data()"]
    StoreCsum["Store in csum treeBTRFS_CSUM_ITEM_KEY"]
    CsumTree["Checksum TreePer-filesystem global tree"]
    CsumItem["Checksum ItemCovers 1+ sectors"]
    Read["Read I/O"]
    LookupCsum["btrfs_lookup_bio_sums()file-item.c"]
    VerifyCsum["Verify checksumin end_bbio_data_read()"]
    Match["Checksum matches"]
    Mismatch["Checksum mismatch"]
    ReturnData["Return data to user"]
    TryRepair["Try alternate mirrorbtrfs_repair_io_failure()"]
    PrintError["btrfs_print_data_csum_error()inode.c:310-339"]

    Write --&gt; CalcCsum
    CalcCsum --&gt; StoreCsum
    StoreCsum --&gt; CsumTree
    CsumTree --&gt; CsumItem
    Read --&gt; LookupCsum
    LookupCsum --&gt; VerifyCsum
    VerifyCsum --&gt; Match
    VerifyCsum --&gt; Mismatch
    Match --&gt; ReturnData
    Mismatch --&gt; TryRepair
    TryRepair --&gt; PrintError</code></pre>
<strong>Checksum Types:</strong></p>
<p>Btrfs supports multiple checksum algorithms configured at filesystem creation:</p>
<ul>
<li>CRC32C (default)</li>
<li>XXHASH</li>
<li>SHA256</li>
<li>BLAKE2</li>
</ul>
<p><strong>Metadata Checksumming:</strong></p>
<p>Tree blocks are checksummed in <code>btree_csum_one_bio()</code> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.c#L267-L338">fs/btrfs/disk-io.c267-338</a> before write. On read, <code>btrfs_validate_extent_buffer()</code> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.c#L366-L476">fs/btrfs/disk-io.c366-476</a> verifies the checksum.</p>
<p><strong>Error Detection and Repair:</strong></p>
<p>When a checksum mismatch is detected:</p>
<ol>
<li>Try reading from alternate mirror (RAID1/10)</li>
<li>If successful, repair the corrupted copy via <code>btrfs_repair_io_failure()</code> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.c#L182-L214">fs/btrfs/disk-io.c182-214</a></li>
<li>If all copies are corrupt, return error to user</li>
</ol>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.c#L74-L112">fs/btrfs/disk-io.c74-112</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/disk-io.c#L267-L338">fs/btrfs/disk-io.c267-338</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode.c#L310-L339">fs/btrfs/inode.c310-339</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c#L574-L622">fs/btrfs/extent_io.c574-622</a></p>
<h2 id="tree-logging-for-fast-fsync">Tree Logging for Fast Fsync<a class="headerlink" href="#tree-logging-for-fast-fsync" title="Permanent link">&para;</a></h2>
<p>Btrfs uses a per-subvolume log tree to optimize <code>fsync()</code> operations, avoiding full transaction commits for most cases.</p>
<h3 id="tree-log-architecture">Tree Log Architecture<a class="headerlink" href="#tree-log-architecture" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    Fsync["fsync(fd)"]
    LogInode["btrfs_log_inode()tree-log.c:228-231"]
    StartLog["start_log_trans()tree-log.c:287-368Create/join log tree"]
    LogTree["Log TreePer-subvolume temporary tree"]
    LogItems["Copy modified itemsto log tree"]
    LogExtents["Log file extent items"]
    LogInodeItem["Log inode item"]
    LogDirItems["Log directory items"]
    SyncLog["btrfs_sync_log()Write log tree to disk"]
    LogRoot["Log Root TreeGlobal tree tracking all log trees"]
    Commit["Wait for log writeFast compared to full commit"]

    Fsync --&gt; LogInode
    LogInode --&gt; StartLog
    StartLog --&gt; LogTree
    LogInode --&gt; LogItems
    LogItems --&gt; LogTree
    LogItems --&gt; LogExtents
    LogItems --&gt; LogInodeItem
    LogItems --&gt; LogDirItems
    LogTree --&gt; SyncLog
    SyncLog --&gt; LogRoot
    SyncLog --&gt; Commit</code></pre>
<strong>Log Replay on Mount:</strong></p>
<p>After a crash, <code>btrfs_recover_log_trees()</code> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-log.c">fs/btrfs/tree-log.c</a> replays logged operations:</p>
<ol>
<li><strong>PIN stage</strong> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-log.c#L99-L104">fs/btrfs/tree-log.c99-104</a> - Pin logged extents to prevent reuse</li>
<li><strong>REPLAY_INODES stage</strong> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-log.c#L101-L101">fs/btrfs/tree-log.c101</a> - Recreate inodes</li>
<li><strong>REPLAY_DIR_INDEX stage</strong> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-log.c#L102-L102">fs/btrfs/tree-log.c102</a> - Recreate directory entries</li>
<li><strong>REPLAY_ALL stage</strong> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-log.c#L103-L103">fs/btrfs/tree-log.c103</a> - Apply all remaining changes</li>
</ol>
<p>The log tree is designed to be minimal - only logging what's necessary for crash consistency, making fsync significantly faster than committing the entire filesystem transaction.</p>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-log.c#L1-L258">fs/btrfs/tree-log.c1-258</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/tree-log.c#L287-L368">fs/btrfs/tree-log.c287-368</a></p>
<h2 id="multi-device-and-volume-management">Multi-Device and Volume Management<a class="headerlink" href="#multi-device-and-volume-management" title="Permanent link">&para;</a></h2>
<p>Btrfs includes integrated volume management, allowing multiple devices to be combined into a single filesystem with various RAID profiles.</p>
<h3 id="volume-management-structure">Volume Management Structure<a class="headerlink" href="#volume-management-structure" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    FSInfo["btrfs_fs_infoPer-filesystem state"]
    FSDevices["btrfs_fs_devicesvolumes.cDevice set"]
    Device1["btrfs_deviceIndividual device"]
    Device2["btrfs_device"]
    Device3["btrfs_device"]
    ChunkTree["Chunk TreeLogical to physical mapping"]
    ChunkItem["Chunk ItemLogical range mapping"]
    StripeInfo["Stripes[]Physical device + offset"]
    DevExtent["Device Extent TreePhysical space allocation"]

    FSInfo --&gt; FSDevices
    FSDevices --&gt; Device1
    FSDevices --&gt; Device2
    FSDevices --&gt; Device3
    ChunkTree --&gt; ChunkItem
    ChunkItem --&gt; StripeInfo
    StripeInfo --&gt; Device1
    StripeInfo --&gt; Device2
    StripeInfo --&gt; Device3
    Device1 --&gt; DevExtent
    Device2 --&gt; DevExtent
    Device3 --&gt; DevExtent</code></pre>
<strong>Chunk Allocation:</strong></p>
<p>Chunks are large contiguous allocations (typically 1GB for data, 256MB for metadata) that map logical addresses to physical device locations:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>btrfs_chunk_map
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>├── start - Logical address
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>├── length - Chunk size
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>├── type - DATA, METADATA, or SYSTEM + RAID profile
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>├── num_stripes - Number of stripes in chunk
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>└── stripes[] - Array of (device, offset) pairs
</code></pre></div>
The function <code>btrfs_map_block()</code> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/volumes.c">fs/btrfs/volumes.c</a> converts logical addresses to physical device locations using chunk mappings.</p>
<p><strong>Device Operations:</strong></p>
<ul>
<li><strong>Add device</strong>: Extends filesystem capacity</li>
<li><strong>Remove device</strong>: Relocates data and rebalances</li>
<li><strong>Replace device</strong>: For failing drive replacement</li>
<li><strong>Resize</strong>: Grow or shrink filesystem on device</li>
</ul>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/volumes.c#L1-L100">fs/btrfs/volumes.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/volumes.c#L37-L96">fs/btrfs/volumes.c37-96</a></p>
<h2 id="zoned-device-support">Zoned Device Support<a class="headerlink" href="#zoned-device-support" title="Permanent link">&para;</a></h2>
<p>Btrfs supports zoned block devices (ZBC/ZNS) which have sequential write constraints. The zoned mode ensures all writes are sequential within zones.</p>
<h3 id="zoned-device-architecture">Zoned Device Architecture<a class="headerlink" href="#zoned-device-architecture" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    ZonedFS["Zoned Btrfs Filesystembtrfs_is_zoned()"]
    DeviceInfo["btrfs_zoned_device_infozoned.c:356-605"]
    ZoneSize["zone_sizeFixed zone size"]
    ZoneBitmap["Zone bitmapsseq_zones, empty_zones, active_zones"]
    MaxActive["max_active_zonesDevice limit"]
    BlockGroup["Block GroupAligned to zone boundaries"]
    SeqWrite["Sequential WriteEnforced by zone WP"]
    ZoneFinish["Zone Finishdo_zone_finish()zoned.c:71"]
    Superblock["Superblock ZonesSpecial zone pairszoned.c:30-45"]
    SBZone0["SB Zone 0 (primary)"]
    SBZone1["SB Zone 1 (first copy)"]
    SBZone2["SB Zone 2 (second copy)"]

    ZonedFS --&gt; DeviceInfo
    DeviceInfo --&gt; ZoneSize
    DeviceInfo --&gt; ZoneBitmap
    DeviceInfo --&gt; MaxActive
    ZonedFS --&gt; BlockGroup
    BlockGroup --&gt; SeqWrite
    BlockGroup --&gt; ZoneFinish
    ZonedFS --&gt; Superblock
    Superblock --&gt; SBZone0
    Superblock --&gt; SBZone1
    Superblock --&gt; SBZone2</code></pre>
<strong>Key Zoned Constraints:</strong></p>
<ol>
<li><strong>Sequential Writes</strong>: All writes within a zone must be sequential, enforced by zone write pointers</li>
<li><strong>Zone Alignment</strong>: Block groups align to zone boundaries</li>
<li><strong>Active Zone Limits</strong>: Devices limit number of concurrently active zones</li>
<li><strong>No In-Place Updates</strong>: COW is mandatory (NODATACOW not supported)</li>
</ol>
<p><strong>Zoned Operations:</strong></p>
<ul>
<li><strong>Zone allocation</strong>: Track zone write pointers and allocate from empty/active zones</li>
<li><strong>Zone finishing</strong>: Close zones when block group is full <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/zoned.c#L71-L71">fs/btrfs/zoned.c71</a></li>
<li><strong>Reset zones</strong>: Reset write pointer when freeing block group</li>
<li><strong>Superblock zones</strong>: Use zone pairs for superblock with log-structured updates <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/zoned.c#L88-L161">fs/btrfs/zoned.c88-161</a></li>
</ul>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/zoned.c#L1-L70">fs/btrfs/zoned.c1-70</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/zoned.c#L355-L605">fs/btrfs/zoned.c355-605</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/zoned.c#L88-L161">fs/btrfs/zoned.c88-161</a></p>
<h2 id="io-path">I/O Path<a class="headerlink" href="#io-path" title="Permanent link">&para;</a></h2>
<h3 id="read-path">Read Path<a class="headerlink" href="#read-path" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    ReadSyscall["read() system call"]
    VFSRead["VFS generic_file_read_iter()mm/filemap.c"]
    PageCache["Page Cache Lookupfilemap_get_read_batch()Find folios"]
    Hit["Cache HitCopy to user bufferUpdate atime"]
    Miss["Cache MissTrigger btrfs_readahead()fs/btrfs/file.c"]
    DoReadpage["do_readpage()Submit read biosFor each folio"]
    LookupExtent["btrfs_get_extent()Find extent mappingSearch EXTENT_DATA items"]
    CreateEM["create_io_em()struct extent_mapCache in em_tree"]
    FileExtent["struct btrfs_file_extent_itemdisk_bytenr, offsetnum_bytes, compression"]
    CheckType["Check extent typeINLINE, REG, PREALLOC"]
    Compressed["compression != NONE?ZLIB/LZO/ZSTD"]
    CompressRead["btrfs_submit_compressed_read()fs/btrfs/compression.cAlloc compressed_bioRead + decompress async"]
    RegularRead["submit_extent_folio()fs/btrfs/extent_io.c:786Add to bio_ctrl"]
    BioSubmit["submit_one_bio()fs/btrfs/extent_io.c:174-220btrfs_submit_bbio()"]
    MapBio["btrfs_map_bio()fs/btrfs/volumes.cLogical to physical mapping"]
    EndBio["end_bbio_data_read()fs/btrfs/extent_io.c:574-622I/O completion handler"]
    LookupCsum["btrfs_lookup_bio_sums()fs/btrfs/file-item.cGet checksums from csum tree"]
    VerifyCsum["Verify checksumCompare calculated vs stored"]
    CsumOK["Checksum OKbtrfs_folio_set_uptodate()end_folio_read()"]
    CsumFail["Checksum mismatchbtrfs_print_data_csum_error()Try btrfs_repair_io_failure()"]

    ReadSyscall --&gt; VFSRead
    VFSRead --&gt; PageCache
    PageCache --&gt; Hit
    PageCache --&gt; Miss
    Miss --&gt; DoReadpage
    DoReadpage --&gt; LookupExtent
    LookupExtent --&gt; CreateEM
    CreateEM --&gt; FileExtent
    FileExtent --&gt; CheckType
    CheckType --&gt; Compressed
    Compressed --&gt; CompressRead
    Compressed --&gt; RegularRead
    CompressRead --&gt; BioSubmit
    RegularRead --&gt; BioSubmit
    BioSubmit --&gt; MapBio
    MapBio --&gt; LookupCsum
    LookupCsum --&gt; EndBio
    EndBio --&gt; VerifyCsum
    VerifyCsum --&gt; CsumOK
    VerifyCsum --&gt; CsumFail</code></pre>
Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c#L574-L622">fs/btrfs/extent_io.c574-622</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c#L786-L786">fs/btrfs/extent_io.c786</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c#L174-L220">fs/btrfs/extent_io.c174-220</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/compression.c#L1-L100">fs/btrfs/compression.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/file-item.c">fs/btrfs/file-item.c</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/volumes.c">fs/btrfs/volumes.c</a></p>
<h3 id="write-path">Write Path<a class="headerlink" href="#write-path" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    WriteSyscall["write() system call"]
    VFSWrite["VFS __generic_file_write_iter()mm/filemap.c"]
    PrepFolio["prepare_one_folio()Allocate/find folio"]
    CopyToCache["copy_folio_from_iter_atomic()mm/filemap.cCopy user data to page cache"]
    DirtyFolio["btrfs_dirty_folio()fs/btrfs/file.c:70-120Mark folio dirty in Btrfs"]
    Delalloc["btrfs_set_extent_delalloc()Set EXTENT_DELALLOC bitin inode-&gt;io_tree"]
    ReserveSpace["btrfs_delalloc_reserve_space()Reserve metadata + data spaceUpdate space_info"]
    Writeback["Writeback triggeredextent_writepage()fs/btrfs/extent_io.c"]
    FindRange["find_lock_delalloc_range()fs/btrfs/extent_io.c:369-466Lock contiguous delalloc"]
    Compress["compress_file_range()fs/btrfs/inode.c:879-1074If inode_need_compress()"]
    NoCOW["Check BTRFS_INODE_NODATACOWcan_cow_file_range_inline()"]
    COW["run_delalloc_cow()fs/btrfs/inode.c:123-126Standard COW path"]
    AllocExtent["btrfs_reserve_extent()fs/btrfs/extent-tree.cfind_free_extent()Allocate from block group"]
    CreateEM["btrfs_create_io_em()Create struct extent_mapAdd to inode-&gt;extent_tree"]
    CreateOrdered["btrfs_alloc_ordered_extent()fs/btrfs/ordered-data.cstruct btrfs_ordered_extentAdd to inode-&gt;ordered_tree"]
    SubmitBio["submit_one_bio()fs/btrfs/extent_io.c:174-220bio_ctrl-&gt;bbio"]
    MapBio["btrfs_map_bio()fs/btrfs/volumes.cMap logical to physical"]
    BioEnd["end_bbio_data_write()fs/btrfs/extent_io.c:518-550I/O completion"]
    FinishOrdered["btrfs_finish_ordered_extent()fs/btrfs/ordered-data.cInsert EXTENT_DATA itemAdd checksums to csum treeUpdate extent refs"]

    WriteSyscall --&gt; VFSWrite
    VFSWrite --&gt; PrepFolio
    PrepFolio --&gt; CopyToCache
    CopyToCache --&gt; DirtyFolio
    DirtyFolio --&gt; Delalloc
    DirtyFolio --&gt; ReserveSpace
    Delalloc --&gt; Writeback
    Writeback --&gt; FindRange
    FindRange --&gt; Compress
    FindRange --&gt; NoCOW
    FindRange --&gt; COW
    Compress --&gt; AllocExtent
    COW --&gt; AllocExtent
    AllocExtent --&gt; CreateEM
    CreateEM --&gt; CreateOrdered
    CreateOrdered --&gt; SubmitBio
    SubmitBio --&gt; MapBio
    MapBio --&gt; BioEnd
    BioEnd --&gt; FinishOrdered</code></pre>
The write path uses <strong>delayed allocation (delalloc)</strong> to batch extent allocation and allow for better space packing. This is tracked via the <code>EXTENT_DELALLOC</code> bit in <code>inode-&gt;io_tree</code> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c">fs/btrfs/extent_io.c</a></p>
<p><strong>Ordered extents</strong> (<code>struct btrfs_ordered_extent</code>) ensure that data reaches disk before metadata updates, maintaining crash consistency. The ordered extent tracks:</p>
<ul>
<li>File offset range</li>
<li>Disk bytenr and num_bytes</li>
<li>Flags: <code>BTRFS_ORDERED_COMPRESSED</code>, <code>BTRFS_ORDERED_PREALLOC</code>, etc.</li>
<li>Completion state for synchronization</li>
</ul>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/file.c#L70-L120">fs/btrfs/file.c70-120</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode.c#L123-L126">fs/btrfs/inode.c123-126</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/inode.c#L879-L1074">fs/btrfs/inode.c879-1074</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c#L369-L466">fs/btrfs/extent_io.c369-466</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c#L174-L220">fs/btrfs/extent_io.c174-220</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent_io.c#L518-L550">fs/btrfs/extent_io.c518-550</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/ordered-data.c">fs/btrfs/ordered-data.c</a></p>
<h2 id="transaction-management">Transaction Management<a class="headerlink" href="#transaction-management" title="Permanent link">&para;</a></h2>
<p>All modifications in Btrfs occur within transactions. Transactions group related changes and provide atomicity.</p>
<h3 id="transaction-lifecycle">Transaction Lifecycle<a class="headerlink" href="#transaction-lifecycle" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    Start["btrfs_start_transaction()transaction.c"]
    Running["Transaction RunningTRANS_STATE_RUNNING"]
    Modify["Modify B-treesCOW operationsDelayed refs"]
    End["btrfs_end_transaction()Release transaction handle"]
    Commit["btrfs_commit_transaction()Triggered by sync/timer"]
    Flush["Flush delallocRun delayed refs"]
    CreateSnapshot["Create transaction snapshot"]
    WriteTree["Write dirty tree blocks"]
    UpdateSuper["Update superblock"]
    Complete["Transaction CompleteTRANS_STATE_COMPLETED"]

    Start --&gt; Running
    Running --&gt; Modify
    Modify --&gt; End
    End --&gt; Commit
    Commit --&gt; Flush
    Flush --&gt; CreateSnapshot
    CreateSnapshot --&gt; WriteTree
    WriteTree --&gt; UpdateSuper
    UpdateSuper --&gt; Complete</code></pre>
<strong>Transaction Handle:</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>struct btrfs_trans_handle
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>├── transid - Transaction ID
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>├── blocks_reserved - Reserved metadata space
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>├── block_rsv - Block reservation tracking
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>├── fs_info - Filesystem info
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>└── type - Transaction type flags
</code></pre></div>
Transactions are committed:</p>
<ul>
<li>Explicitly via <code>sync()</code> or <code>fsync()</code></li>
<li>Periodically (default 30 seconds)</li>
<li>When metadata space is low</li>
<li>When too many delayed refs accumulate</li>
</ul>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/transaction.c#L1-L100">fs/btrfs/transaction.c1-100</a></p>
<h2 id="block-groups-and-space-management">Block Groups and Space Management<a class="headerlink" href="#block-groups-and-space-management" title="Permanent link">&para;</a></h2>
<p>Btrfs divides device space into block groups, each with a specific type (DATA, METADATA, SYSTEM) and RAID profile.</p>
<h3 id="block-group-structure">Block Group Structure<a class="headerlink" href="#block-group-structure" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    SpaceInfo["btrfs_space_infoPer-type space accounting"]
    DataSpace["DATA space_info"]
    MetaSpace["METADATA space_info"]
    SysSpace["SYSTEM space_info"]
    BlockGroup1["btrfs_block_groupblock-group.c"]
    BlockGroup2["btrfs_block_group"]
    BlockGroup3["btrfs_block_group"]
    BGItem["Block Group ItemIn extent tree"]
    FreeSpace["Free Space Cachev1 or free space tree v2"]
    Zone["Zone infofor zoned devices"]
    Allocator["Extent Allocatorfind_free_extent()"]
    Allocate["Allocate extentfrom block group"]

    SpaceInfo --&gt; DataSpace
    SpaceInfo --&gt; MetaSpace
    SpaceInfo --&gt; SysSpace
    DataSpace --&gt; BlockGroup1
    DataSpace --&gt; BlockGroup2
    MetaSpace --&gt; BlockGroup3
    BlockGroup1 --&gt; BGItem
    BlockGroup1 --&gt; FreeSpace
    BlockGroup1 --&gt; Zone
    FreeSpace --&gt; Allocator
    Allocator --&gt; Allocate</code></pre>
<strong>Block Group Types:</strong></p>
<ul>
<li><strong>DATA</strong>: File data extents</li>
<li><strong>METADATA</strong>: B-tree nodes, inode items, etc.</li>
<li><strong>SYSTEM</strong>: Chunk tree and device tree (critical metadata)</li>
</ul>
<p>Each block group can have a different RAID profile, e.g., RAID1 for metadata and RAID0 for data.</p>
<p><strong>Space Allocation:</strong></p>
<p>The allocator <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent-tree.c">fs/btrfs/extent-tree.c</a> selects block groups based on:</p>
<ol>
<li>Type (data vs metadata)</li>
<li>Available free space</li>
<li>RAID profile</li>
<li>Locality (prefer block groups with recent allocations)</li>
</ol>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/block-group.c#L1-L100">fs/btrfs/block-group.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/extent-tree.c">fs/btrfs/extent-tree.c</a></p>
<h2 id="quota-groups-qgroups">Quota Groups (Qgroups)<a class="headerlink" href="#quota-groups-qgroups" title="Permanent link">&para;</a></h2>
<p>Qgroups provide hierarchical quota management for subvolumes and snapshots.</p>
<h3 id="qgroup-hierarchy">Qgroup Hierarchy<a class="headerlink" href="#qgroup-hierarchy" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    QTree["Quota TreeBTRFS_QUOTA_TREE_OBJECTID"]
    Qgroup0["Qgroup 0/subvol_idPer-subvolume qgroup"]
    Qgroup1["Qgroup 1/group_idUser-defined group"]
    QgroupInfo["btrfs_qgroupqgroup.c"]
    Accounting["Space Accountingreferenced, exclusive"]
    Limit["Quota Limitsmax_referenced, max_exclusive"]
    Relations["Parent-child relations"]
    Track["Track extent ownershipUpdate on COW"]

    QTree --&gt; Qgroup0
    QTree --&gt; Qgroup1
    Qgroup0 --&gt; QgroupInfo
    QgroupInfo --&gt; Accounting
    QgroupInfo --&gt; Limit
    QgroupInfo --&gt; Relations
    Accounting --&gt; Track</code></pre>
<strong>Qgroup Accounting:</strong></p>
<ul>
<li><strong>Referenced</strong>: Total space referenced by this qgroup (may be shared)</li>
<li><strong>Exclusive</strong>: Space exclusively owned by this qgroup</li>
<li><strong>Rfer_cmpr</strong>: Referenced compressed space</li>
<li><strong>Excl_cmpr</strong>: Exclusive compressed space</li>
</ul>
<p>Qgroups are updated when:</p>
<ul>
<li>Extents are allocated or freed</li>
<li>Snapshots are created (affects exclusivity)</li>
<li>Extent ownership changes via COW</li>
</ul>
<p>Sources: <a href="https://github.com/torvalds/linux/blob/fcb70a56/fs/btrfs/qgroup.c#L1-L100">fs/btrfs/qgroup.c1-100</a></p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>Btrfs is a comprehensive copy-on-write filesystem with integrated volume management. Its key architectural components include:</p>
<ol>
<li><strong>B-tree storage engine</strong> (<code>ctree.c</code>) managing multiple tree namespaces</li>
<li><strong>Copy-on-write at all levels</strong> enabling snapshots and crash recovery</li>
<li><strong>Extent-based allocation</strong> with delayed reference updates for efficiency</li>
<li><strong>Integrated RAID</strong> supporting multiple redundancy profiles</li>
<li><strong>Compression and checksumming</strong> for space efficiency and data integrity</li>
<li><strong>Tree logging</strong> for fast fsync operations</li>
<li><strong>Multi-device support</strong> with flexible chunk allocation</li>
<li><strong>Zoned device support</strong> for sequential-write storage</li>
<li><strong>Hierarchical quota groups</strong> for space accounting</li>
</ol>
<p>The filesystem balances performance, features, and data integrity through careful design of its COW semantics, delayed operations, and transaction management.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>