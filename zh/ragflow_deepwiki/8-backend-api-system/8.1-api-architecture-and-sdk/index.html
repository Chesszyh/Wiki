
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://wiki.neurosama.uk/zh/ragflow_deepwiki/8-backend-api-system/8.1-api-architecture-and-sdk/">
      
      
        <link rel="prev" href="../../7-data-source-integration/">
      
      
        <link rel="next" href="../8.2-authentication-and-authorization/">
      
      
        
          <link rel="alternate" href="../../../../ragflow_deepwiki/8-backend-api-system/8.1-api-architecture-and-sdk/" hreflang="en">
        
          <link rel="alternate" href="./" hreflang="zh">
        
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>API 架构与 SDK - DeepWiki</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-sdk" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../" title="DeepWiki" class="md-header__button md-logo" aria-label="DeepWiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DeepWiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API 架构与 SDK
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="选择当前语言">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../../ragflow_deepwiki/8-backend-api-system/8.1-api-architecture-and-sdk/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Chesszyh/Wiki" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../" class="md-tabs__link">
        
  
  
    
  
  Welcome to DeepWiki

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../celery_deepwiki/1-celery-overview/1.1-installation-and-setup/" class="md-tabs__link">
          
  
  
  Celery deepwiki

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../lc0_deepwiki/1-lc0-overview/" class="md-tabs__link">
          
  
  
  Lc0 deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../linux_deepwiki/1-linux-kernel-overview/" class="md-tabs__link">
          
  
  
  Linux deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../1-overview/" class="md-tabs__link">
          
  
  
  Ragflow deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../redis_deepwiki/1-redis-overview/" class="md-tabs__link">
          
  
  
  Redis deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../stockfish_deepwiki/2-core-data-structures-and-types/" class="md-tabs__link">
          
  
  
  Stockfish deepwiki

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../" title="DeepWiki" class="md-nav__button md-logo" aria-label="DeepWiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DeepWiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Chesszyh/Wiki" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome to DeepWiki
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Celery deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Celery deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    1 celery overview
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    1 celery overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/1.1-installation-and-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    安装与设置
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/1.2-core-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Celery 概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 the celery application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 the celery application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.1-application-initialization-and-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    应用初始化与配置
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.2-task-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务注册
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.3-message-brokers-and-routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    消息代理与路由
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.4-amqp-layer-and-message-protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AMQP 层与消息协议
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Celery 应用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 tasks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 tasks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.1-task-definition-and-invocation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务定义与调用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.2-task-lifecycle-and-states/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务生命周期与状态
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.3-error-handling-and-retry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    错误处理与重试
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.4-time-limits-and-rate-limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    时间限制与速率限制
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.5-task-options-and-customization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务选项与自定义
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务 (Tasks)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 canvas workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 canvas workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.1-signatures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    签名与构建 (Signature and Composition)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.2-workflow-primitives/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作流原语 (Workflow Primitives)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.3-advanced-canvas-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    高级 Canvas 特性
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.4-chord-execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chord 执行
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas 工作流
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 workers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 workers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.1-worker-architecture-and-bootsteps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作者架构与 Bootsteps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.2-worker-lifecycle-and-shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作者生命周期与停机
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.3-concurrency-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    并发模型 (Concurrency Models)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.4-worker-configuration-and-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作者配置与控制
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.5-consumer-and-event-loops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    消费者与事件循环
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.6-autoscaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    自动伸缩 (Autoscaling)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作者 (Workers)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 result backends
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 result backends
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.1-backend-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    后端架构 (Backend Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.2-backend-implementations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    后端实现 (Backend Implementations)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.3-result-storage-and-retrieval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    结果序列化与检索
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.4-chord-coordination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chord 协调 (Chord Coordination)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.5-backend-resilience/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    错误处理与弹性 (Error Handling and Resilience)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    结果后端 (Result Backends)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_13" >
        
          
          <label class="md-nav__link" for="__nav_2_13" id="__nav_2_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 periodic tasks (beat)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 periodic tasks (beat)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.1-beat-scheduler-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Beat 调度器架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.2-schedule-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    调度类型 (Schedule Types)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.3-time-and-timezone-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    时间与时区处理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.4-persistent-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    持久化存储 (Persistent Storage)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    周期性任务 (Beat)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_15" >
        
          
          <label class="md-nav__link" for="__nav_2_15" id="__nav_2_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 monitoring and control
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 monitoring and control
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.1-remote-control-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    远程控制命令 (Remote Control Commands)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.2-worker-inspection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作者检查 (Worker Inspection)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.3-event-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    事件系统 (Event System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    监控与控制 (Monitoring and Control)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_17" >
        
          
          <label class="md-nav__link" for="__nav_2_17" id="__nav_2_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 command line interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 command line interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.1-cli-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI 架构 (CLI Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.2-worker-and-beat-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker 和 Beat 命令
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.3-management-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    管理命令 (Management Commands)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.4-multi-worker-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    多工作者管理 (Multi-worker Management)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    命令行界面 (Command Line Interface)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_19" >
        
          
          <label class="md-nav__link" for="__nav_2_19" id="__nav_2_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 development and testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_19">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 development and testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.1-testing-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    测试基础设施 (Testing Infrastructure)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.2-test-matrix-and-environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    测试矩阵与环境 (Test Matrix and Environments)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.3-integration-and-smoke-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    集成与冒烟测试 (Integration and Smoke Tests)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.4-code-quality-and-documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    代码质量与文档 (Code Quality and Documentation)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    开发与测试 (Development and Testing)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_21" >
        
          
          <label class="md-nav__link" for="__nav_2_21" id="__nav_2_21_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    11 packaging and distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_21">
            <span class="md-nav__icon md-icon"></span>
            
  
    11 packaging and distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.1-package-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    包结构 (Package Structure)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.2-dependencies-and-extras/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    依赖与 Extras (Dependencies and Extras)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.3-version-management-and-release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    版本管理与发布 (Version Management and Release)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    打包与分发 (Packaging and Distribution)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Lc0 deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Lc0 deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/1-lc0-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lc0 概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 building and installation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 building and installation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.1-build-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建系统架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.2-linux-and-macos-build-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux 和 macOS 构建过程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.3-windows-build-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows 构建过程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.4-version-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    版本管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建与安装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 core engine architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 core engine architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/3.1-uci-protocol-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI 协议实现
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/3.2-configuration-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心引擎架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 chess representation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 chess representation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.1-bitboards-and-move-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    位棋盘 (Bitboards)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.2-position-encoding-and-history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    局面编码与历史
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.3-syzygy-tablebase-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Syzygy 残局库集成
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.4-pgn-and-game-import/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PGN 与对局导入
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    棋局表示
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 search algorithm
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 search algorithm
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.1-mcts-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCTS 实现
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.2-search-parameters-and-stopping-conditions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    搜索参数与终止条件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.3-search-tree-caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    缓存系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    搜索算法
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 neural network system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 neural network system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.1-network-interface-and-backend-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    网络接口与后端架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.2-weights-loading-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    权重加载与管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.3-cuda-and-cudnn-backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CUDA 和 cuDNN 后端
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.4-onnx-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ONNX 集成
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.5-xla-and-hlo-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XLA 和 HLO 支持
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.6-memory-caching-and-performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    内存缓存与性能
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    神经网络系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 self play system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 self play system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/7-self-play-system/7.1-tournament-organization-and-game-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    锦标赛组织
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/7-self-play-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    自对弈系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_14" >
        
          
          <label class="md-nav__link" for="__nav_3_14" id="__nav_3_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 utilities and infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 utilities and infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.1-fast-mathematical-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    快速数学函数
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.2-threading-and-synchronization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    线程与同步
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.3-benchmarking-and-performance-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    基准测试与性能测试
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    实用工具与基础设施
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_16" >
        
          
          <label class="md-nav__link" for="__nav_3_16" id="__nav_3_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 continuous integration and deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 continuous integration and deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/9.1-circleci-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CircleCI 工作流
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/9.2-windows-build-and-packaging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows 构建与打包
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    持续集成与部署
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Linux deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linux deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/1-linux-kernel-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux 内核概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 rust for linux
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 rust for linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/2-rust-for-linux/2.1-rust-kernel-apis-and-abstractions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust 内核 API 与抽象
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/2-rust-for-linux/2.2-nova-drm-graphics-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nova DRM 图形驱动
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/2-rust-for-linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust for Linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 virtualization (kvm)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 virtualization (kvm)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/3-virtualization-%28kvm%29/3.1-kvm-x86-virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM x86 虚拟化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/3-virtualization-%28kvm%29/3.2-kvm-arm64-virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM ARM64 虚拟化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/3-virtualization-%28kvm%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    虚拟化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 core kernel infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 core kernel infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/4.1-process-scheduling-and-sched_ext/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    进程调度与 sched_ext
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/4.2-tracing-and-observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    追踪与可观测性
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/4.3-build-system-and-kbuild/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建系统与 Kbuild
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/4-core-kernel-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心内核基础设施
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 storage and io
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 storage and io
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/5.1-io_uring-asynchronous-io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    io_uring 异步 I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/5.2-btrfs-copy-on-write-filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Btrfs 写时复制文件系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/5.3-ufs-storage-controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UFS 存储控制器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/5-storage-and-io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    存储与 I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 graphics and display
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 graphics and display
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/6-graphics-and-display/6.1-amdgpu-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AMDGPU 驱动
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux_deepwiki/6-graphics-and-display/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    图形与显示
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Ragflow deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Ragflow deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    2 getting started and deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 getting started and deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-getting-started-and-deployment/2.1-docker-compose-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Compose 部署
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-getting-started-and-deployment/2.4-build-system-and-cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建系统与 CI/CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-getting-started-and-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    入门与部署
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    3 system architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 system architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-system-architecture/3.1-core-application-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心应用服务
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-system-architecture/3.2-data-storage-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数据存储架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-system-architecture/3.3-task-execution-and-queue-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务执行与队列系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    系统架构 (System Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    4 frontend application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 frontend application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-frontend-application/4.1-internationalization-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    国际化系统 (Internationalization System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-frontend-application/4.2-application-structure-and-ui-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    应用结构与路由 (Application Structure and Routing)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-frontend-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    前端应用 (Frontend Application)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    5 llm integration system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 llm integration system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/5.1-model-factory-pattern-and-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    模型工厂模式与注册 (Model Factory Pattern and Registration)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/5.2-provider-implementations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    提供商实现 (Provider Implementations)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/5.3-error-handling-and-retry-logic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    错误处理与重试逻辑 (Error Handling and Retry Logic)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/5.4-tenant-configuration-and-usage-tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    租户配置与用量追踪 (Tenant Configuration and Usage Tracking)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/5.5-tool-calling-and-function-use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工具调用与函数使用 (Tool Calling and Function Use)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-llm-integration-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM 集成系统 (LLM Integration System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    6 document processing pipeline
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 document processing pipeline
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.1-document-parsing-strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    文档解析策略 (Document Parsing Strategies)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.2-chunking-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    切分方法 (Chunking Methods)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.3-content-enhancement-and-embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6.3 内容增强与嵌入 (Content Enhancement and Embedding)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.4-layout-recognition-and-ocr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6.4 布局识别与 OCR (Layout Recognition and OCR)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.5-knowledge-graph-construction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6.5 知识图谱构建 (Knowledge Graph Construction)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/6.6-raptor-hierarchical-summarization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6.6 RAPTOR 分层摘要 (RAPTOR Hierarchical Summarization)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-document-processing-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    文档处理流水线 (Document Processing Pipeline)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_12" >
        
          
          <label class="md-nav__link" for="__nav_5_12" id="__nav_5_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    7 data source integration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 data source integration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-data-source-integration/7.1-connector-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7.1 连接器架构 (Connector Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-data-source-integration/7.2-synchronization-and-scheduling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7.2 同步与调度 (Synchronization and Scheduling)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-data-source-integration/7.3-supported-data-sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7.3 支持的数据源 (Supported Data Sources)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-data-source-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7 数据源集成 (Data Source Integration)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_14" checked>
        
          
          <label class="md-nav__link" for="__nav_5_14" id="__nav_5_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    8 backend api system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_14_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 backend api system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    API 架构与 SDK
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    API 架构与 SDK
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#flaskquart-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flask/Quart API 框架结构
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flask/Quart API 框架结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        蓝图与路由注册模式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decorator" class="md-nav__link">
    <span class="md-ellipsis">
      
        装饰器（Decorator）模式
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="装饰器（Decorator）模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        身份验证装饰器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="身份验证装饰器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#token_required-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        @token_required - API 密钥身份验证
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login_required-session" class="md-nav__link">
    <span class="md-ellipsis">
      
        @login_required - 会话（Session）身份验证
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        验证装饰器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="验证装饰器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validate_request-" class="md-nav__link">
    <span class="md-ellipsis">
      
        @validate_request - 参数验证
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not_allowed_parameters-" class="md-nav__link">
    <span class="md-ellipsis">
      
        @not_allowed_parameters - 参数黑名单
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        装饰器堆叠顺序
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        标准化响应格式
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="标准化响应格式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        响应格式结构
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="响应格式结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        成功响应
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        错误响应
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        错误代码系统
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        异常处理模式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        API 架构与客户端结构
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API 架构与客户端结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        三层架构
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        身份验证与租户隔离
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="身份验证与租户隔离">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        基于令牌的身份验证流程
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    <span class="md-ellipsis">
      
        租户 ID 注入模式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        HTTP API 端点组织
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HTTP API 端点组织">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        端点领域与路由
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        响应辅助函数
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-sdk-ragflow-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Python SDK (ragflow-sdk)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python SDK (ragflow-sdk)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        SDK 客户端初始化
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        资源模块结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdk_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        SDK 使用模式
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SDK 使用模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        工厂方法创建资源
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        实例方法操作资源
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        状态同步
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        领域特定 API 实现
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="领域特定 API 实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        数据集与文档领域
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        数据集管理操作
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      
        文档上传与解析流程
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      
        分块检索与管理
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        聊天与对话 API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="聊天与对话 API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chatsession" class="md-nav__link">
    <span class="md-ellipsis">
      
        聊天（Chat）与会话（Session）的区别
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      
        聊天助手创建
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        会话管理与消息流
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openai-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenAI 兼容 API 端点
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OpenAI 兼容 API 端点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openai" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenAI 兼容层
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openai-api_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenAI API 请求格式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      
        响应格式映射
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      
        请求验证与错误处理
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="请求验证与错误处理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      
        验证架构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      
        验证流程示例
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      
        标准错误响应
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Python SDK 实现详情
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python SDK 实现详情">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      
        资源类模式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      
        属性同步
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      
        嵌套资源管理
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      
        特殊用途端点
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="特殊用途端点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      
        检索测试
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      
        元数据过滤
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dify" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dify 兼容检索
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        API 工具与辅助函数
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API 工具与辅助函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      
        关键工具函数
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      
        配置合并
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openai_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenAI 响应格式化
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8.2-authentication-and-authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8.2 身份验证与多租户 (Authentication and Multi-tenancy)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8.3-dataset-and-knowledge-base-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8.3 数据集与知识库 API (Dataset and Knowledge Base APIs)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8.4-document-and-file-management-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8.4 文档与文件管理 API (Document and File Management APIs)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8.5-chat-and-conversation-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8.5 聊天与对话 API (Chat and Conversation APIs)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8 后端 API 系统 (Backend API System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_16" >
        
          
          <label class="md-nav__link" for="__nav_5_16" id="__nav_5_16_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    9 agent and workflow system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 agent and workflow system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-agent-and-workflow-system/9.1-canvas-engine-and-dsl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.1 画布引擎与 DSL (Canvas Engine and DSL)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-agent-and-workflow-system/9.2-component-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.2 组件系统架构 (Component System Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-agent-and-workflow-system/9.3-built-in-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.3 内置组件 (Built-in Components)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-agent-and-workflow-system/9.4-workflow-execution-and-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.4 工作流执行与流式输出 (Workflow Execution and Streaming)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-agent-and-workflow-system/9.5-state-and-variable-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.5 状态与变量管理 (State and Variable Management)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-agent-and-workflow-system/9.6-agent-tools-and-react-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent 工具与 ReAct 循环
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-agent-and-workflow-system/9.7-canvas-api-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.7 画布 API 与管理 (Canvas API and Management)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-agent-and-workflow-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9 智能体与工作流系统 (Agent and Workflow System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_18" >
        
          
          <label class="md-nav__link" for="__nav_5_18" id="__nav_5_18_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    10 retrieval and rag system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_18">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 retrieval and rag system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-retrieval-and-rag-system/10.1-query-processing-and-refinement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10.1 查询处理与精炼 (Query Processing and Refinement)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-retrieval-and-rag-system/10.2-hybrid-search-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10.2 混合搜索架构 (Hybrid Search Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-retrieval-and-rag-system/10.3-reranking-and-metadata-filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10.3 重排序与元数据过滤 (Reranking and Metadata Filtering)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-retrieval-and-rag-system/10.4-response-generation-and-citations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10.4 回答生成与引用 (Response Generation and Citations)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-retrieval-and-rag-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10 检索与 RAG 系统 (Retrieval and RAG System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Redis deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Redis deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/1-redis-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis 概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 redis core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 redis core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.1-server-architecture-and-lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    服务器架构与生命周期
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.2-client-connection-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    客户端连接管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.3-command-processing-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    命令处理流水线
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.4-configuration-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis 核心
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 data storage and management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 data storage and management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.1-core-data-types-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心数据类型实现
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.2-streams-and-blocking-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    流 (Streams) 与阻塞操作
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.3-hyperloglog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HyperLogLog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.4-memory-efficient-data-structures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    内存高效的数据结构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.5-dictionary-and-key-value-store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    字典与键值存储
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.6-dynamic-string-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    动态字符串库 (SDS)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数据存储与管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 memory management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 memory management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/4.1-eviction-and-expiration-policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    逐出与过期策略
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/4.2-memory-allocators-and-build-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    内存分配器与构建系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    内存管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8" >
        
          
          <label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 scripting and extensions
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 scripting and extensions
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/5.1-lua-scripting-and-redis-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lua 脚本与 Redis 函数
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/5.2-redis-module-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis 模块 API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    脚本与扩展
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_10" >
        
          
          <label class="md-nav__link" for="__nav_6_10" id="__nav_6_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 high availability and distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 high availability and distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/6.1-redis-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis 集群 (Cluster)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/6.2-redis-sentinel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis 哨兵 (Sentinel)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    高可用与扩展
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/7-persistence-and-replication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    持久化与复制
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_13" >
        
          
          <label class="md-nav__link" for="__nav_6_13" id="__nav_6_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/8.1-access-control-lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    访问控制列表 (ACL)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/8.2-network-security-and-tls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    网络安全与 TLS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    安全
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_15" >
        
          
          <label class="md-nav__link" for="__nav_6_15" id="__nav_6_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 client tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 client tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/9-client-tools/9.1-redis-cli-and-benchmark-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis CLI 与基准测试工具
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/9-client-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    客户端工具
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_17" >
        
          
          <label class="md-nav__link" for="__nav_6_17" id="__nav_6_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 development and testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 development and testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.1-build-system-and-dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建系统与依赖
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.2-testing-framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    测试框架
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.3-continuous-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    持续集成 (CI)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    开发与测试
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Stockfish deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Stockfish deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/2-core-data-structures-and-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心数据结构与类型
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 board representation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 board representation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.1-position-and-state-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    局面与状态管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.2-bitboards-and-low-level-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    位棋盘与低级操作
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.3-move-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    着法生成
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    棋盘表示
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 search system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 search system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.1-search-algorithm-and-iterative-deepening/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    搜索算法与迭代加深
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.2-thread-management-and-parallel-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    线程管理与并行搜索
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.3-move-ordering-and-move-picker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    着法排序与着法拾取器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    搜索系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
        
          
          <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 evaluation system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 evaluation system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/5-evaluation-system/5.1-nnue-neural-network-evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NNUE 神经网络评估
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/5-evaluation-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    评估系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_8" >
        
          
          <label class="md-nav__link" for="__nav_7_8" id="__nav_7_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 external interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 external interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/6.1-uci-protocol-handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI 协议处理程序
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/6.2-uci-options-and-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI 选项与配置
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    外部接口
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_10" >
        
          
          <label class="md-nav__link" for="__nav_7_10" id="__nav_7_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 infrastructure and support
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 infrastructure and support
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.1-build-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.2-utilities-and-support-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    实用程序和支持函数
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.3-testing-and-benchmarking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    测试与基准测试
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    基础设施与支持
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#flaskquart-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flask/Quart API 框架结构
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flask/Quart API 框架结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        蓝图与路由注册模式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decorator" class="md-nav__link">
    <span class="md-ellipsis">
      
        装饰器（Decorator）模式
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="装饰器（Decorator）模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        身份验证装饰器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="身份验证装饰器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#token_required-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        @token_required - API 密钥身份验证
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login_required-session" class="md-nav__link">
    <span class="md-ellipsis">
      
        @login_required - 会话（Session）身份验证
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        验证装饰器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="验证装饰器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validate_request-" class="md-nav__link">
    <span class="md-ellipsis">
      
        @validate_request - 参数验证
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not_allowed_parameters-" class="md-nav__link">
    <span class="md-ellipsis">
      
        @not_allowed_parameters - 参数黑名单
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        装饰器堆叠顺序
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        标准化响应格式
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="标准化响应格式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        响应格式结构
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="响应格式结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        成功响应
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        错误响应
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        错误代码系统
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        异常处理模式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        API 架构与客户端结构
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API 架构与客户端结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        三层架构
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        身份验证与租户隔离
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="身份验证与租户隔离">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        基于令牌的身份验证流程
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    <span class="md-ellipsis">
      
        租户 ID 注入模式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        HTTP API 端点组织
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HTTP API 端点组织">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        端点领域与路由
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        响应辅助函数
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-sdk-ragflow-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Python SDK (ragflow-sdk)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python SDK (ragflow-sdk)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        SDK 客户端初始化
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        资源模块结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdk_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        SDK 使用模式
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SDK 使用模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        工厂方法创建资源
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        实例方法操作资源
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        状态同步
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        领域特定 API 实现
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="领域特定 API 实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        数据集与文档领域
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        数据集管理操作
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      
        文档上传与解析流程
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      
        分块检索与管理
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        聊天与对话 API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="聊天与对话 API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chatsession" class="md-nav__link">
    <span class="md-ellipsis">
      
        聊天（Chat）与会话（Session）的区别
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      
        聊天助手创建
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        会话管理与消息流
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openai-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenAI 兼容 API 端点
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OpenAI 兼容 API 端点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openai" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenAI 兼容层
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openai-api_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenAI API 请求格式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      
        响应格式映射
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      
        请求验证与错误处理
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="请求验证与错误处理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      
        验证架构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      
        验证流程示例
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      
        标准错误响应
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Python SDK 实现详情
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python SDK 实现详情">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      
        资源类模式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      
        属性同步
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      
        嵌套资源管理
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      
        特殊用途端点
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="特殊用途端点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      
        检索测试
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      
        元数据过滤
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dify" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dify 兼容检索
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        API 工具与辅助函数
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API 工具与辅助函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      
        关键工具函数
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      
        配置合并
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openai_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenAI 响应格式化
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-sdk">API 架构与 SDK<a class="headerlink" href="#api-sdk" title="Permanent link">&para;</a></h1>
<p>相关源文件</p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/client/README.md">admin/client/README.md</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/client/http_client.py">admin/client/http_client.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/client/parser.py">admin/client/parser.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/client/pyproject.toml">admin/client/pyproject.toml</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/client/ragflow_cli.py">admin/client/ragflow_cli.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/client/ragflow_client.py">admin/client/ragflow_client.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/client/user.py">admin/client/user.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/server/admin_server.py">admin/server/admin_server.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/server/auth.py">admin/server/auth.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/server/config.py">admin/server/config.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/server/routes.py">admin/server/routes.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/admin/server/services.py">admin/server/services.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/agent/tools/retrieval.py">agent/tools/retrieval.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/chat.py">api/apps/sdk/chat.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/dataset.py">api/apps/sdk/dataset.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/dify_retrieval.py">api/apps/sdk/dify_retrieval.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/doc.py">api/apps/sdk/doc.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/session.py">api/apps/sdk/session.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/constants.py">api/constants.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/canvas_service.py">api/db/services/canvas_service.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/conversation_service.py">api/db/services/conversation_service.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/system_settings_service.py">api/db/services/system_settings_service.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/ragflow_server.py">api/ragflow_server.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py">api/utils/api_utils.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/configs.py">api/utils/configs.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/health_utils.py">api/utils/health_utils.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/common/connection_utils.py">common/connection_utils.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/conf/system_settings.json">conf/system_settings.json</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/docs/references/http_api_reference.md">docs/references/http_api_reference.md</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/docs/references/python_api_reference.md">docs/references/python_api_reference.md</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/docs/release_notes.md">docs/release_notes.md</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/rag/advanced_rag/__init__.py">rag/advanced_rag/<strong>init</strong>.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/rag/benchmark.py">rag/benchmark.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/modules/chat.py">sdk/python/ragflow_sdk/modules/chat.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/ragflow.py">sdk/python/ragflow_sdk/ragflow.py</a></li>
</ul>
<p>本页介绍了 RAGFlow 基于 Flask 的 HTTP API 架构，包括装饰器模式、响应格式标准以及官方 Python SDK (<code>ragflow-sdk</code>)。该 API 通过按功能领域组织的 RESTful 端点，提供了对 RAGFlow 所有功能的程序化访问。</p>
<hr />
<h2 id="flaskquart-api">Flask/Quart API 框架结构<a class="headerlink" href="#flaskquart-api" title="Permanent link">&para;</a></h2>
<p>RAGFlow 的 API 层构建在 <strong>Quart</strong> 之上，Quart 是 Flask 的一个支持异步的派生版本。API 模块组织在 <code>api/apps/sdk/</code> 下，每个模块都在共享的 <code>manager</code> 蓝图（Blueprint）上注册路由。</p>
<h3 id="_1">蓝图与路由注册模式<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    MainApp["main.pycreate_app()"]
    Manager["Blueprint 'manager'Registered at /api/v1"]
    DatasetModule["dataset.py@manager.route('/datasets')"]
    DocModule["doc.py@manager.route('/datasets/{id}/documents')"]
    ChatModule["chat.py@manager.route('/chats')"]
    SessionModule["session.py@manager.route('/chats/{id}/sessions')"]
    ChunkModule["chunk.py@manager.route('/retrieval')"]
    CanvasModule["canvas_api.py@manager.route('/agents')"]
    TokenRequired["@token_requiredapi_utils.py:251-283"]
    ValidateRequest["@validate_requestapi_utils.py:143-180"]
    LoginRequired["@login_requiredapps/init.py"]

    MainApp --&gt; Manager
    Manager --&gt; DatasetModule
    Manager --&gt; DocModule
    Manager --&gt; ChatModule
    Manager --&gt; SessionModule
    Manager --&gt; ChunkModule
    Manager --&gt; CanvasModule
    DatasetModule --&gt; TokenRequired
    DocModule --&gt; TokenRequired
    ChatModule --&gt; TokenRequired
    TokenRequired --&gt; ValidateRequest</code></pre>
每个模块都遵循如下模式：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># api/apps/sdk/dataset.py
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>manager = Blueprint(&#39;manager&#39;, __name__)
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>@manager.route(&quot;/datasets&quot;, methods=[&quot;POST&quot;])
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>@token_required
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>async def create(tenant_id):
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    # tenant_id 由 @token_required 注入
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    req = await get_request_json()
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    # ... 实现
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/dataset.py#L55-L55">api/apps/sdk/dataset.py55</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/doc.py#L72-L72">api/apps/sdk/doc.py72</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/chat.py#L27-L27">api/apps/sdk/chat.py27</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L251-L283">api/utils/api_utils.py251-283</a></li>
</ul>
<hr />
<h2 id="decorator">装饰器（Decorator）模式<a class="headerlink" href="#decorator" title="Permanent link">&para;</a></h2>
<p>RAGFlow 使用三个主要的装饰器在 API 端点上强制执行身份验证、验证和授权。</p>
<h3 id="_2">身份验证装饰器<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<h4 id="token_required-api">@token_required - API 密钥身份验证<a class="headerlink" href="#token_required-api" title="Permanent link">&para;</a></h4>
<p>用于 SDK 或外部 API 访问。验证 <code>Authorization</code> 标头中的 Bearer 令牌并注入 <code>tenant_id</code>：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>def token_required(func):
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    def get_tenant_id(**kwargs):
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>        authorization_str = request.headers.get(&quot;Authorization&quot;)
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>        if not authorization_str:
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>            return False, get_json_result(
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>                data=False,
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>                message=&quot;`Authorization` can&#39;t be empty&quot;
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            )
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>        token = authorization_str.split()[1]
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>        objs = APIToken.query(token=token)
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>        if not objs:
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>            return False, get_json_result(
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>                data=False,
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>                message=&quot;Authentication error: API key is invalid!&quot;,
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>                code=RetCode.AUTHENTICATION_ERROR
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>            )
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>        kwargs[&quot;tenant_id&quot;] = objs[0].tenant_id
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>        return True, kwargs
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>    @wraps(func)
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>    async def adecorated_function(*args, **kwargs):
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>        e, kwargs = get_tenant_id(**kwargs)
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>        if not e:
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>            return kwargs
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>        return await func(*args, **kwargs)
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>    return adecorated_function
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L251-L283">api/utils/api_utils.py251-283</a></li>
</ul>
<h4 id="login_required-session">@login_required - 会话（Session）身份验证<a class="headerlink" href="#login_required-session" title="Permanent link">&para;</a></h4>
<p>用于 Web UI 请求。验证用户会话 cookie：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>def login_required(func):
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    @wraps(func)
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    async def decorated_view(*args, **kwargs):
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>        if not current_user.is_authenticated:
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>            return get_json_result(
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>                code=RetCode.UNAUTHORIZED,
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>                message=&quot;Please login first&quot;
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>            )
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>        return await func(*args, **kwargs)
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    return decorated_view
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/__init__.py">api/apps/<strong>init</strong>.py</a></li>
</ul>
<h3 id="_3">验证装饰器<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<h4 id="validate_request-">@validate_request - 参数验证<a class="headerlink" href="#validate_request-" title="Permanent link">&para;</a></h4>
<p>强制要求必需的参数并验证其值：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>@validate_request(&quot;conversation_id&quot;, &quot;messages&quot;)
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>async def completion():
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    # 确保请求中包含 conversation_id 和 messages
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    req = await get_request_json()
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    # ... 实现
</code></pre></div>
其实现会提取位置参数和关键字参数：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>def validate_request(*args, **kwargs):
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    def process_args(input_arguments):
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>        no_arguments = []
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>        error_arguments = []
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>        # 检查必需的位置参数
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>        for arg in args:
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>            if arg not in input_arguments:
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>                no_arguments.append(arg)
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>        # 检查具有特定值的必需关键字参数
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>        for k, v in kwargs.items():
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>            config_value = input_arguments.get(k, None)
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>            if config_value is None:
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>                no_arguments.append(k)
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>            elif isinstance(v, (tuple, list)):
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>                if config_value not in v:
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>                    error_arguments.append((k, set(v)))
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>            elif config_value != v:
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>                error_arguments.append((k, v))
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>        if no_arguments or error_arguments:
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>            error_string = &quot;&quot;
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>            if no_arguments:
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>                error_string += &quot;required argument are missing: {}; &quot;.format(
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>                    &quot;,&quot;.join(no_arguments)
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>                )
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>            if error_arguments:
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>                error_string += &quot;required argument values: {}&quot;.format(
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>                    &quot;,&quot;.join([&quot;{}={}&quot;.format(a[0], a[1]) for a in error_arguments])
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>                )
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>            return error_string
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>        return None
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>    def wrapper(func):
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>        @wraps(func)
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>        async def decorated_function(*_args, **_kwargs):
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>            errs = process_args(await get_request_json())
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>            if errs:
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>                return get_json_result(
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>                    code=RetCode.ARGUMENT_ERROR,
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>                    message=errs
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>                )
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>            return await func(*_args, **_kwargs)
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>        return decorated_function
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>    return wrapper
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L143-L180">api/utils/api_utils.py143-180</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/session.py#L124-L124">api/apps/sdk/session.py124</a></li>
</ul>
<h4 id="not_allowed_parameters-">@not_allowed_parameters - 参数黑名单<a class="headerlink" href="#not_allowed_parameters-" title="Permanent link">&para;</a></h4>
<p>防止客户端发送特定参数：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>@not_allowed_parameters(&quot;tenant_id&quot;, &quot;user_id&quot;)
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>async def update_dataset(tenant_id, dataset_id):
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    # 确保客户端无法覆盖 tenant_id 或 user_id
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    req = await get_request_json()
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    # ... 实现
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L183-L195">api/utils/api_utils.py183-195</a></li>
</ul>
<h3 id="_4">装饰器堆叠顺序<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>装饰器从下到上应用。典型顺序如下：</p>
<ol>
<li><code>@manager.route()</code> - 注册路由</li>
<li><code>@token_required</code> 或 <code>@login_required</code> - 身份验证</li>
<li><code>@validate_request()</code> - 参数验证</li>
<li><code>async def handler()</code> - 端点实现</li>
</ol>
<p>示例：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>@manager.route(&quot;/chats/&lt;chat_id&gt;/completions&quot;, methods=[&quot;POST&quot;])
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>@token_required
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>@validate_request(&quot;question&quot;)
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>async def chat_completion(tenant_id, chat_id):
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    # tenant_id 由 @token_required 注入
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    # question 由 @validate_request 验证
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>    req = await get_request_json()
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    # ... 实现
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/session.py#L124-L173">api/apps/sdk/session.py124-173</a></li>
</ul>
<hr />
<h2 id="_5">标准化响应格式<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>所有 API 端点都使用 <code>api/utils/api_utils.py</code> 中的辅助函数返回结构一致的 JSON。</p>
<h3 id="_6">响应格式结构<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<h4 id="_7">成功响应<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>{
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    &quot;code&quot;: 0,
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    &quot;message&quot;: &quot;success&quot;,
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    &quot;data&quot;: { ... }
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>}
</code></pre></div>
由以下函数生成：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>def get_result(code=0, message=&quot;success&quot;, data=None):
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>    return jsonify({&quot;code&quot;: code, &quot;message&quot;: message, &quot;data&quot;: data})
</code></pre></div>
<h4 id="_8">错误响应<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>{
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    &quot;code&quot;: 101,
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>    &quot;message&quot;: &quot;Dataset name &#39;example&#39; already exists&quot;
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>}
</code></pre></div>
由以下函数生成：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>def get_error_data_result(code=RetCode.DATA_ERROR, message=&quot;Sorry! Data missing!&quot;):
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    response = {&quot;code&quot;: code, &quot;message&quot;: message}
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    return jsonify(response)
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L286-L306">api/utils/api_utils.py286-306</a></li>
</ul>
<h3 id="_9">错误代码系统<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p><code>common/constants.py</code> 中的 <code>RetCode</code> 枚举定义了所有错误代码：</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>常量</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td><code>SUCCESS</code></td>
<td>操作成功完成</td>
</tr>
<tr>
<td>100</td>
<td><code>ARGUMENT_ERROR</code></td>
<td>请求参数无效</td>
</tr>
<tr>
<td>101</td>
<td><code>DATA_ERROR</code></td>
<td>数据验证失败（重复、约束等）</td>
</tr>
<tr>
<td>102</td>
<td><code>OPERATING_ERROR</code></td>
<td>操作失败（权限、状态问题）</td>
</tr>
<tr>
<td>103</td>
<td><code>AUTHENTICATION_ERROR</code></td>
<td>凭据无效</td>
</tr>
<tr>
<td>401</td>
<td><code>UNAUTHORIZED</code></td>
<td>缺少身份验证</td>
</tr>
<tr>
<td>403</td>
<td><code>FORBIDDEN</code></td>
<td>访问被拒绝</td>
</tr>
<tr>
<td>404</td>
<td><code>NOT_FOUND</code></td>
<td>资源未找到</td>
</tr>
<tr>
<td>500</td>
<td><code>EXCEPTION_ERROR</code></td>
<td>未处理的服务器错误</td>
</tr>
</tbody>
</table>
<p><strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/common/constants.py">common/constants.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/docs/references/http_api_reference.md#L15-L27">docs/references/http_api_reference.md15-27</a></li>
</ul>
<h3 id="_10">异常处理模式<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>端点使用 try-except 块配合标准化的错误响应：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>try:
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    # 数据库操作
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    if not KnowledgebaseService.save(**req):
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>        return get_error_data_result(message=&quot;Failed to create dataset&quot;)
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>    ok, kb = KnowledgebaseService.get_by_id(req[&quot;id&quot;])
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>    if not ok:
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>        return get_error_data_result(message=&quot;Dataset created failed&quot;)
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>    return get_result(data=kb.to_dict())
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>except OperationalError as e:
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>    logging.exception(e)
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>    return get_error_data_result(message=&quot;Database operation failed&quot;)
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/dataset.py#L144-L154">api/apps/sdk/dataset.py144-154</a></li>
</ul>
<hr />
<h2 id="api">API 架构与客户端结构<a class="headerlink" href="#api" title="Permanent link">&para;</a></h2>
<p>RAGFlow API 系统由三层组成：后端公开的 HTTP REST API、Python SDK 客户端库，以及用于无缝集成的 OpenAI 兼容端点。</p>
<h3 id="_11">三层架构<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    PythonSDK["Python SDKragflow_sdk.RAGFlow"]
    DirectHTTP["Direct HTTPcurl, requests"]
    OpenAISDK["OpenAI SDKopenai.OpenAI()"]
    DatasetRoutes["Dataset Routesapi/apps/sdk/dataset.py@manager.route('/datasets')"]
    DocRoutes["Document Routesapi/apps/sdk/doc.py@manager.route('/datasets/{id}/documents')"]
    ChatRoutes["Chat Routesapi/apps/sdk/chat.py@manager.route('/chats')"]
    SessionRoutes["Session Routesapi/apps/sdk/session.py@manager.route('/chats/{id}/sessions')"]
    ChunkRoutes["Chunk Routesapi/apps/sdk/chunk.py@manager.route('/retrieval')"]
    OpenAIRoutes["OpenAI Routesapi/apps/sdk/session.py@manager.route('/chats_openai/{id}')"]
    TokenRequired["@token_requiredValidates Bearer tokenInjects tenant_id"]
    LoginRequired["@login_requiredValidates sessionUses current_user"]
    ValidateRequest["@validate_requestValidates parameters"]
    KBService["KnowledgebaseServiceapi/db/services/knowledgebase_service.py"]
    DocService["DocumentServiceapi/db/services/document_service.py"]
    DialogService["DialogServiceapi/db/services/dialog_service.py"]
    ConvService["ConversationServiceapi/db/services/conversation_service.py"]
    FileService["FileServiceapi/db/services/file_service.py"]
    MySQL["MySQLKnowledgebase, Document,Dialog, Conversation tables"]
    DocStore["DocStoreElasticsearch/InfinityVector + fulltext index"]
    MinIO["MinIO/S3Object storageSTORAGE_IMPL"]
    Redis["RedisTask queueCache"]

    PythonSDK --&gt; DatasetRoutes
    PythonSDK --&gt; DocRoutes
    PythonSDK --&gt; ChatRoutes
    DirectHTTP --&gt; DatasetRoutes
    DirectHTTP --&gt; ChunkRoutes
    OpenAISDK --&gt; OpenAIRoutes
    DatasetRoutes --&gt; TokenRequired
    DocRoutes --&gt; TokenRequired
    ChatRoutes --&gt; TokenRequired
    SessionRoutes --&gt; TokenRequired
    OpenAIRoutes --&gt; TokenRequired
    TokenRequired --&gt; ValidateRequest
    ValidateRequest --&gt; KBService
    ValidateRequest --&gt; DocService
    ValidateRequest --&gt; DialogService
    ValidateRequest --&gt; ConvService
    KBService --&gt; MySQL
    DocService --&gt; MySQL
    DocService --&gt; DocStore
    FileService --&gt; MinIO
    DialogService --&gt; Redis</code></pre>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/dataset.py#L55-L55">api/apps/sdk/dataset.py55</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/doc.py#L72-L72">api/apps/sdk/doc.py72</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/chat.py#L27-L27">api/apps/sdk/chat.py27</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/session.py#L49-L49">api/apps/sdk/session.py49</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L251-L283">api/utils/api_utils.py251-283</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/knowledgebase_service.py">api/db/services/knowledgebase_service.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/dialog_service.py">api/db/services/dialog_service.py</a></li>
</ul>
<hr />
<h2 id="_12">身份验证与租户隔离<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<p>API 请求使用 Bearer 令牌身份验证，并通过 <code>@token_required</code> 装饰器实现自动租户隔离。</p>
<h3 id="_13">基于令牌的身份验证流程<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>[Mermaid sequence]</strong>
<em>(图表结构无法解析)</em></p>
</blockquote>
<p><strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L251-L283">api/utils/api_utils.py251-283</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/db_models.py">api/db/db_models.py</a> (APIToken 模型)</li>
</ul>
<h3 id="id">租户 ID 注入模式<a class="headerlink" href="#id" title="Permanent link">&para;</a></h3>
<p><code>@token_required</code> 装饰器会自动将 <code>tenant_id</code> 作为关键字参数注入：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>@manager.route(&quot;/datasets&quot;, methods=[&quot;POST&quot;])
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>@token_required
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>async def create(tenant_id):
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    # tenant_id 从 API 令牌中自动注入
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>    req = await get_request_json()
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>    # 所有服务调用都使用 tenant_id 进行隔离
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    e, req = KnowledgebaseService.create_with_name(
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>        name=req.pop(&quot;name&quot;),
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>        tenant_id=tenant_id,  # 确保多租户隔离
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>        **req
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>    )
</code></pre></div>
该模式确保了：</p>
<ul>
<li>所有数据库查询都按 <code>tenant_id</code> 过滤</li>
<li>用户无法访问其他租户的资源</li>
<li>处理器中无需手动进行租户 ID 验证</li>
</ul>
<p><strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/dataset.py#L55-L127">api/apps/sdk/dataset.py55-127</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L251-L283">api/utils/api_utils.py251-283</a></li>
</ul>
<hr />
<h2 id="http-api">HTTP API 端点组织<a class="headerlink" href="#http-api" title="Permanent link">&para;</a></h2>
<p>HTTP API 将端点组织到各个功能领域中，每个领域都在 <code>api/apps/sdk/</code> 下的专用模块中实现。所有端点都遵循 RESTful 约定，并返回带有标准化错误代码的 JSON 响应。</p>
<h3 id="_14">端点领域与路由<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    ChatCompletion["POST /chats_openai/{id}/chat/completionsopenai_api.py"]
    AgentCompletion["POST /agents_openai/{id}/chat/completionsopenai_api.py"]
    CreateDataset["POST /datasetsdataset.py:55"]
    ListDatasets["GET /datasetsdataset.py:386"]
    UpdateDataset["PUT /datasets/{id}dataset.py:254"]
    DeleteDatasets["DELETE /datasetsdataset.py:156"]
    GetKG["GET /datasets/{id}/knowledge_graphdataset.py:444"]
    RunGraphRAG["POST /datasets/{id}/run_graphragdataset.py:512"]
    RunRAPTOR["POST /datasets/{id}/run_raptordataset.py:601"]
    UploadDocs["POST /datasets/{id}/documentsdoc.py:72"]
    ListDocs["GET /datasets/{id}/documentsdoc.py:420"]
    UpdateDoc["PUT /datasets/{id}/documents/{doc_id}doc.py:184"]
    DeleteDocs["DELETE /datasets/{id}/documentsdoc.py:670"]
    DownloadDoc["GET /datasets/{id}/documents/{doc_id}doc.py:360"]
    ParseDocs["POST /datasets/{id}/chunksdoc.py:780"]
    ListChunks["GET /datasets/{id}/documents/{doc_id}/chunkschunk.py:26"]
    CreateChunk["POST /datasets/{id}/documents/{doc_id}/chunkschunk.py:175"]
    UpdateChunk["PUT /datasets/{id}/documents/{doc_id}/chunks/{chunk_id}chunk.py:273"]
    DeleteChunk["DELETE /datasets/{id}/documents/{doc_id}/chunkschunk.py:326"]
    RetrieveChunks["POST /retrievalchunk.py:113"]
    CreateChat["POST /chatschat.py:27"]
    ListChats["GET /chatschat.py:271"]
    UpdateChat["PUT /chats/{id}chat.py:144"]
    DeleteChats["DELETE /chatschat.py:229"]
    CreateSession["POST /chats/{id}/sessionsconversation.py:23"]
    ListSessions["GET /chats/{id}/sessionsconversation.py:71"]
    UpdateSession["PUT /chats/{id}/sessions/{session_id}conversation.py:146"]
    DeleteSession["DELETE /chats/{id}/sessions/{session_id}conversation.py:199"]
    Completion["POST /chats/{id}/completionsconversation.py:241"]

    CreateDataset --&gt; UploadDocs
    UploadDocs --&gt; ParseDocs
    ParseDocs --&gt; ListChunks
    ListChunks --&gt; RetrieveChunks
    CreateChat --&gt; CreateSession
    CreateSession --&gt; Completion</code></pre>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/dataset.py#L55-L700">api/apps/sdk/dataset.py55-700</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/doc.py#L72-L1400">api/apps/sdk/doc.py72-1400</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/chunk.py#L26-L400">api/apps/sdk/chunk.py26-400</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/chat.py#L27-L326">api/apps/sdk/chat.py27-326</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/conversation.py#L23-L500">api/apps/sdk/conversation.py23-500</a></li>
</ul>
<h3 id="_15">响应辅助函数<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p><code>api/utils/api_utils.py</code> 模块提供了标准化的响应构建器：</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>用途</th>
<th>返回结构</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>get_result(data, code=0)</code></td>
<td>成功响应</td>
<td><code>{"code": 0, "message": "success", "data": ...}</code></td>
</tr>
<tr>
<td><code>get_error_data_result(message, code=101)</code></td>
<td>错误响应</td>
<td><code>{"code": 101, "message": "..."}</code></td>
</tr>
<tr>
<td><code>get_json_result(code, message, data)</code></td>
<td>通用响应</td>
<td><code>{"code": ..., "message": ..., "data": ...}</code></td>
</tr>
<tr>
<td><code>server_error_response(e)</code></td>
<td>异常处理器</td>
<td>记录并返回格式化的错误</td>
</tr>
</tbody>
</table>
<p>使用模式：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a># 成功案例
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>return get_result(data=dataset.to_dict())
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a># 错误案例
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>return get_error_data_result(
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    message=&quot;Dataset name already exists&quot;,
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>    code=RetCode.DATA_ERROR
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>)
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L109-L141">api/utils/api_utils.py109-141</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L216-L219">api/utils/api_utils.py216-219</a></li>
</ul>
<hr />
<h2 id="python-sdk-ragflow-sdk">Python SDK (<code>ragflow-sdk</code>)<a class="headerlink" href="#python-sdk-ragflow-sdk" title="Permanent link">&para;</a></h2>
<p><code>ragflow-sdk</code> 包在 HTTP API 之上提供了一个面向对象的 Python 接口。SDK 会自动处理身份验证、请求序列化和响应反序列化。</p>
<h3 id="sdk">SDK 客户端初始化<a class="headerlink" href="#sdk" title="Permanent link">&para;</a></h3>
<p><code>RAGFlow</code> 类是管理 HTTP 通信的入口点：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>from ragflow_sdk import RAGFlow
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a># 使用 API 密钥和基地址（base URL）初始化客户端
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>rag = RAGFlow(
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>    api_key=&quot;&lt;YOUR_API_KEY&gt;&quot;,
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>    base_url=&quot;http://localhost:9380&quot;
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>)
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a># 所有请求都会自动包含 Authorization 标头
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a># Authorization: Bearer &lt;YOUR_API_KEY&gt;
</code></pre></div>
<code>sdk/python/ragflow_sdk/ragflow.py</code> 中的实现：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>class RAGFlow:
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>    def __init__(self, api_key, base_url, version=&quot;v1&quot;):
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>        self.user_key = api_key
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>        self.api_url = f&quot;{base_url}/api/{version}&quot;
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>        self.authorization_header = {
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>            &quot;Authorization&quot;: &quot;Bearer {}&quot;.format(self.user_key)
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>        }
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    def post(self, path, json=None, stream=False, files=None):
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>        return requests.post(
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>            url=self.api_url + path,
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>            json=json,
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>            headers=self.authorization_header,
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>            stream=stream,
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>            files=files
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>        )
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/ragflow.py#L27-L50">sdk/python/ragflow_sdk/ragflow.py27-50</a></li>
</ul>
<h3 id="_16">资源模块结构<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    RAGFlow["RAGFlowragflow.pyHTTP client + factory methods"]
    DataSet["DataSetmodules/dataset.pycreate_dataset()list_datasets()"]
    Document["Documentmodules/document.pyupload_documents()parse_documents()"]
    Chat["Chatmodules/chat.pycreate_chat()list_chats()"]
    Session["Sessionmodules/session.pycreate_session()chat()"]
    Agent["Agentmodules/agent.pycreate_agent()invoke()"]
    Chunk["Chunkmodules/chunk.pylist_chunks()update_chunk()"]
    DatasetAPI["/api/v1/datasets"]
    DocAPI["/api/v1/datasets/{id}/documents"]
    ChatAPI["/api/v1/chats"]
    SessionAPI["/api/v1/chats/{id}/sessions"]
    AgentAPI["/api/v1/agents"]
    ChunkAPI["/api/v1/retrieval"]

    RAGFlow --&gt; DataSet
    DataSet --&gt; Document
    RAGFlow --&gt; Chat
    Chat --&gt; Session
    RAGFlow --&gt; Agent
    RAGFlow --&gt; Chunk
    DataSet --&gt; DatasetAPI
    Document --&gt; DocAPI
    Chat --&gt; ChatAPI
    Session --&gt; SessionAPI
    Agent --&gt; AgentAPI
    Chunk --&gt; ChunkAPI</code></pre>
每个模块类：</p>
<ul>
<li>封装单一资源类型</li>
<li>维护与服务器同步的本地状态</li>
<li>提供调用 HTTP 端点的 CRUD 方法</li>
<li>处理请求/响应的序列化</li>
</ul>
<p><strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/ragflow.py#L52-L288">sdk/python/ragflow_sdk/ragflow.py52-288</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/modules/dataset.py">sdk/python/ragflow_sdk/modules/dataset.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/modules/chat.py">sdk/python/ragflow_sdk/modules/chat.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/modules/agent.py">sdk/python/ragflow_sdk/modules/agent.py</a></li>
</ul>
<h3 id="sdk_1">SDK 使用模式<a class="headerlink" href="#sdk_1" title="Permanent link">&para;</a></h3>
<h4 id="_17">工厂方法创建资源<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<p><code>RAGFlow</code> 类提供了返回资源对象的工厂方法：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a># 创建数据集
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>dataset = rag.create_dataset(
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>    name=&quot;my_knowledge_base&quot;,
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>    chunk_method=&quot;naive&quot;,
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>    embedding_model=&quot;BAAI/bge-large-zh-v1.5@BAAI&quot;
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>)
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a># 返回带有 id、name 等属性的 DataSet 实例
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a># 创建聊天助手
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>chat = rag.create_chat(
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>    name=&quot;Customer Support&quot;,
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>    dataset_ids=[dataset.id],
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>    llm=Chat.LLM(model_name=&quot;gpt-4&quot;, temperature=0.1)
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>)
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a># 返回 Chat 实例
</code></pre></div>
<h4 id="_18">实例方法操作资源<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<p>资源对象提供了执行操作的方法：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a># 更新数据集设置
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>dataset.update({
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>    &quot;name&quot;: &quot;Updated Name&quot;,
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    &quot;similarity_threshold&quot;: 0.3
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>})
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a># 上传文档到数据集
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>dataset.upload_documents([{
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>    &quot;display_name&quot;: &quot;manual.pdf&quot;,
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>    &quot;blob&quot;: open(&quot;manual.pdf&quot;, &quot;rb&quot;).read()
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>}])
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a># 触发异步解析
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>dataset.async_parse_documents()
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a># 列出子资源
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>documents = dataset.list_documents(page=1, page_size=10)
</code></pre></div>
<h4 id="_19">状态同步<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h4>
<p>资源对象在本地缓存服务器状态。更新方法会刷新缓存属性：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>dataset = rag.create_dataset(name=&quot;test&quot;)
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>print(dataset.chunk_count)  # 0 (初始状态)
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a># 上传并解析文档...
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>dataset.async_parse_documents()
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a># 从服务器刷新状态
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>dataset_list = rag.list_datasets(id=dataset.id)
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>dataset = dataset_list[0]
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>print(dataset.chunk_count)  # 42 (更新后的状态)
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/ragflow.py#L52-L162">sdk/python/ragflow_sdk/ragflow.py52-162</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/modules/dataset.py">sdk/python/ragflow_sdk/modules/dataset.py</a></li>
</ul>
<hr />
<h2 id="api_1">领域特定 API 实现<a class="headerlink" href="#api_1" title="Permanent link">&para;</a></h2>
<p>每个功能领域都有专门的实现文件处理验证、服务层交互和响应格式化。下图映射了 HTTP 端点与其实现及底层服务之间的关系。</p>
<h3 id="_20">数据集与文档领域<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    CreateDatasetEP["POST /datasets"]
    UploadDocsEP["POST /datasets/{id}/documents"]
    ParseDocsEP["POST /datasets/{id}/chunks"]
    ListChunksEP["GET /datasets/{id}/documents/{doc_id}/chunks"]
    CreateHandler["create()dataset.py:55-155"]
    UploadHandler["upload()doc.py:72-182"]
    ParseHandler["parse()doc.py:780-890"]
    ListChunksHandler["list_chunk()chunk.py:26-111"]
    CreateReq["CreateDatasetReqvalidation_utils.py"]
    FileValidation["File size &amp; name checksdoc.py:143-144"]
    ChunkValidation["Pydantic Chunk modeldoc.py:52-70"]
    KBServiceCreate["KnowledgebaseService.create_with_name()knowledgebase_service.py"]
    FileServiceUpload["FileService.upload_document()file_service.py"]
    TaskServiceQueue["queue_tasks()task_service.py"]
    DocStoreQuery["docStoreConn.search()settings.py"]
    MySQL["MySQLKnowledgebase, Document tables"]
    MinIO["MinIO/S3File binary storage"]
    Redis["RedisTask queue"]
    DocEngine["Elasticsearch/InfinityChunk vector storage"]

    CreateDatasetEP --&gt; CreateHandler
    UploadDocsEP --&gt; UploadHandler
    ParseDocsEP --&gt; ParseHandler
    ListChunksEP --&gt; ListChunksHandler
    CreateHandler --&gt; CreateReq
    UploadHandler --&gt; FileValidation
    ListChunksHandler --&gt; ChunkValidation
    CreateReq --&gt; KBServiceCreate
    FileValidation --&gt; FileServiceUpload
    ParseHandler --&gt; TaskServiceQueue
    ChunkValidation --&gt; DocStoreQuery
    KBServiceCreate --&gt; MySQL
    FileServiceUpload --&gt; MinIO
    TaskServiceQueue --&gt; Redis
    DocStoreQuery --&gt; DocEngine</code></pre>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/dataset.py#L55-L384">api/apps/sdk/dataset.py55-384</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/doc.py#L72-L890">api/apps/sdk/doc.py72-890</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/chunk.py#L26-L400">api/apps/sdk/chunk.py26-400</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/validation_utils.py">api/utils/validation_utils.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/knowledgebase_service.py">api/db/services/knowledgebase_service.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/file_service.py">api/db/services/file_service.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/task_service.py">api/db/services/task_service.py</a></li>
</ul>
<h3 id="_21">数据集管理操作<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<p>数据集端点支持完整的 CRUD 操作，并具有用于知识图谱和 RAPTOR 构建的额外功能：</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>端点</th>
<th>处理器</th>
<th>服务方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>创建</td>
<td><code>POST /datasets</code></td>
<td><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/dataset.py#L55-L155">dataset.py55-155</a></td>
<td><code>KnowledgebaseService.create_with_name()</code></td>
</tr>
<tr>
<td>列表</td>
<td><code>GET /datasets</code></td>
<td><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/dataset.py#L386-L469">dataset.py386-469</a></td>
<td><code>KnowledgebaseService.get_list()</code></td>
</tr>
<tr>
<td>更新</td>
<td><code>PUT /datasets/{id}</code></td>
<td><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/dataset.py#L254-L384">dataset.py254-384</a></td>
<td><code>KnowledgebaseService.update_by_id()</code></td>
</tr>
<tr>
<td>删除</td>
<td><code>DELETE /datasets</code></td>
<td><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/dataset.py#L156-L252">dataset.py156-252</a></td>
<td><code>KnowledgebaseService.delete_by_id()</code></td>
</tr>
<tr>
<td>获取知识图谱</td>
<td><code>GET /datasets/{id}/knowledge_graph</code></td>
<td><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/dataset.py#L444-L510">dataset.py444-510</a></td>
<td><code>DocumentService.get_graph()</code></td>
</tr>
<tr>
<td>构建知识图谱</td>
<td><code>POST /datasets/{id}/run_graphrag</code></td>
<td><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/dataset.py#L512-L599">dataset.py512-599</a></td>
<td><code>queue_raptor_o_graphrag_tasks()</code></td>
</tr>
<tr>
<td>构建 RAPTOR</td>
<td><code>POST /datasets/{id}/run_raptor</code></td>
<td><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/dataset.py#L601-L698">dataset.py601-698</a></td>
<td><code>queue_raptor_o_graphrag_tasks()</code></td>
</tr>
</tbody>
</table>
<h3 id="_22">文档上传与解析流程<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<p>文档处理遵循异步流水线：</p>
<ol>
<li><strong>上传</strong>: 二进制文件存储在 MinIO，元数据存储在 MySQL</li>
<li><strong>排队</strong>: 解析任务连同文档 ID 被加入 Redis 队列</li>
<li><strong>解析</strong>: TaskExecutor 检索文件，应用分块方法</li>
<li><strong>索引</strong>: 分块被向量化并存储在文档引擎中</li>
</ol>
<p>上传处理器在存储前验证文件属性：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>for file_obj in file_objs:
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>    if len(file_obj.filename.encode(&quot;utf-8&quot;)) &gt; FILE_NAME_LEN_LIMIT:
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>        return get_result(
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>            message=f&quot;File name must be {FILE_NAME_LEN_LIMIT} bytes or less.&quot;,
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>            code=RetCode.ARGUMENT_ERROR
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>        )
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/doc.py#L72-L182">api/apps/sdk/doc.py72-182</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/doc.py#L780-L890">api/apps/sdk/doc.py780-890</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/file_service.py">api/db/services/file_service.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/task_service.py">api/db/services/task_service.py</a></li>
</ul>
<h3 id="_23">分块检索与管理<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<p>分块操作提供了对已解析文档段的底层访问：</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>端点</th>
<th>关键参数</th>
</tr>
</thead>
<tbody>
<tr>
<td>列出分块</td>
<td><code>GET /datasets/{id}/documents/{doc_id}/chunks</code></td>
<td><code>keywords</code>、<code>page</code>、<code>page_size</code></td>
</tr>
<tr>
<td>创建分块</td>
<td><code>POST /datasets/{id}/documents/{doc_id}/chunks</code></td>
<td><code>content</code>、<code>important_keywords</code>、<code>questions</code></td>
</tr>
<tr>
<td>更新分块</td>
<td><code>PUT /datasets/{id}/documents/{doc_id}/chunks/{chunk_id}</code></td>
<td><code>content</code>、<code>available</code>、<code>important_keywords</code></td>
</tr>
<tr>
<td>删除分块</td>
<td><code>DELETE /datasets/{id}/documents/{doc_id}/chunks</code></td>
<td><code>chunk_ids</code> (数组)</td>
</tr>
<tr>
<td>检索（搜索）</td>
<td><code>POST /retrieval</code></td>
<td><code>question</code>、<code>dataset_ids</code>、<code>similarity_threshold</code></td>
</tr>
</tbody>
</table>
<p>分块（Chunk）模型使用 Pydantic 验证：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>class Chunk(BaseModel):
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>    id: str = &quot;&quot;
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>    content: str = &quot;&quot;
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>    document_id: str = &quot;&quot;
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>    important_keywords: list = Field(default_factory=list)
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>    questions: list = Field(default_factory=list)
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>    positions: list[list[int]] = Field(default_factory=list)
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>    @validator(&quot;positions&quot;)
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>    def validate_positions(cls, value):
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>        for sublist in value:
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>            if len(sublist) != 5:
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>                raise ValueError(&quot;Each sublist must have length 5&quot;)
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>        return value
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/chunk.py#L26-L400">api/apps/sdk/chunk.py26-400</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/doc.py#L52-L70">api/apps/sdk/doc.py52-70</a></li>
</ul>
<hr />
<h2 id="api_2">聊天与对话 API<a class="headerlink" href="#api_2" title="Permanent link">&para;</a></h2>
<p>聊天领域将聊天助手配置（无状态）与对话会话（有状态）分离开来。这种架构允许每个聊天助手拥有多个并发会话，同时保持对话历史的隔离。</p>
<h3 id="chatsession">聊天（Chat）与会话（Session）的区别<a class="headerlink" href="#chatsession" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    ChatResource["Chat ResourceDialog tableStateless settings"]
    ChatProperties["Properties:- name, description- llm_id, llm_setting- prompt_config- kb_ids (dataset associations)- similarity_threshold- top_n, top_k, rerank_id"]
    Session1["Session 1Conversation tablesession_id: abc123"]
    Session2["Session 2Conversation tablesession_id: def456"]
    Session3["Session 3Conversation tablesession_id: ghi789"]
    Msg1["Messages for Session 1Message tablerole: user/assistant"]
    Msg2["Messages for Session 2Message tablerole: user/assistant"]
    Msg3["Messages for Session 3Message tablerole: user/assistant"]
    CreateChat["POST /chatschat.py:27"]
    CreateSession["POST /chats/{id}/sessionsconversation.py:23"]
    SendMessage["POST /chats/{id}/completionsconversation.py:241"]

    ChatResource --&gt; ChatProperties
    ChatResource --&gt; Session1
    ChatResource --&gt; Session2
    ChatResource --&gt; Session3
    Session1 --&gt; Msg1
    Session2 --&gt; Msg2
    Session3 --&gt; Msg3
    CreateChat --&gt; ChatResource
    CreateSession --&gt; Session1
    SendMessage --&gt; Msg1</code></pre>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/chat.py#L27-L326">api/apps/sdk/chat.py27-326</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/conversation.py#L23-L500">api/apps/sdk/conversation.py23-500</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/dialog_service.py">api/db/services/dialog_service.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/db/services/conversation_service.py">api/db/services/conversation_service.py</a></li>
</ul>
<h3 id="_24">聊天助手创建<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<p>创建聊天需要指定数据集、LLM 配置和提示词设置：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a># Python SDK 示例
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>chat = rag.create_chat(
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    name=&quot;Customer Support&quot;,
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    dataset_ids=[&quot;dataset_id_1&quot;, &quot;dataset_id_2&quot;],
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>    llm=Chat.LLM(
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>        model_name=&quot;gpt-4&quot;,
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>        temperature=0.1,
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>        top_p=0.3,
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>        max_tokens=512
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>    ),
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>    prompt=Chat.Prompt(
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>        similarity_threshold=0.2,
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>        keywords_similarity_weight=0.7,
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>        top_n=8,
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>        prompt=&quot;You are a helpful assistant...&quot;
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>    )
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>)
</code></pre></div>
HTTP 端点会验证各数据集之间嵌入模型的一致性：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>kbs = KnowledgebaseService.get_by_ids(req.get(&quot;kb_ids&quot;, []))
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>embd_ids = [TenantLLMService.split_model_name_and_factory(kb.embd_id)[0]
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>            for kb in kbs]
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>embd_count = list(set(embd_ids))
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>if len(embd_count) &gt; 1:
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>    return get_result(
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>        message=&#39;Datasets use different embedding models.&quot;&#39;,
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>        code=RetCode.AUTHENTICATION_ERROR
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>    )
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/chat.py#L27-L142">api/apps/sdk/chat.py27-142</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/ragflow.py#L110-L162">sdk/python/ragflow_sdk/ragflow.py110-162</a></li>
</ul>
<h3 id="_25">会话管理与消息流<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h3>
<p>每个会话都维护着隔离的对话状态：</p>
<table>
<thead>
<tr>
<th>会话属性</th>
<th>类型</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>字符串</td>
<td>唯一的会话标识符</td>
</tr>
<tr>
<td><code>name</code></td>
<td>字符串</td>
<td>用户定义的会话名称</td>
</tr>
<tr>
<td><code>messages</code></td>
<td>数组</td>
<td>完整的消息历史</td>
</tr>
<tr>
<td><code>chat_id</code></td>
<td>字符串</td>
<td>所属聊天助手的引用</td>
</tr>
<tr>
<td><code>user_id</code></td>
<td>字符串</td>
<td>多用户场景下的可选用户标识符</td>
</tr>
</tbody>
</table>
<p>完成（completion）端点处理消息并返回流式或非流式响应：</p>
<p><strong>流式响应：</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>data: {&quot;answer&quot;: &quot;Hello&quot;, &quot;reference&quot;: {...}}
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>data: {&quot;answer&quot;: &quot; there&quot;, &quot;reference&quot;: {...}}
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>data: {&quot;answer&quot;: &quot;!&quot;, &quot;reference&quot;: {...}}
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>data: [DONE]
</code></pre></div>
<strong>非流式响应：</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>{
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>    &quot;code&quot;: 0,
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>    &quot;data&quot;: {
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>        &quot;answer&quot;: &quot;Hello there!&quot;,
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>        &quot;reference&quot;: {
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>            &quot;chunks&quot;: [...],
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>            &quot;doc_aggs&quot;: {...}
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>        }
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>    }
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>}
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/conversation.py#L241-L500">api/apps/sdk/conversation.py241-500</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/docs/references/http_api_reference.md#L1700-L2000">docs/references/http_api_reference.md1700-2000</a></li>
</ul>
<hr />
<h2 id="openai-api">OpenAI 兼容 API 端点<a class="headerlink" href="#openai-api" title="Permanent link">&para;</a></h2>
<p>RAGFlow 提供了与 OpenAI 聊天完成 API 接受相同请求格式的兼容端点，从而能够与现有的 OpenAI SDK 客户端无缝集成。</p>
<h3 id="openai">OpenAI 兼容层<a class="headerlink" href="#openai" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    OpenAISDK["OpenAI SDKopenai.OpenAI()"]
    ClientConfig["Configuration:api_key='ragflow-key'base_url='http://host/api/v1/chats_openai/{chat_id}'"]
    ChatOAI["POST /chats_openai/{chat_id}/chat/completionsopenai_api.py"]
    AgentOAI["POST /agents_openai/{agent_id}/chat/completionsopenai_api.py"]
    ParseMessages["Extract messages array"]
    ParseStream["Extract stream flag"]
    ParseExtraBody["Extract extra_body:- reference- metadata_condition"]
    DialogService["DialogService.get_by_id()"]
    RAGChat["RAG retrieval + LLM chat"]
    FormatResponse["Format as OpenAI response:ChatCompletionChunk orChatCompletion"]
    StreamChunk["Streaming:{  'id': 'chatcmpl-...',  'object': 'chat.completion.chunk',  'choices': [{'delta': {'content': '...'}}]}"]
    NonStream["Non-streaming:{  'id': 'chatcmpl-...',  'object': 'chat.completion',  'choices': [{'message': {'content': '...'}}],  'usage': {...}}"]

    OpenAISDK --&gt; ClientConfig
    ClientConfig --&gt; ChatOAI
    ClientConfig --&gt; AgentOAI
    ChatOAI --&gt; ParseMessages
    ChatOAI --&gt; ParseStream
    ChatOAI --&gt; ParseExtraBody
    ParseMessages --&gt; DialogService
    DialogService --&gt; RAGChat
    RAGChat --&gt; FormatResponse
    FormatResponse --&gt; StreamChunk
    FormatResponse --&gt; NonStream</code></pre>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/docs/references/http_api_reference.md#L28-L173">docs/references/http_api_reference.md28-173</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/docs/references/python_api_reference.md#L37-L97">docs/references/python_api_reference.md37-97</a></li>
</ul>
<h3 id="openai-api_1">OpenAI API 请求格式<a class="headerlink" href="#openai-api_1" title="Permanent link">&para;</a></h3>
<p>RAGFlow 接受标准的 OpenAI 请求参数，并在 <code>extra_body</code> 中支持可选扩展：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a># 对 RAGFlow 使用 OpenAI SDK
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>from openai import OpenAI
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>client = OpenAI(
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>    api_key=&quot;ragflow-api-key&quot;,
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>    base_url=&quot;http://localhost:9380/api/v1/chats_openai/&lt;chat_id&gt;&quot;
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>)
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>completion = client.chat.completions.create(
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>    model=&quot;model&quot;,  # 由 RAGFlow 自动解析
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>    messages=[
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;What is RAGFlow?&quot;}
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>    ],
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>    stream=True,
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>    extra_body={
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>        &quot;reference&quot;: True,  # 包含来源引用
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>        &quot;metadata_condition&quot;: {  # 按元数据过滤
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>            &quot;logic&quot;: &quot;and&quot;,
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>            &quot;conditions&quot;: [{
<a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>                &quot;name&quot;: &quot;author&quot;,
<a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>                &quot;comparison_operator&quot;: &quot;is&quot;,
<a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>                &quot;value&quot;: &quot;John Doe&quot;
<a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a>            }]
<a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a>        }
<a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a>    }
<a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a>)
</code></pre></div>
<h3 id="_26">响应格式映射<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<p>RAGFlow 将内部响应转换为 OpenAI 格式：</p>
<table>
<thead>
<tr>
<th>RAGFlow 字段</th>
<th>OpenAI 字段</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>answer</code></td>
<td><code>choices[0].message.content</code></td>
<td>生成的文本</td>
</tr>
<tr>
<td><code>reference.chunks</code></td>
<td><code>choices[0].delta.reference</code> (流式)</td>
<td>自定义扩展</td>
</tr>
<tr>
<td><code>reference.chunks</code></td>
<td><code>choices[0].message.reference</code> (非流式)</td>
<td>自定义扩展</td>
</tr>
<tr>
<td>令牌计数</td>
<td><code>usage.prompt_tokens</code>、<code>usage.completion_tokens</code></td>
<td>标准用法统计</td>
</tr>
</tbody>
</table>
<p><code>reference</code> 字段是一个 RAGFlow 扩展，包含检索到的分块及其相似度分数：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>{
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>    &quot;reference&quot;: {
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>        &quot;chunks&quot;: {
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>            &quot;20&quot;: {
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>                &quot;id&quot;: &quot;chunk_id&quot;,
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>                &quot;content&quot;: &quot;Source text...&quot;,
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>                &quot;document_id&quot;: &quot;doc_id&quot;,
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>                &quot;document_name&quot;: &quot;file.pdf&quot;,
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>                &quot;similarity&quot;: 0.85,
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>                &quot;positions&quot;: [[12, 11, 11, 11, 11]]
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>            }
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>        },
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>        &quot;doc_aggs&quot;: {
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>            &quot;file.pdf&quot;: {
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>                &quot;doc_name&quot;: &quot;file.pdf&quot;,
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>                &quot;doc_id&quot;: &quot;doc_id&quot;,
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>                &quot;count&quot;: 3
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a>            }
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>        }
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>    }
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>}
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/docs/references/http_api_reference.md#L80-L163">docs/references/http_api_reference.md80-163</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L419-L461">api/utils/api_utils.py419-461</a></li>
</ul>
<hr />
<h2 id="_27">请求验证与错误处理<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h2>
<p>API 使用 Pydantic 模型和自定义验证器实现了全面的验证。请求验证发生在执行服务层之前，确保早期错误检测和一致的错误响应。</p>
<h3 id="_28">验证架构<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>验证层</th>
<th>实现方式</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pydantic 模型</td>
<td><code>validation_utils.py</code></td>
<td><code>CreateDatasetReq</code>、<code>UpdateDatasetReq</code></td>
</tr>
<tr>
<td>自定义验证器</td>
<td><code>@validator</code> 装饰器</td>
<td>字段约束、格式验证</td>
</tr>
<tr>
<td>业务逻辑检查</td>
<td>服务方法</td>
<td>重复名称检查、权限验证</td>
</tr>
<tr>
<td>数据库约束</td>
<td>ORM 模型</td>
<td>外键验证、唯一约束</td>
</tr>
</tbody>
</table>
<h3 id="_29">验证流程示例<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a># validation_utils.py
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>class CreateDatasetReq(BaseModel):
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>    name: str
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>    chunk_method: Optional[str] = &quot;naive&quot;
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>    embedding_model: Optional[str] = None
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>    @validator(&quot;name&quot;)
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>    def validate_name(cls, v):
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>        if not v or len(v.strip()) == 0:
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>            raise ValueError(&quot;Dataset name cannot be empty&quot;)
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>        if len(v.encode(&quot;utf-8&quot;)) &gt; 128:
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>            raise ValueError(&quot;Dataset name too long (max 128 bytes)&quot;)
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>        return v.strip()
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>    @validator(&quot;chunk_method&quot;)
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>    def validate_chunk_method(cls, v):
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>        valid_methods = {&quot;naive&quot;, &quot;manual&quot;, &quot;qa&quot;, &quot;table&quot;, ...}
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>        if v not in valid_methods:
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>            raise ValueError(f&quot;Invalid chunk_method: {v}&quot;)
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>        return v
<a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>
<a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a># 端点用法
<a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>@manager.route(&quot;/datasets&quot;, methods=[&quot;POST&quot;])
<a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a>@token_required
<a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a>async def create(tenant_id):
<a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a>    req, err = await validate_and_parse_json_request(request, CreateDatasetReq)
<a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a>    if err is not None:
<a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a>        return get_error_argument_result(err)
<a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a>    # 继续处理经过验证的数据...
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/validation_utils.py">api/utils/validation_utils.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/dataset.py#L119-L127">api/apps/sdk/dataset.py119-127</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L323-L324">api/utils/api_utils.py323-324</a></li>
</ul>
<h3 id="_30">标准错误响应<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h3>
<p>所有验证错误和运行时错误都返回结构化的 JSON：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>{
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>    &quot;code&quot;: 100,
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>    &quot;message&quot;: &quot;Dataset name cannot be empty&quot;
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>}
</code></pre></div>
常见错误场景及其代码：</p>
<table>
<thead>
<tr>
<th>场景</th>
<th>代码</th>
<th>消息模式</th>
</tr>
</thead>
<tbody>
<tr>
<td>缺少必需字段</td>
<td>100</td>
<td>"<code>field_name</code> is required"</td>
</tr>
<tr>
<td>字段值无效</td>
<td>100</td>
<td>"Invalid <code>field_name</code>: ..."</td>
</tr>
<tr>
<td>资源重复</td>
<td>101</td>
<td>"Resource with name '...' already exists"</td>
</tr>
<tr>
<td>资源未找到</td>
<td>102</td>
<td>"Resource not found"</td>
</tr>
<tr>
<td>权限被拒绝</td>
<td>102</td>
<td>"You don't own the resource"</td>
</tr>
<tr>
<td>数据库错误</td>
<td>500</td>
<td>"Database operation failed"</td>
</tr>
</tbody>
</table>
<p><strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/docs/references/http_api_reference.md#L12-L24">docs/references/http_api_reference.md12-24</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L309-L333">api/utils/api_utils.py309-333</a></li>
</ul>
<hr />
<h2 id="python-sdk">Python SDK 实现详情<a class="headerlink" href="#python-sdk" title="Permanent link">&para;</a></h2>
<p>Python SDK 使用一种一致的模式，其中每种资源类型（数据集、聊天、Agent）都由一个类表示，该类维护状态并提供操作方法。所有 HTTP 通信都通过父级 <code>RAGFlow</code> 实例进行。</p>
<h3 id="_31">资源类模式<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<p>每个 SDK 模块都遵循如下结构：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a># modules/dataset.py
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>class DataSet:
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>    def __init__(self, rag, res):
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>        self.rag = rag  # 对 RAGFlow 客户端的引用
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>        self.id = res.get(&quot;id&quot;)
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>        self.name = res.get(&quot;name&quot;)
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>        # ... 其他属性
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>    def update(self, update_message: dict):
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>        res = self.rag.put(f&quot;/datasets/{self.id}&quot;, update_message)
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>        res = res.json()
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>        if res.get(&quot;code&quot;) != 0:
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>            raise Exception(res[&quot;message&quot;])
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>        # 更新本地状态
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>        for k, v in update_message.items():
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>            setattr(self, k, v)
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a>
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a>    def upload_documents(self, document_list: list[dict]):
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a>        # 准备多部分表单数据（multipart form data）
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a>        files = [(&quot;file&quot;, (doc[&quot;display_name&quot;], doc[&quot;blob&quot;]))
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a>                 for doc in document_list]
<a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a>        res = self.rag.post(f&quot;/datasets/{self.id}/documents&quot;, files=files)
<a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a>        # ... 处理响应
</code></pre></div>
<h3 id="_32">属性同步<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h3>
<p>资源对象维护服务器状态的本地副本。更新操作会同步属性：</p>
<ol>
<li><strong>读穿透（Read-through）</strong>: 属性访问返回本地缓存的值</li>
<li><strong>写穿透（Write-through）</strong>: 更新方法调用 API 并刷新本地状态</li>
<li><strong>懒加载（Lazy loading）</strong>: 相关对象（如文档）按需加载</li>
</ol>
<h3 id="_33">嵌套资源管理<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h3>
<p>父资源提供子资源的工厂方法：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a># DataSet 提供文档管理功能
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>dataset = rag.create_dataset(name=&quot;kb&quot;)
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a># 上传操作返回更新后的数据集状态
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>dataset.upload_documents([{&quot;display_name&quot;: &quot;doc.pdf&quot;, &quot;blob&quot;: b&quot;...&quot;}])
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a># 列表操作返回 Document 对象
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>docs = dataset.list_documents(page=1, page_size=10)
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a># 文档操作
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>doc = docs[0]
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>doc.update({&quot;parser_config&quot;: {&quot;chunk_token_num&quot;: 256}})
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>doc.download()  # 返回字节流
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/modules/dataset.py">sdk/python/ragflow_sdk/modules/dataset.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/modules/document.py">sdk/python/ragflow_sdk/modules/document.py</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/sdk/python/ragflow_sdk/modules/chunk.py">sdk/python/ragflow_sdk/modules/chunk.py</a></li>
</ul>
<hr />
<h2 id="_34">特殊用途端点<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h2>
<p>除了标准的 CRUD 操作外，API 还为检索测试、元数据过滤和 Dify 兼容性等高级功能提供了专用端点。</p>
<h3 id="_35">检索测试<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h3>
<p>检索端点允许在不创建聊天的情况下测试 RAG 搜索：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>POST /api/v1/retrieval
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>Content-Type: application/json
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>Authorization: Bearer &lt;token&gt;
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>{
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>    &quot;question&quot;: &quot;What is RAGFlow?&quot;,
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>    &quot;dataset_ids&quot;: [&quot;dataset_id_1&quot;],
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>    &quot;document_ids&quot;: [&quot;doc_id_1&quot;, &quot;doc_id_2&quot;],  # 可选过滤器
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>    &quot;similarity_threshold&quot;: 0.2,
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>    &quot;vector_similarity_weight&quot;: 0.3,
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>    &quot;top_k&quot;: 1024,
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>    &quot;page&quot;: 1,
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a>    &quot;page_size&quot;: 30,
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a>    &quot;metadata_condition&quot;: {
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>        &quot;logic&quot;: &quot;and&quot;,
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a>        &quot;conditions&quot;: [{
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a>            &quot;name&quot;: &quot;author&quot;,
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a>            &quot;comparison_operator&quot;: &quot;is&quot;,
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a>            &quot;value&quot;: &quot;John&quot;
<a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a>        }]
<a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a>    }
<a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a>}
</code></pre></div>
返回带有相似度分数和元数据的分块数组。</p>
<p><strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/chunk.py#L113-L173">api/apps/sdk/chunk.py113-173</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/docs/references/http_api_reference.md#L2200-L2350">docs/references/http_api_reference.md2200-2350</a></li>
</ul>
<h3 id="_36">元数据过滤<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h3>
<p>文档支持用于过滤的任意 JSON 元数据：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a># 设置文档元数据
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>PUT /api/v1/datasets/{id}/documents/{doc_id}
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>{
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>    &quot;meta_fields&quot;: {
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>        &quot;author&quot;: &quot;Jane Doe&quot;,
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>        &quot;department&quot;: &quot;Engineering&quot;,
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>        &quot;sensitivity&quot;: &quot;public&quot;
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>    }
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>}
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a># 使用元数据过滤器进行查询
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>POST /api/v1/retrieval
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>{
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>    &quot;dataset_ids&quot;: [&quot;dataset_id&quot;],
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>    &quot;question&quot;: &quot;...&quot;,
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>    &quot;metadata_condition&quot;: {
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>        &quot;logic&quot;: &quot;and&quot;,
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>        &quot;conditions&quot;: [
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>            {&quot;name&quot;: &quot;department&quot;, &quot;comparison_operator&quot;: &quot;is&quot;, &quot;value&quot;: &quot;Engineering&quot;},
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>            {&quot;name&quot;: &quot;sensitivity&quot;, &quot;comparison_operator&quot;: &quot;is_not&quot;, &quot;value&quot;: &quot;confidential&quot;}
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>        ]
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a>    }
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a>}
</code></pre></div>
支持的比较运算符：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>is</code></td>
<td>精确匹配</td>
</tr>
<tr>
<td><code>is_not</code></td>
<td>不等于</td>
</tr>
<tr>
<td><code>contains</code></td>
<td>子串匹配</td>
</tr>
<tr>
<td><code>not_contains</code></td>
<td>不包含</td>
</tr>
<tr>
<td><code>greater_than</code></td>
<td>数值 &gt;</td>
</tr>
<tr>
<td><code>less_than</code></td>
<td>数值 &lt;</td>
</tr>
</tbody>
</table>
<p><strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/doc.py#L255-L258">api/apps/sdk/doc.py255-258</a></li>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/common/metadata_utils.py">common/metadata_utils.py</a></li>
</ul>
<h3 id="dify">Dify 兼容检索<a class="headerlink" href="#dify" title="Permanent link">&para;</a></h3>
<p>RAGFlow 提供了 Dify 兼容端点，用于与 Dify 工作流集成：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>POST /api/v1/dify/retrieval
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>Authorization: Bearer &lt;api_key&gt;
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>{
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>    &quot;knowledge_id&quot;: &quot;dataset_id&quot;,
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>    &quot;query&quot;: &quot;What is RAGFlow?&quot;,
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>    &quot;use_kg&quot;: false,
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>    &quot;retrieval_setting&quot;: {
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>        &quot;score_threshold&quot;: 0.0,
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>        &quot;top_k&quot;: 1024
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>    },
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>    &quot;metadata_condition&quot;: {...}
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>}
</code></pre></div>
返回 Dify 格式的记录：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>{
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>    &quot;records&quot;: [{
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>        &quot;content&quot;: &quot;RAGFlow is...&quot;,
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>        &quot;score&quot;: 0.85,
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>        &quot;title&quot;: &quot;document.pdf&quot;,
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>        &quot;metadata&quot;: {&quot;doc_id&quot;: &quot;...&quot;, &quot;author&quot;: &quot;...&quot;}
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>    }]
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>}
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/apps/sdk/dify_retrieval.py#L29-L183">api/apps/sdk/dify_retrieval.py29-183</a></li>
</ul>
<hr />
<h2 id="api_3">API 工具与辅助函数<a class="headerlink" href="#api_3" title="Permanent link">&para;</a></h2>
<p><code>api/utils/api_utils.py</code> 模块提供了跨所有 API 端点使用的共享工具，以确保行为一致。</p>
<h3 id="_37">关键工具函数<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>用途</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>token_required</code></td>
<td>身份验证装饰器</td>
<td>所有 SDK 路由上的 <code>@token_required</code></td>
</tr>
<tr>
<td><code>get_result()</code></td>
<td>成功响应格式化程序</td>
<td>返回 <code>{"code": 0, "data": ...}</code></td>
</tr>
<tr>
<td><code>get_error_data_result()</code></td>
<td>错误响应格式化程序</td>
<td>返回 <code>{"code": 101, "message": "..."}</code></td>
</tr>
<tr>
<td><code>get_parser_config()</code></td>
<td>默认解析器配置生成器</td>
<td>提供分块方法默认值</td>
</tr>
<tr>
<td><code>deep_merge()</code></td>
<td>递归字典合并</td>
<td>将用户配置与默认值合并</td>
</tr>
<tr>
<td><code>verify_embedding_availability()</code></td>
<td>模型验证</td>
<td>检查模型是否存在且可访问</td>
</tr>
<tr>
<td><code>check_duplicate_ids()</code></td>
<td>去重</td>
<td>从列表中移除重复 ID</td>
</tr>
</tbody>
</table>
<h3 id="_38">配置合并<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h3>
<p><code>get_parser_config()</code> 函数通过将用户设置与特定方法的默认值合并，生成完整的解析器配置：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>def get_parser_config(chunk_method, parser_config):
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>    base_defaults = {
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>        &quot;table_context_size&quot;: 0,
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>        &quot;image_context_size&quot;: 0,
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>    }
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>    key_mapping = {
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>        &quot;naive&quot;: {
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>            &quot;layout_recognize&quot;: &quot;DeepDOC&quot;,
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>            &quot;chunk_token_num&quot;: 512,
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>            &quot;delimiter&quot;: &quot;\n&quot;,
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>            &quot;raptor&quot;: {&quot;use_raptor&quot;: True, ...},
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>            &quot;graphrag&quot;: {&quot;use_graphrag&quot;: True, ...}
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>        },
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>        &quot;qa&quot;: {&quot;raptor&quot;: {&quot;use_raptor&quot;: False}, ...},
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>        # ... 其他方法
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a>    }
<a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a>
<a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a>    default_config = key_mapping[chunk_method]
<a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a>    if not parser_config:
<a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a>        return deep_merge(base_defaults, default_config)
<a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a>    return deep_merge(deep_merge(base_defaults, default_config), parser_config)
</code></pre></div>
这确保了所有必需配置字段都存在，同时允许用户进行覆盖。</p>
<p><strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L341-L417">api/utils/api_utils.py341-417</a></li>
</ul>
<h3 id="openai_1">OpenAI 响应格式化<a class="headerlink" href="#openai_1" title="Permanent link">&para;</a></h3>
<p><code>get_data_openai()</code> 辅助函数格式化 RAGFlow 响应以匹配 OpenAI 的 API 规范：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>def get_data_openai(id, model, content, finish_reason,
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>                    prompt_tokens=0, completion_tokens=0,
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>                    stream=False):
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>    if stream:
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>        return {
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>            &quot;id&quot;: f&quot;chatcmpl-{id}&quot;,
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>            &quot;object&quot;: &quot;chat.completion.chunk&quot;,
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>            &quot;model&quot;: model,
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>            &quot;choices&quot;: [{
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>                &quot;delta&quot;: {&quot;content&quot;: content},
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>                &quot;finish_reason&quot;: finish_reason,
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>                &quot;index&quot;: 0
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>            }]
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>        }
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a>    return {
<a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a>        &quot;id&quot;: f&quot;chatcmpl-{id}&quot;,
<a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a>        &quot;object&quot;: &quot;chat.completion&quot;,
<a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a>        &quot;model&quot;: model,
<a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a>        &quot;choices&quot;: [{
<a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a>            &quot;message&quot;: {&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: content},
<a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a>            &quot;finish_reason&quot;: finish_reason,
<a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a>            &quot;index&quot;: 0
<a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a>        }],
<a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a>        &quot;usage&quot;: {
<a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a>            &quot;prompt_tokens&quot;: prompt_tokens,
<a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a>            &quot;completion_tokens&quot;: completion_tokens,
<a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a>            &quot;total_tokens&quot;: prompt_tokens + completion_tokens
<a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a>        }
<a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a>    }
</code></pre></div>
<strong>来源：</strong></p>
<ul>
<li><a href="https://github.com/infiniflow/ragflow/blob/80a16e71/api/utils/api_utils.py#L419-L461">api/utils/api_utils.py419-461</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>