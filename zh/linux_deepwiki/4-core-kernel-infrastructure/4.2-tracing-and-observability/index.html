
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://wiki.neurosama.uk/zh/linux_deepwiki/4-core-kernel-infrastructure/4.2-tracing-and-observability/">
      
      
        <link rel="prev" href="../4.1-process-scheduling-and-sched_ext/">
      
      
        <link rel="next" href="../4.3-build-system-and-kbuild/">
      
      
        
          <link rel="alternate" href="../../../../linux_deepwiki/4-core-kernel-infrastructure/4.2-tracing-and-observability/" hreflang="en">
        
          <link rel="alternate" href="./" hreflang="zh">
        
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>追踪与可观测性 - DeepWiki</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../" title="DeepWiki" class="md-header__button md-logo" aria-label="DeepWiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DeepWiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              追踪与可观测性
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="选择当前语言">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../../linux_deepwiki/4-core-kernel-infrastructure/4.2-tracing-and-observability/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Chesszyh/Wiki" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../" class="md-tabs__link">
        
  
  
    
  
  Welcome to DeepWiki

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../celery_deepwiki/1-celery-overview/1.1-installation-and-setup/" class="md-tabs__link">
          
  
  
  Celery deepwiki

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../lc0_deepwiki/1-lc0-overview/" class="md-tabs__link">
          
  
  
  Lc0 deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../1-linux-kernel-overview/" class="md-tabs__link">
          
  
  
  Linux deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ragflow_deepwiki/1-overview/" class="md-tabs__link">
          
  
  
  Ragflow deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../redis_deepwiki/1-redis-overview/" class="md-tabs__link">
          
  
  
  Redis deepwiki

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../stockfish_deepwiki/2-core-data-structures-and-types/" class="md-tabs__link">
          
  
  
  Stockfish deepwiki

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../" title="DeepWiki" class="md-nav__button md-logo" aria-label="DeepWiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DeepWiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Chesszyh/Wiki" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome to DeepWiki
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Celery deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Celery deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    1 celery overview
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    1 celery overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/1.1-installation-and-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    安装与设置
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/1.2-core-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/1-celery-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Celery 概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 the celery application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 the celery application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.1-application-initialization-and-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    应用初始化与配置
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.2-task-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务注册
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.3-message-brokers-and-routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    消息代理与路由
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/2.4-amqp-layer-and-message-protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AMQP 层与消息协议
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/2-the-celery-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Celery 应用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 tasks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 tasks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.1-task-definition-and-invocation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务定义与调用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.2-task-lifecycle-and-states/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务生命周期与状态
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.3-error-handling-and-retry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    错误处理与重试
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.4-time-limits-and-rate-limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    时间限制与速率限制
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/3.5-task-options-and-customization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务选项与自定义
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/3-tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务 (Tasks)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 canvas workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 canvas workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.1-signatures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    签名与构建 (Signature and Composition)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.2-workflow-primitives/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作流原语 (Workflow Primitives)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.3-advanced-canvas-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    高级 Canvas 特性
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/4.4-chord-execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chord 执行
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/4-canvas-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas 工作流
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 workers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 workers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.1-worker-architecture-and-bootsteps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作者架构与 Bootsteps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.2-worker-lifecycle-and-shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作者生命周期与停机
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.3-concurrency-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    并发模型 (Concurrency Models)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.4-worker-configuration-and-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作者配置与控制
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.5-consumer-and-event-loops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    消费者与事件循环
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/5.6-autoscaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    自动伸缩 (Autoscaling)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/5-workers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作者 (Workers)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 result backends
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 result backends
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.1-backend-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    后端架构 (Backend Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.2-backend-implementations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    后端实现 (Backend Implementations)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.3-result-storage-and-retrieval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    结果序列化与检索
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.4-chord-coordination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chord 协调 (Chord Coordination)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/6.5-backend-resilience/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    错误处理与弹性 (Error Handling and Resilience)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/6-result-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    结果后端 (Result Backends)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_13" >
        
          
          <label class="md-nav__link" for="__nav_2_13" id="__nav_2_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 periodic tasks (beat)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 periodic tasks (beat)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.1-beat-scheduler-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Beat 调度器架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.2-schedule-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    调度类型 (Schedule Types)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.3-time-and-timezone-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    时间与时区处理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/7.4-persistent-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    持久化存储 (Persistent Storage)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/7-periodic-tasks-%28beat%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    周期性任务 (Beat)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_15" >
        
          
          <label class="md-nav__link" for="__nav_2_15" id="__nav_2_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 monitoring and control
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 monitoring and control
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.1-remote-control-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    远程控制命令 (Remote Control Commands)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.2-worker-inspection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工作者检查 (Worker Inspection)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/8.3-event-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    事件系统 (Event System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/8-monitoring-and-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    监控与控制 (Monitoring and Control)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_17" >
        
          
          <label class="md-nav__link" for="__nav_2_17" id="__nav_2_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 command line interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 command line interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.1-cli-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI 架构 (CLI Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.2-worker-and-beat-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Worker 和 Beat 命令
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.3-management-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    管理命令 (Management Commands)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/9.4-multi-worker-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    多工作者管理 (Multi-worker Management)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/9-command-line-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    命令行界面 (Command Line Interface)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_19" >
        
          
          <label class="md-nav__link" for="__nav_2_19" id="__nav_2_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 development and testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_19">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 development and testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.1-testing-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    测试基础设施 (Testing Infrastructure)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.2-test-matrix-and-environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    测试矩阵与环境 (Test Matrix and Environments)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.3-integration-and-smoke-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    集成与冒烟测试 (Integration and Smoke Tests)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/10.4-code-quality-and-documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    代码质量与文档 (Code Quality and Documentation)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/10-development-and-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    开发与测试 (Development and Testing)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_21" >
        
          
          <label class="md-nav__link" for="__nav_2_21" id="__nav_2_21_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    11 packaging and distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_21">
            <span class="md-nav__icon md-icon"></span>
            
  
    11 packaging and distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.1-package-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    包结构 (Package Structure)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.2-dependencies-and-extras/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    依赖与 Extras (Dependencies and Extras)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/11.3-version-management-and-release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    版本管理与发布 (Version Management and Release)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../celery_deepwiki/11-packaging-and-distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    打包与分发 (Packaging and Distribution)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Lc0 deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Lc0 deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/1-lc0-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lc0 概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 building and installation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 building and installation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.1-build-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建系统架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.2-linux-and-macos-build-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux 和 macOS 构建过程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.3-windows-build-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows 构建过程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/2.4-version-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    版本管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/2-building-and-installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建与安装
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 core engine architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 core engine architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/3.1-uci-protocol-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI 协议实现
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/3.2-configuration-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/3-core-engine-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心引擎架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 chess representation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 chess representation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.1-bitboards-and-move-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    位棋盘 (Bitboards)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.2-position-encoding-and-history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    局面编码与历史
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.3-syzygy-tablebase-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Syzygy 残局库集成
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/4.4-pgn-and-game-import/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PGN 与对局导入
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/4-chess-representation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    棋局表示
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 search algorithm
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 search algorithm
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.1-mcts-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCTS 实现
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.2-search-parameters-and-stopping-conditions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    搜索参数与终止条件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/5.3-search-tree-caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    缓存系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/5-search-algorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    搜索算法
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 neural network system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 neural network system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.1-network-interface-and-backend-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    网络接口与后端架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.2-weights-loading-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    权重加载与管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.3-cuda-and-cudnn-backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CUDA 和 cuDNN 后端
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.4-onnx-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ONNX 集成
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.5-xla-and-hlo-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XLA 和 HLO 支持
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/6.6-memory-caching-and-performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    内存缓存与性能
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/6-neural-network-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    神经网络系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 self play system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 self play system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/7-self-play-system/7.1-tournament-organization-and-game-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    锦标赛组织
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/7-self-play-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    自对弈系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_14" >
        
          
          <label class="md-nav__link" for="__nav_3_14" id="__nav_3_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 utilities and infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 utilities and infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.1-fast-mathematical-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    快速数学函数
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.2-threading-and-synchronization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    线程与同步
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/8.3-benchmarking-and-performance-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    基准测试与性能测试
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/8-utilities-and-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    实用工具与基础设施
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_16" >
        
          
          <label class="md-nav__link" for="__nav_3_16" id="__nav_3_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 continuous integration and deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 continuous integration and deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/9.1-circleci-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CircleCI 工作流
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/9.2-windows-build-and-packaging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows 构建与打包
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lc0_deepwiki/9-continuous-integration-and-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    持续集成与部署
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Linux deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linux deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-linux-kernel-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux 内核概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    2 rust for linux
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 rust for linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-rust-for-linux/2.1-rust-kernel-apis-and-abstractions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust 内核 API 与抽象
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-rust-for-linux/2.2-nova-drm-graphics-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nova DRM 图形驱动
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-rust-for-linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust for Linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    3 virtualization (kvm)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 virtualization (kvm)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-virtualization-%28kvm%29/3.1-kvm-x86-virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM x86 虚拟化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-virtualization-%28kvm%29/3.2-kvm-arm64-virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM ARM64 虚拟化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-virtualization-%28kvm%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    虚拟化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" checked>
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    4 core kernel infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 core kernel infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4.1-process-scheduling-and-sched_ext/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    进程调度与 sched_ext
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    追踪与可观测性
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    追踪与可观测性
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        架构概览
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        环形缓冲区实现
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="环形缓冲区实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        环形缓冲区架构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        环形缓冲区页面管理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        环形缓冲区事件格式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ftrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ftrace: 函数追踪基础设施
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ftrace: 函数追踪基础设施">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ftrace_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ftrace 核心组件
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftrace_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ftrace 操作与过滤
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        动态函数修补
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        追踪事件与追踪点
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="追踪事件与追踪点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        追踪事件架构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        事件注册与启用
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        事件过滤
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kprobes-uprobes-fprobes" class="md-nav__link">
    <span class="md-ellipsis">
      
        动态探针：kprobes, uprobes, fprobes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="动态探针：kprobes, uprobes, fprobes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        动态探针类型
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        探针事件创建与参数
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fprobe" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fprobe 与函数图集成
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        函数图追踪器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="函数图追踪器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        函数图基础设施
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        函数图数据结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        图追踪器输出格式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        直方图触发器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="直方图触发器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        直方图架构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        直方图触发器语法
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        直方图追踪映射实现
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tracefs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tracefs 接口
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tracefs 接口">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tracefs_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tracefs 文件层次结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tracefs_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        常见 Tracefs 操作
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      
        追踪器插件
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="追踪器插件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      
        追踪器插件接口
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      
        延迟追踪器
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        性能考量
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="性能考量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      
        开销缓解技术
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      
        缓冲区管理
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      
        与其他子系统集成
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="与其他子系统集成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      
        调度器集成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpf" class="md-nav__link">
    <span class="md-ellipsis">
      
        BPF 集成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      
        合成事件
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      
        总结
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4.3-build-system-and-kbuild/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建系统与 Kbuild
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心内核基础设施
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    5 storage and io
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 storage and io
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-storage-and-io/5.1-io_uring-asynchronous-io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    io_uring 异步 I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-storage-and-io/5.2-btrfs-copy-on-write-filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Btrfs 写时复制文件系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-storage-and-io/5.3-ufs-storage-controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UFS 存储控制器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-storage-and-io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    存储与 I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    6 graphics and display
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 graphics and display
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-graphics-and-display/6.1-amdgpu-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AMDGPU 驱动
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-graphics-and-display/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    图形与显示
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Ragflow deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Ragflow deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/1-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 getting started and deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 getting started and deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/2-getting-started-and-deployment/2.1-docker-compose-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Compose 部署
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/2-getting-started-and-deployment/2.4-build-system-and-cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建系统与 CI/CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/2-getting-started-and-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    入门与部署
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 system architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 system architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/3.1-core-application-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心应用服务
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/3.2-data-storage-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数据存储架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/3.3-task-execution-and-queue-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    任务执行与队列系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/3-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    系统架构 (System Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 frontend application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 frontend application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/4-frontend-application/4.1-internationalization-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    国际化系统 (Internationalization System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/4-frontend-application/4.2-application-structure-and-ui-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    应用结构与路由 (Application Structure and Routing)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/4-frontend-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    前端应用 (Frontend Application)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 llm integration system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 llm integration system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.1-model-factory-pattern-and-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    模型工厂模式与注册 (Model Factory Pattern and Registration)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.2-provider-implementations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    提供商实现 (Provider Implementations)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.3-error-handling-and-retry-logic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    错误处理与重试逻辑 (Error Handling and Retry Logic)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.4-tenant-configuration-and-usage-tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    租户配置与用量追踪 (Tenant Configuration and Usage Tracking)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/5.5-tool-calling-and-function-use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工具调用与函数使用 (Tool Calling and Function Use)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/5-llm-integration-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM 集成系统 (LLM Integration System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 document processing pipeline
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 document processing pipeline
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.1-document-parsing-strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    文档解析策略 (Document Parsing Strategies)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.2-chunking-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    切分方法 (Chunking Methods)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.3-content-enhancement-and-embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6.3 内容增强与嵌入 (Content Enhancement and Embedding)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.4-layout-recognition-and-ocr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6.4 布局识别与 OCR (Layout Recognition and OCR)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.5-knowledge-graph-construction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6.5 知识图谱构建 (Knowledge Graph Construction)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/6.6-raptor-hierarchical-summarization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6.6 RAPTOR 分层摘要 (RAPTOR Hierarchical Summarization)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/6-document-processing-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    文档处理流水线 (Document Processing Pipeline)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_12" >
        
          
          <label class="md-nav__link" for="__nav_5_12" id="__nav_5_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 data source integration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 data source integration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/7.1-connector-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7.1 连接器架构 (Connector Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/7.2-synchronization-and-scheduling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7.2 同步与调度 (Synchronization and Scheduling)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/7.3-supported-data-sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7.3 支持的数据源 (Supported Data Sources)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/7-data-source-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7 数据源集成 (Data Source Integration)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_14" >
        
          
          <label class="md-nav__link" for="__nav_5_14" id="__nav_5_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 backend api system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 backend api system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.1-api-architecture-and-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API 架构与 SDK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.2-authentication-and-authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8.2 身份验证与多租户 (Authentication and Multi-tenancy)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.3-dataset-and-knowledge-base-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8.3 数据集与知识库 API (Dataset and Knowledge Base APIs)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.4-document-and-file-management-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8.4 文档与文件管理 API (Document and File Management APIs)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/8.5-chat-and-conversation-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8.5 聊天与对话 API (Chat and Conversation APIs)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/8-backend-api-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8 后端 API 系统 (Backend API System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_16" >
        
          
          <label class="md-nav__link" for="__nav_5_16" id="__nav_5_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 agent and workflow system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 agent and workflow system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.1-canvas-engine-and-dsl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.1 画布引擎与 DSL (Canvas Engine and DSL)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.2-component-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.2 组件系统架构 (Component System Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.3-built-in-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.3 内置组件 (Built-in Components)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.4-workflow-execution-and-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.4 工作流执行与流式输出 (Workflow Execution and Streaming)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.5-state-and-variable-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.5 状态与变量管理 (State and Variable Management)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.6-agent-tools-and-react-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent 工具与 ReAct 循环
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/9.7-canvas-api-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9.7 画布 API 与管理 (Canvas API and Management)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/9-agent-and-workflow-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9 智能体与工作流系统 (Agent and Workflow System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_18" >
        
          
          <label class="md-nav__link" for="__nav_5_18" id="__nav_5_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 retrieval and rag system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_18">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 retrieval and rag system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.1-query-processing-and-refinement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10.1 查询处理与精炼 (Query Processing and Refinement)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.2-hybrid-search-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10.2 混合搜索架构 (Hybrid Search Architecture)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.3-reranking-and-metadata-filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10.3 重排序与元数据过滤 (Reranking and Metadata Filtering)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/10.4-response-generation-and-citations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10.4 回答生成与引用 (Response Generation and Citations)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ragflow_deepwiki/10-retrieval-and-rag-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10 检索与 RAG 系统 (Retrieval and RAG System)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Redis deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Redis deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/1-redis-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis 概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 redis core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 redis core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.1-server-architecture-and-lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    服务器架构与生命周期
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.2-client-connection-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    客户端连接管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.3-command-processing-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    命令处理流水线
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/2.4-configuration-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/2-redis-core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis 核心
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 data storage and management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 data storage and management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.1-core-data-types-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心数据类型实现
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.2-streams-and-blocking-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    流 (Streams) 与阻塞操作
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.3-hyperloglog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HyperLogLog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.4-memory-efficient-data-structures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    内存高效的数据结构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.5-dictionary-and-key-value-store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    字典与键值存储
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/3.6-dynamic-string-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    动态字符串库 (SDS)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/3-data-storage-and-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数据存储与管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 memory management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 memory management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/4.1-eviction-and-expiration-policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    逐出与过期策略
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/4.2-memory-allocators-and-build-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    内存分配器与构建系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/4-memory-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    内存管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8" >
        
          
          <label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 scripting and extensions
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 scripting and extensions
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/5.1-lua-scripting-and-redis-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lua 脚本与 Redis 函数
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/5.2-redis-module-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis 模块 API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/5-scripting-and-extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    脚本与扩展
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_10" >
        
          
          <label class="md-nav__link" for="__nav_6_10" id="__nav_6_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 high availability and distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 high availability and distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/6.1-redis-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis 集群 (Cluster)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/6.2-redis-sentinel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis 哨兵 (Sentinel)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/6-high-availability-and-distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    高可用与扩展
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/7-persistence-and-replication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    持久化与复制
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_13" >
        
          
          <label class="md-nav__link" for="__nav_6_13" id="__nav_6_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    8 security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    8 security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/8.1-access-control-lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    访问控制列表 (ACL)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/8.2-network-security-and-tls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    网络安全与 TLS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/8-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    安全
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_15" >
        
          
          <label class="md-nav__link" for="__nav_6_15" id="__nav_6_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    9 client tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    9 client tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/9-client-tools/9.1-redis-cli-and-benchmark-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis CLI 与基准测试工具
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/9-client-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    客户端工具
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_17" >
        
          
          <label class="md-nav__link" for="__nav_6_17" id="__nav_6_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    10 development and testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    10 development and testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.1-build-system-and-dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建系统与依赖
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.2-testing-framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    测试框架
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/10.3-continuous-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    持续集成 (CI)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../redis_deepwiki/10-development-and-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    开发与测试
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Stockfish deepwiki
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Stockfish deepwiki
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/2-core-data-structures-and-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心数据结构与类型
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 board representation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 board representation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.1-position-and-state-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    局面与状态管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.2-bitboards-and-low-level-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    位棋盘与低级操作
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/3.3-move-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    着法生成
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/3-board-representation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    棋盘表示
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 search system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 search system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.1-search-algorithm-and-iterative-deepening/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    搜索算法与迭代加深
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.2-thread-management-and-parallel-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    线程管理与并行搜索
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/4.3-move-ordering-and-move-picker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    着法排序与着法拾取器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/4-search-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    搜索系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
        
          
          <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 evaluation system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 evaluation system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/5-evaluation-system/5.1-nnue-neural-network-evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NNUE 神经网络评估
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/5-evaluation-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    评估系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_8" >
        
          
          <label class="md-nav__link" for="__nav_7_8" id="__nav_7_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 external interface
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 external interface
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/6.1-uci-protocol-handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI 协议处理程序
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/6.2-uci-options-and-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCI 选项与配置
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/6-external-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    外部接口
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_10" >
        
          
          <label class="md-nav__link" for="__nav_7_10" id="__nav_7_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 infrastructure and support
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 infrastructure and support
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.1-build-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    构建系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.2-utilities-and-support-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    实用程序和支持函数
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/7.3-testing-and-benchmarking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    测试与基准测试
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stockfish_deepwiki/7-infrastructure-and-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    基础设施与支持
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        架构概览
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        环形缓冲区实现
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="环形缓冲区实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        环形缓冲区架构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        环形缓冲区页面管理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        环形缓冲区事件格式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ftrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ftrace: 函数追踪基础设施
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ftrace: 函数追踪基础设施">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ftrace_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ftrace 核心组件
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftrace_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ftrace 操作与过滤
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        动态函数修补
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        追踪事件与追踪点
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="追踪事件与追踪点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        追踪事件架构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        事件注册与启用
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        事件过滤
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kprobes-uprobes-fprobes" class="md-nav__link">
    <span class="md-ellipsis">
      
        动态探针：kprobes, uprobes, fprobes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="动态探针：kprobes, uprobes, fprobes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        动态探针类型
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        探针事件创建与参数
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fprobe" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fprobe 与函数图集成
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        函数图追踪器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="函数图追踪器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        函数图基础设施
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        函数图数据结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        图追踪器输出格式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        直方图触发器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="直方图触发器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        直方图架构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        直方图触发器语法
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        直方图追踪映射实现
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tracefs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tracefs 接口
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tracefs 接口">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tracefs_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tracefs 文件层次结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tracefs_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        常见 Tracefs 操作
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      
        追踪器插件
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="追踪器插件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      
        追踪器插件接口
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      
        延迟追踪器
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        性能考量
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="性能考量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      
        开销缓解技术
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      
        缓冲区管理
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      
        与其他子系统集成
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="与其他子系统集成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      
        调度器集成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpf" class="md-nav__link">
    <span class="md-ellipsis">
      
        BPF 集成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      
        合成事件
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      
        总结
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="_1">追踪与可观测性<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>相关源文件</p>
<ul>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/Documentation/trace/events.rst">Documentation/trace/events.rst</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/Documentation/trace/ftrace.rst">Documentation/trace/ftrace.rst</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/arm64/include/asm/ftrace.h">arch/arm64/include/asm/ftrace.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/arm64/kernel/ftrace.c">arch/arm64/kernel/ftrace.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/loongarch/include/asm/ftrace.h">arch/loongarch/include/asm/ftrace.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/loongarch/kernel/ftrace_dyn.c">arch/loongarch/kernel/ftrace_dyn.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/powerpc/include/asm/ftrace.h">arch/powerpc/include/asm/ftrace.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/powerpc/kernel/trace/ftrace.c">arch/powerpc/kernel/trace/ftrace.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/powerpc/kernel/trace/ftrace_64_pg.c">arch/powerpc/kernel/trace/ftrace_64_pg.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/powerpc/kernel/trace/ftrace_entry.S">arch/powerpc/kernel/trace/ftrace_entry.S</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/s390/include/asm/ftrace.h">arch/s390/include/asm/ftrace.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/x86/include/asm/ftrace.h">arch/x86/include/asm/ftrace.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/x86/kernel/ftrace.c">arch/x86/kernel/ftrace.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/arch/x86/kernel/ftrace_64.S">arch/x86/kernel/ftrace_64.S</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/include/linux/fprobe.h">include/linux/fprobe.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/include/linux/ftrace.h">include/linux/ftrace.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/include/linux/ftrace_regs.h">include/linux/ftrace_regs.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/include/linux/ring_buffer.h">include/linux/ring_buffer.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/include/linux/string.h">include/linux/string.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/include/linux/trace_events.h">include/linux/trace_events.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/include/trace/events/block.h">include/trace/events/block.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/include/trace/stages/stage3_trace_output.h">include/trace/stages/stage3_trace_output.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/include/trace/stages/stage7_class_define.h">include/trace/stages/stage7_class_define.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/Kconfig">kernel/trace/Kconfig</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/Makefile">kernel/trace/Makefile</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/blktrace.c">kernel/trace/blktrace.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/fgraph.c">kernel/trace/fgraph.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/fprobe.c">kernel/trace/fprobe.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ftrace.c">kernel/trace/ftrace.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/pid_list.c">kernel/trace/pid_list.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/pid_list.h">kernel/trace/pid_list.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c">kernel/trace/ring_buffer.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.c">kernel/trace/trace.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.h">kernel/trace/trace.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_dynevent.c">kernel/trace/trace_dynevent.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_dynevent.h">kernel/trace/trace_dynevent.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_entries.h">kernel/trace/trace_entries.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_eprobe.c">kernel/trace/trace_eprobe.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events.c">kernel/trace/trace_events.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events_hist.c">kernel/trace/trace_events_hist.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events_synth.c">kernel/trace/trace_events_synth.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events_trigger.c">kernel/trace/trace_events_trigger.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_fprobe.c">kernel/trace/trace_fprobe.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_functions.c">kernel/trace/trace_functions.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_functions_graph.c">kernel/trace/trace_functions_graph.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_irqsoff.c">kernel/trace/trace_irqsoff.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_kdb.c">kernel/trace/trace_kdb.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_kprobe.c">kernel/trace/trace_kprobe.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_output.c">kernel/trace/trace_output.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_output.h">kernel/trace/trace_output.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_probe.c">kernel/trace/trace_probe.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_probe.h">kernel/trace/trace_probe.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_probe_tmpl.h">kernel/trace/trace_probe_tmpl.h</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_sched_switch.c">kernel/trace/trace_sched_switch.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_sched_wakeup.c">kernel/trace/trace_sched_wakeup.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_selftest.c">kernel/trace/trace_selftest.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_uprobe.c">kernel/trace/trace_uprobe.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/lib/tests/string_kunit.c">lib/tests/string_kunit.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/samples/fprobe/fprobe_example.c">samples/fprobe/fprobe_example.c</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fcb70a56/samples/trace_events/trace-events-sample.h">samples/trace_events/trace-events-sample.h</a></li>
</ul>
<p>Linux 内核追踪与可观测性基础设施为调试、性能分析和运行时自省提供了全面的机制。该系统使开发人员能够以最小的开销追踪函数调用、捕获内核事件、测量延迟并分析系统行为。</p>
<p>有关编译追踪基础设施的构建系统信息，请参阅 <a href="/torvalds/linux/4.3-build-system-and-kbuild">构建系统与 Kbuild</a>。有关调度器与追踪集成的信息 (sched_ext 追踪)，请参阅 <a href="/torvalds/linux/4.1-process-scheduling-and-sched_ext">进程调度与 sched_ext</a>。</p>
<h2 id="_2">架构概览<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>追踪基础设施由几个相互连接的子系统组成，共同工作以捕获、存储和报告内核活动：</p>
<p><pre class="mermaid"><code>flowchart TD
    TraceFSAPI["tracefs API/sys/kernel/tracing"]
    TraceEvents["事件文件events/*/"]
    TracingOn["tracing_ontrace_pipe"]
    Ftrace["ftrace函数追踪"]
    TraceEvents_API["追踪事件TRACE_EVENT()"]
    Kprobes["动态探针kprobe/uprobe/fprobe"]
    FunctionGraph["函数图入口/出口追踪"]
    TraceCore["trace.cstruct trace_array"]
    Tracers["追踪器插件struct tracer"]
    TraceBuffer["trace_buffer每实例缓冲区"]
    RingBuffer["ring_buffer.cstruct trace_buffer"]
    PerCPUBuffer["每 CPU 缓冲区ring_buffer_per_cpu"]
    BufferPages["缓冲区页面buffer_page list"]
    FtraceCallsite["_mcount/fentry调用点"]
    Tracepoints["DEFINE_TRACE()静态追踪点"]
    ProbePoints["探针插入kprobe/uprobe 站点"]

    TraceFSAPI --&gt; TraceCore
    TraceEvents --&gt; TraceCore
    TracingOn --&gt; TraceCore
    Ftrace --&gt; TraceCore
    TraceEvents --&gt; API_TraceCore
    Kprobes --&gt; TraceCore
    FunctionGraph --&gt; TraceCore
    TraceCore --&gt; Tracers
    TraceCore --&gt; TraceBuffer
    TraceBuffer --&gt; RingBuffer
    RingBuffer --&gt; PerCPUBuffer
    PerCPUBuffer --&gt; BufferPages
    FtraceCallsite --&gt; Ftrace
    Tracepoints --&gt; TraceEvents_API
    ProbePoints --&gt; Kprobes
    FunctionGraph --&gt; FtraceCallsite</code></pre>
<strong>架构：核心追踪子系统与数据流</strong></p>
<p>追踪系统是分层组织的：</p>
<ul>
<li><strong>用户空间接口</strong>：tracefs 文件系统提供基于文件的控制和输出</li>
<li><strong>前端 API</strong>：针对不同用例的不同追踪机制（ftrace、事件、探针）</li>
<li><strong>核心基础设施</strong>：通过 <code>struct trace_array</code> 和追踪器插件进行中央协调</li>
<li><strong>环形缓冲区</strong>：用于高效数据存储的无锁每 CPU 循环缓冲区</li>
<li><strong>数据收集</strong>：遍布内核的插桩点</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.c#L534-L536">kernel/trace/trace.c534-536</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.h#L328-L449">kernel/trace/trace.h328-449</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c#L570-L597">kernel/trace/ring_buffer.c570-597</a></p>
<h2 id="_3">环形缓冲区实现<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>环形缓冲区是追踪系统的基础，以最小的开销为追踪数据提供无锁的每 CPU 存储。</p>
<h3 id="_4">环形缓冲区架构<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    TB_cpus["cpus: int"]
    TB_buffers["buffers: ring_buffer_per_cpu**"]
    TB_clock["clock: u64 (*)(void)"]
    TB_mutex["mutex: struct mutex"]
    RBPC_cpu["cpu: int"]
    RBPC_pages["pages: list_head"]
    RBPC_head_page["head_page: buffer_page*"]
    RBPC_tail_page["tail_page: buffer_page*"]
    RBPC_commit_page["commit_page: buffer_page*"]
    RBPC_reader_page["reader_page: buffer_page*"]
    RBPC_lock["lock: arch_spinlock_t"]
    BP_list["list: list_head"]
    BP_write["write: local_t"]
    BP_read["read: unsigned"]
    BP_page["page: buffer_data_page*"]
    BDP_time_stamp["time_stamp: u64"]
    BDP_commit["commit: local_t"]
    BDP_data["data: unsigned char[]"]

    TB --&gt; buffers_RBPC_cpu
    RBPC --&gt; pages_BP_list
    RBPC --&gt; head_page_BP_list
    RBPC --&gt; tail_page_BP_list
    RBPC --&gt; commit_page_BP_list
    RBPC --&gt; reader_page_BP_list
    BP --&gt; page_BDP_time_stamp</code></pre>
<strong>图表：环形缓冲区数据结构</strong></p>
<p>环形缓冲区使用一种复杂的页面交换机制来实现无锁读取：</p>
<ul>
<li><strong>写入者操作</strong>：写入尾部页面，满时推进</li>
<li><strong>读取者操作</strong>：将其专用读取器页面与缓冲区页面交换</li>
<li><strong>页面结构</strong>：每个页面包含时间戳、提交计数器和数据数组</li>
<li><strong>每 CPU 设计</strong>：消除了跨 CPU 同步开销</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c#L512-L568">kernel/trace/ring_buffer.c512-568</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c#L340-L369">kernel/trace/ring_buffer.c340-369</a></p>
<h3 id="_5">环形缓冲区页面管理<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>环形缓冲区使用每 CPU 的页面循环列表和特殊的读取器页面来实现无锁设计：</p>
<table>
<thead>
<tr>
<th>组件</th>
<th>用途</th>
<th>关键字段</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ring_buffer_per_cpu</code></td>
<td>每 CPU 缓冲区实例</td>
<td><code>head_page</code>, <code>tail_page</code>, <code>commit_page</code>, <code>reader_page</code></td>
</tr>
<tr>
<td><code>buffer_page</code></td>
<td>页面元数据</td>
<td><code>write</code> (local_t), <code>read</code>, <code>entries</code>, <code>real_end</code></td>
</tr>
<tr>
<td><code>buffer_data_page</code></td>
<td>实际数据存储</td>
<td><code>time_stamp</code>, <code>commit</code>, <code>data[]</code></td>
</tr>
<tr>
<td>页面列表</td>
<td>循环链表</td>
<td>写入者在填满时移动通过页面</td>
</tr>
<tr>
<td>读取器页面</td>
<td>专用读取页面</td>
<td>与缓冲区页面交换以进行无锁读取</td>
</tr>
</tbody>
</table>
<p>关键的见解是读取器页面允许在不阻塞写入的情况下进行读取。当读取器完成消费其页面时，它会与环形缓冲区中的下一页交换，如 <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c#L88-L154">kernel/trace/ring_buffer.c88-154</a> 中的 ASCII 艺术所示。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c#L359-L369">kernel/trace/ring_buffer.c359-369</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c#L512-L568">kernel/trace/ring_buffer.c512-568</a></p>
<h3 id="_6">环形缓冲区事件格式<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>存储在环形缓冲区中的事件使用压缩格式以最小化开销：</p>
<p><pre class="mermaid"><code>flowchart TD
    PADDING["RINGBUF_TYPE_PADDING填充对齐"]
    TIME_EXTEND["RINGBUF_TYPE_TIME_EXTEND扩展时间戳"]
    TIME_STAMP["RINGBUF_TYPE_TIME_STAMP绝对时间戳"]
    DATA["RINGBUF_TYPE_DATA0-28: 实际数据"]
    TypeLen["type_len: 5 位事件类型或长度"]
    TimeDelta["time_delta: 27 位时间戳增量"]
    Array["array: 32 位扩展数据"]
    EventData["事件数据可变长度"]

    TypeLen --&gt; EventData
    TimeDelta --&gt; EventData
    Array --&gt; EventData</code></pre>
<strong>图表：环形缓冲区事件编码</strong></p>
<p>事件格式使用位压缩来最小化空间：</p>
<ul>
<li><strong>type_len 字段 (5 位)</strong>：编码事件类型（填充、时间扩展、时间戳）或数据长度</li>
<li><strong>time_delta 字段 (27 位)</strong>：存储与前一个事件的时间戳增量</li>
<li><strong>array 字段</strong>：当 type_len 为 0 时用于扩展长度，或用于扩展时间戳</li>
</ul>
<p>这种压缩格式允许环形缓冲区在支持精确时间戳的同时，以最小的每事件开销存储事件。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c#L66-L86">kernel/trace/ring_buffer.c66-86</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c#L202-L242">kernel/trace/ring_buffer.c202-242</a></p>
<h2 id="ftrace">Ftrace: 函数追踪基础设施<a class="headerlink" href="#ftrace" title="Permanent link">&para;</a></h2>
<p>Ftrace 通过编译器插桩和动态修补提供具有最小运行时开销的全面函数调用追踪。</p>
<h3 id="ftrace_1">Ftrace 核心组件<a class="headerlink" href="#ftrace_1" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    DynFtrace["struct dyn_ftrace每函数元数据"]
    ModifyCode["ftrace_modify_code()文本修补"]
    FtracePages["ftrace_pages基于页面的存储"]
    MCcount["fentry/_mcount由 -pg 插入"]
    FtraceRegs["struct ftrace_regs寄存器状态"]
    FtraceOps["struct ftrace_ops追踪回调"]
    FtraceFunc["func: ftrace_func_t回调函数"]
    FtraceHash["func_hash: ftrace_hash过滤器哈希表"]
    OpsList["ftrace_ops_listRCU 列表"]
    FilterHash["filter_hash要追踪的函数"]
    NotraceHash["notrace_hash要跳过的函数"]
    PIDList["function_pids进程过滤"]

    MCcount --&gt; FtraceOps
    FtraceOps --&gt; FtraceFunc
    FtraceOps --&gt; FtraceHash
    FtraceOps --&gt; OpsList
    FtraceHash --&gt; FilterHash
    FtraceHash --&gt; NotraceHash
    FtraceOps --&gt; PIDList
    DynFtrace --&gt; ModifyCode
    FtracePages --&gt; DynFtrace</code></pre>
<strong>图表：Ftrace 架构与控制流</strong></p>
<p>Ftrace 通过多个层级运行：</p>
<ul>
<li><strong>编译器插桩</strong>：GCC/Clang 在函数入口插入 <code>__fentry__</code> 调用</li>
<li><strong>动态修补</strong>：运行时修改插桩以启用/禁用追踪</li>
<li><strong>回调系统</strong>：<code>ftrace_ops</code> 结构体注册带有过滤器的回调</li>
<li><strong>哈希表</strong>：通过函数名称或地址进行高效过滤</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ftrace.c#L88-L102">kernel/trace/ftrace.c88-102</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ftrace.c#L1143-L1149">kernel/trace/ftrace.c1143-1149</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/include/linux/ftrace.h#L1-L69">include/linux/ftrace.h1-69</a></p>
<h3 id="ftrace_2">Ftrace 操作与过滤<a class="headerlink" href="#ftrace_2" title="Permanent link">&para;</a></h3>
<p><code>struct ftrace_ops</code> 为函数追踪消费者提供了接口：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>func</code></td>
<td><code>ftrace_func_t</code></td>
<td>为每个被追踪函数调用的回调</td>
</tr>
<tr>
<td><code>flags</code></td>
<td><code>unsigned long</code></td>
<td>操作标志 (SAVE_REGS, PID 等)</td>
</tr>
<tr>
<td><code>func_hash</code></td>
<td><code>struct ftrace_hash*</code></td>
<td>用于过滤的哈希表</td>
</tr>
<tr>
<td><code>local_hash.filter_hash</code></td>
<td><code>struct ftrace_hash*</code></td>
<td>要包含的函数</td>
</tr>
<tr>
<td><code>local_hash.notrace_hash</code></td>
<td><code>struct ftrace_hash*</code></td>
<td>要排除的函数</td>
</tr>
<tr>
<td><code>trampoline</code></td>
<td><code>unsigned long</code></td>
<td>自定义蹦床 (trampoline) 地址</td>
</tr>
</tbody>
</table>
<p>过滤系统使用哈希表来高效地确定要追踪哪些函数。<code>ftrace_hash</code> 结构体 <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ftrace.c#L1087-L1090">kernel/trace/ftrace.c1087-1090</a> 包含由函数地址索引的 <code>ftrace_func_entry</code> 元素的桶。</p>
<p>进程级过滤通过存储要追踪或排除的 PID 集合的 <code>trace_pid_list</code> 结构体实现。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ftrace.c#L1092-L1099">kernel/trace/ftrace.c1092-1099</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.c#L652-L724">kernel/trace/trace.c652-724</a></p>
<h3 id="_7">动态函数修补<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>当启用 <code>CONFIG_DYNAMIC_FTRACE</code> 时，ftrace 使用运行时代码修改来最小化开销：</p>
<p><pre class="mermaid"><code>flowchart TD
    RecordMcount["recordmcount构建时工具"]
    MCountLoc["__mcount_loc 段函数地址"]
    FtraceInit["ftrace_init()初始化结构"]
    CreatePages["分配 ftrace_pages"]
    PopulateDynFtrace["创建 dyn_ftrace 条目"]
    EnableFunction["启用函数修补为调用 ftrace"]
    DisableFunction["禁用函数修补为 nop"]
    TextPoke["text_poke()安全代码修改"]

    RecordMcount --&gt; MCountLoc
    MCountLoc --&gt; FtraceInit
    FtraceInit --&gt; CreatePages
    CreatePages --&gt; PopulateDynFtrace
    PopulateDynFtrace --&gt; EnableFunction
    PopulateDynFtrace --&gt; DisableFunction
    EnableFunction --&gt; TextPoke
    DisableFunction --&gt; TextPoke</code></pre>
<strong>图表：动态 Ftrace 初始化与运行时修补</strong></p>
<p>过程如下：</p>
<ol>
<li><strong>构建时</strong>：<code>recordmcount</code> 工具识别所有函数入口点</li>
<li><strong>启动时</strong>：<code>ftrace_init()</code> 为每个函数创建 <code>dyn_ftrace</code> 条目</li>
<li><strong>运行时</strong>：代码被修补为调用 ftrace 处理程序或作为 NOP 执行</li>
</ol>
<p>这允许在禁用时以零开销启用/禁用追踪。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ftrace.c#L1143-L1153">kernel/trace/ftrace.c1143-1153</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ftrace.c#L331-L392">kernel/trace/ftrace.c331-392</a></p>
<h2 id="_8">追踪事件与追踪点<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<p>追踪事件使用 <code>TRACE_EVENT()</code> 宏系统在整个内核中提供静态插桩点。</p>
<h3 id="_9">追踪事件架构<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    TRACE_EVENT["TRACE_EVENT()宏定义"]
    EventClass["trace_event_class共享功能"]
    EventCall["trace_event_call每事件元数据"]
    FieldsArray["fields_array字段定义"]
    DefineFields["define_fields()字段注册"]
    PrintFmt["print_fmt格式字符串"]
    EventFile["trace_event_file每实例状态"]
    EnabledFlag["flags: 已启用/已过滤"]
    FilterExpr["filter事件过滤器"]
    Trigger["trigger触发器命令"]
    Tracepoint["Tracepoint 调用trace_##name()"]
    ReserveEvent["trace_event_buffer_reserve()"]
    RecordData["存储事件数据"]
    CommitEvent["trace_event_buffer_commit()"]

    TRACE --&gt; EVENT_EventClass
    TRACE --&gt; EVENT_EventCall
    EventClass --&gt; FieldsArray
    EventClass --&gt; DefineFields
    EventCall --&gt; PrintFmt
    EventCall --&gt; EventFile
    EventFile --&gt; EnabledFlag
    EventFile --&gt; FilterExpr
    EventFile --&gt; Trigger
    EventFile --&gt; Tracepoint
    Tracepoint --&gt; ReserveEvent
    ReserveEvent --&gt; RecordData
    RecordData --&gt; CommitEvent</code></pre>
<strong>图表：追踪事件基础设施</strong></p>
<p>追踪事件系统使用代码生成来创建高效的追踪代码：</p>
<ul>
<li><strong>TRACE_EVENT() 宏</strong>：定义事件名称、参数、字段和打印格式</li>
<li><strong>trace_event_class</strong>：具有相同签名的事件的共享代码</li>
<li><strong>trace_event_call</strong>：每事件元数据，包括名称、系统和格式</li>
<li><strong>trace_event_file</strong>：每实例状态，跟踪启用/过滤状态</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events.c#L1-L49">kernel/trace/trace_events.c1-49</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.h#L181-L227">kernel/trace/trace.h181-227</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/include/linux/trace_events.h#L1-L700">include/linux/trace_events.h1-700</a></p>
<h3 id="_10">事件注册与启用<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>追踪事件在启动或模块加载时注册，并且可以动态启用：</p>
<table>
<thead>
<tr>
<th>状态</th>
<th>描述</th>
<th>实现</th>
</tr>
</thead>
<tbody>
<tr>
<td>已注册</td>
<td>事件存在于系统中</td>
<td><code>ftrace_events</code> 列表中的 <code>trace_event_call</code></td>
</tr>
<tr>
<td>已启用</td>
<td>事件记录到缓冲区</td>
<td>设置 <code>TRACE_EVENT_FL_ENABLED</code> 标志</td>
</tr>
<tr>
<td>已过滤</td>
<td>事件有过滤器</td>
<td>附加到 <code>trace_event_file</code> 的 <code>event_filter</code></td>
</tr>
<tr>
<td>已触发</td>
<td>事件有触发器</td>
<td>附加的 <code>event_trigger_data</code> 列表</td>
</tr>
</tbody>
</table>
<p>启用路径流程：</p>
<ol>
<li>用户写入 "1" 到 <code>events/&lt;system&gt;/&lt;event&gt;/enable</code></li>
<li><code>event_enable_write()</code> 处理写入 <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events.c">kernel/trace/trace_events.c</a></li>
<li>调用 <code>ftrace_event_enable_disable()</code> 更新状态</li>
<li>更新标志并可能注册/注销追踪点</li>
</ol>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events.c#L618-L700">kernel/trace/trace_events.c618-700</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.h#L324-L449">kernel/trace/trace.h324-449</a></p>
<h3 id="_11">事件过滤<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>事件支持使用简单表达式语言的运行时过滤：</p>
<p><pre class="mermaid"><code>flowchart TD
    FilterString["'pid == 1234 &amp;&amp; ret &lt; 0'"]
    Parser["过滤器解析器parse_filter()"]
    AndNode["AND 节点"]
    EqNode["== 节点pid, 1234"]
    LtNode["&lt; 节点ret, 0"]
    Pred1["谓词 1比较 pid"]
    Pred2["谓词 2比较 ret"]
    CombineOp["结合 AND"]
    EventRecord["事件发生"]
    FilterEval["filter_match_preds()"]
    Decision["记录或丢弃"]

    FilterString --&gt; Parser
    Parser --&gt; AndNode
    AndNode --&gt; EqNode
    AndNode --&gt; LtNode
    EqNode --&gt; Pred1
    LtNode --&gt; Pred2
    Pred1 --&gt; CombineOp
    Pred2 --&gt; CombineOp
    EventRecord --&gt; FilterEval
    FilterEval --&gt; CombineOp
    CombineOp --&gt; Decision</code></pre>
<strong>图表：事件过滤器处理管道</strong></p>
<p>过滤器被编译为谓词树，在事件发生时进行评估。这允许在不影响无关事件的情况下进行高效过滤。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events.c#L1-L700">kernel/trace/trace_events.c1-700</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events_filter.c">kernel/trace/trace_events_filter.c</a></p>
<h2 id="kprobes-uprobes-fprobes">动态探针：kprobes, uprobes, fprobes<a class="headerlink" href="#kprobes-uprobes-fprobes" title="Permanent link">&para;</a></h2>
<p>动态探针允许在不重新编译的情况下对任意内核和用户空间函数进行插桩。</p>
<h3 id="_12">动态探针类型<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    Kprobe_Define["trace_kprobestruct trace_probe"]
    Kprobe_Attach["附加到内核函数符号或地址"]
    Kprobe_Handler["前/后处理程序kprobe.h"]
    Uprobe_Define["trace_uprobestruct trace_probe"]
    Uprobe_Attach["附加到用户二进制路径:偏移量"]
    Uprobe_Handler["Uprobe 处理程序uprobes.h"]
    Fprobe_Define["trace_fprobestruct trace_probe"]
    Fprobe_Attach["附加到函数使用 ftrace"]
    Fprobe_Handler["入口/出口处理程序fprobe.h"]
    TraceProbe["struct trace_probe通用基类"]
    ProbeArgs["tp.args[]参数捕获"]
    TraceEvent["trace_event_call生成的事件"]

    Kprobe --&gt; Define_TraceProbe
    Uprobe --&gt; Define_TraceProbe
    Fprobe --&gt; Define_TraceProbe
    TraceProbe --&gt; ProbeArgs
    TraceProbe --&gt; TraceEvent
    Kprobe --&gt; Attach_Kprobe_Handler
    Uprobe --&gt; Attach_Uprobe_Handler
    Fprobe --&gt; Attach_Fprobe_Handler</code></pre>
<strong>图表：动态探针类型与架构</strong></p>
<p>所有探针类型通过 <code>struct trace_probe</code> 共享通用基础设施，但连接机制不同：</p>
<ul>
<li><strong>kprobes</strong>：在内核地址使用断点或基于跳转的探测</li>
<li><strong>uprobes</strong>：在用户空间程序文本中使用断点注入</li>
<li><strong>fprobes</strong>：利用 ftrace 基础设施进行函数入口/出口追踪</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_kprobe.c#L1-L100">kernel/trace/trace_kprobe.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_uprobe.c#L1-L100">kernel/trace/trace_uprobe.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_fprobe.c#L1-L100">kernel/trace/trace_fprobe.c1-100</a></p>
<h3 id="_13">探针事件创建与参数<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>动态探针支持使用获取 (fetch) 方法的灵活参数捕获：</p>
<table>
<thead>
<tr>
<th>获取类型</th>
<th>语法</th>
<th>描述</th>
<th>实现</th>
</tr>
</thead>
<tbody>
<tr>
<td>寄存器</td>
<td><code>%ax</code>, <code>%di</code></td>
<td>CPU 寄存器值</td>
<td><code>FETCH_OP_ARG</code></td>
</tr>
<tr>
<td>内存</td>
<td><code>+0(%di)</code></td>
<td>解引用地址</td>
<td><code>FETCH_OP_DEREF</code></td>
</tr>
<tr>
<td>栈</td>
<td><code>$stack0</code></td>
<td>栈参数</td>
<td><code>FETCH_OP_STACK</code></td>
</tr>
<tr>
<td>返回值</td>
<td><code>$retval</code></td>
<td>函数返回</td>
<td><code>FETCH_OP_RETVAL</code></td>
</tr>
<tr>
<td>符号</td>
<td><code>$comm</code></td>
<td>任务 comm 字符串</td>
<td>特殊处理程序</td>
</tr>
<tr>
<td>立即数</td>
<td><code>\1234</code></td>
<td>立即数值</td>
<td><code>FETCH_OP_IMM</code></td>
</tr>
</tbody>
</table>
<p>通过 tracefs 创建探针事件：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># 创建 kprobe 事件
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>echo &#39;p:myprobe do_sys_open filename=+0(%di):string flags=%si&#39; &gt; kprobe_events
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a># 创建 uprobe 事件
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>echo &#39;p:myuprobe /bin/bash:0x1234 arg1=%di&#39; &gt; uprobe_events
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a># 创建 fprobe 事件
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>echo &#39;f:myfprobe vfs_read count=%dx&#39; &gt; dynamic_events
</code></pre></div>
获取指令系统在 <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_probe.h#L100-L200">kernel/trace/trace_probe.h100-200</a> 中定义，执行在 <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_kprobe.c#L800-L1000">kernel/trace/trace_kprobe.c800-1000</a> 中。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_probe.c#L1-L100">kernel/trace/trace_probe.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_probe.h#L100-L300">kernel/trace/trace_probe.h100-300</a></p>
<h3 id="fprobe">Fprobe 与函数图集成<a class="headerlink" href="#fprobe" title="Permanent link">&para;</a></h3>
<p>Fprobes 使用 ftrace 的函数入口机制，但为返回探针添加了复杂的影子栈管理：</p>
<p><pre class="mermaid"><code>flowchart TD
    FprobeStruct["struct fprobeentry_handler/exit_handler"]
    Register["register_fprobe()"]
    FgraphOps["fgraph_ops图回调包装器"]
    FunctionEntry["fentry 调用"]
    FprobeEntry["fprobe_entry()"]
    ReserveData["fgraph_reserve_data()"]
    CallHandler["fp-&gt;entry_handler()"]
    ShadowStack["current-&gt;ret_stack[]影子返回栈"]
    FprobeHeader["fprobe headerfp + size_words"]
    EntryData["入口数据用户定义"]
    FunctionReturn["函数返回"]
    FprobeExit["fprobe_exit()"]
    RetrieveData["fgraph_retrieve_data()"]
    CallExitHandler["fp-&gt;exit_handler()"]

    FunctionEntry --&gt; FprobeEntry
    FprobeEntry --&gt; ReserveData
    ReserveData --&gt; ShadowStack
    ReserveData --&gt; FprobeHeader
    ReserveData --&gt; EntryData
    FprobeEntry --&gt; CallHandler
    FunctionReturn --&gt; FprobeExit
    FprobeExit --&gt; RetrieveData
    RetrieveData --&gt; ShadowStack
    FprobeExit --&gt; CallExitHandler
    FprobeStruct --&gt; Register
    Register --&gt; FgraphOps</code></pre>
<strong>图表：Fprobe 影子栈管理</strong></p>
<p>Fprobes 与函数图追踪器的影子栈集成，以跟踪返回地址并存储每次调用的数据。这使得能够关联函数入口和出口事件以及相关数据。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/fprobe.c#L160-L238">kernel/trace/fprobe.c160-238</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/fgraph.c#L1-L200">kernel/trace/fgraph.c1-200</a></p>
<h2 id="_14">函数图追踪器<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h2>
<p>函数图追踪器提供带有计时信息的调用/返回追踪，创建内核执行流的可视化表示。</p>
<h3 id="_15">函数图基础设施<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    FgraphOps["struct fgraph_opsentryfunc/retfunc"]
    GraphIdx["idx: 数组索引"]
    Private["private: 用户数据"]
    RetStack["task-&gt;ret_stack[]4KB 影子栈"]
    RetStackEntry["struct ftrace_ret_stackfunc/ret_addr/calltime"]
    CurrRetStack["curr_ret_stack栈指针"]
    GraphEnter["function_graph_enter()"]
    SaveReturn["保存返回地址"]
    ReplaceReturn["替换为 return_to_handler"]
    CallEntry["gops-&gt;entryfunc()"]
    ReturnHandler["ftrace_return_to_handler()"]
    RestoreReturn["恢复原始返回"]
    CallRet["gops-&gt;retfunc()"]
    ReturnToCaller["返回调用者"]

    FgraphOps --&gt; GraphIdx
    FgraphOps --&gt; Private
    FgraphOps --&gt; GraphEnter
    FgraphOps --&gt; ReturnHandler
    GraphEnter --&gt; SaveReturn
    SaveReturn --&gt; RetStack
    RetStack --&gt; RetStackEntry
    RetStack --&gt; CurrRetStack
    SaveReturn --&gt; ReplaceReturn
    GraphEnter --&gt; CallEntry
    ReturnHandler --&gt; RestoreReturn
    RestoreReturn --&gt; RetStack
    ReturnHandler --&gt; CallRet
    CallRet --&gt; ReturnToCaller</code></pre>
<strong>图表：函数图追踪器架构</strong></p>
<p>函数图追踪器通过劫持函数返回地址来运行：</p>
<ol>
<li><strong>入口</strong>：保存真实返回地址，替换为 <code>return_to_handler</code></li>
<li><strong>影子栈</strong>：维护 <code>ftrace_ret_stack</code> 条目的每任务栈</li>
<li><strong>出口</strong>：<code>return_to_handler</code> 恢复真实返回地址并调用回调</li>
<li><strong>多重操作</strong>：通过数组索引支持多个并发图操作</li>
</ol>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/fgraph.c#L1-L300">kernel/trace/fgraph.c1-300</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_functions_graph.c#L1-L100">kernel/trace/trace_functions_graph.c1-100</a></p>
<h3 id="_16">函数图数据结构<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>影子栈实现使用精心的内存布局以提高效率：</p>
<table>
<thead>
<tr>
<th>结构体</th>
<th>大小</th>
<th>用途</th>
<th>关键字段</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ftrace_ret_stack</code></td>
<td>32 字节</td>
<td>返回栈条目</td>
<td><code>ret</code> (返回地址), <code>func</code> (函数), <code>calltime</code></td>
</tr>
<tr>
<td>影子栈</td>
<td>4096 字节</td>
<td>每任务存储</td>
<td><code>task-&gt;ret_stack[]</code> 数组</td>
</tr>
<tr>
<td>位图头</td>
<td>1 个字</td>
<td>条目元数据</td>
<td>类型、偏移量、索引位图</td>
</tr>
<tr>
<td>保留数据</td>
<td>可变</td>
<td>每调用数据</td>
<td>存储在条目之后，由 <code>gops-&gt;idx</code> 索引</td>
</tr>
</tbody>
</table>
<p>影子栈格式在 <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/fgraph.c#L22-L99">kernel/trace/fgraph.c22-99</a> 中有详细记录。每个条目使用位图来跟踪哪些 <code>fgraph_ops</code> 希望调用其返回函数，并且附加字可以存储每调用数据。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/fgraph.c#L22-L170">kernel/trace/fgraph.c22-170</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/fgraph.c#L100-L200">kernel/trace/fgraph.c100-200</a></p>
<h3 id="_17">图追踪器输出格式<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>函数图追踪器生成显示调用流的层次结构输出：</p>
<p><pre class="mermaid"><code>flowchart TD
    GraphEnt["ftrace_graph_ent_entry"]
    EntFunc["graph_ent.func"]
    EntDepth["graph_ent.depth"]
    GraphRet["ftrace_graph_ret_entry"]
    RetFunc["ret.func"]
    RetDepth["ret.depth"]
    Calltime["calltime: u64"]
    Rettime["rettime: u64"]
    Duration["持续时间: rettime - calltime"]
    Indent["缩进: depth * 2 spaces"]
    FuncName["函数名"]
    OutputLine["输出: duration | indent | func"]

    GraphEnt --&gt; EntFunc
    GraphEnt --&gt; EntDepth
    GraphRet --&gt; RetFunc
    GraphRet --&gt; RetDepth
    GraphRet --&gt; Calltime
    GraphRet --&gt; Rettime
    Calltime --&gt; Duration
    Rettime --&gt; Duration
    EntDepth --&gt; Indent
    Duration --&gt; OutputLine
    Indent --&gt; OutputLine
    FuncName --&gt; OutputLine</code></pre>
<strong>图表：函数图追踪器输出生成</strong></p>
<p>追踪器记录入口和返回事件，然后将它们格式化为带有计时信息的层次显示。示例输出：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a> 0)               |  do_sys_open() {
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a> 0)   0.123 us    |    getname();
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a> 0)   0.456 us    |    path_lookup();
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a> 0)   1.234 us    |  }
</code></pre></div>
来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_functions_graph.c#L100-L500">kernel/trace/trace_functions_graph.c100-500</a></p>
<h2 id="_18">直方图触发器<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>
<p>直方图触发器提供强大的内核内追踪事件数据聚合和分析。</p>
<h3 id="_19">直方图架构<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    HistTrigger["event_trigger_data直方图触发器"]
    HistData["hist_trigger_data直方图状态"]
    HistAttrs["hist_trigger_attrs解析的属性"]
    Keys["keys[]分组字段"]
    HistField["struct hist_field字段描述符"]
    FieldFn["fn: hist_field_fn_t值提取"]
    Vals["vals[]聚合值"]
    ValType["类型: 计数器/和/平均值"]
    ValOps["操作: +/-/*/÷"]
    TracingMap["tracing_map哈希表"]
    MapElt["tracing_map_elt直方图条目"]
    KeyVal["键 + 值[]"]
    OnMax["onmax/onchange条件动作"]
    SaveAction["save() 动作变量保存"]
    SnapshotAction["snapshot() 动作缓冲区快照"]

    HistTrigger --&gt; HistData
    HistData --&gt; HistAttrs
    HistAttrs --&gt; Keys
    HistAttrs --&gt; Vals
    Keys --&gt; HistField
    HistField --&gt; FieldFn
    Vals --&gt; ValType
    Vals --&gt; ValOps
    HistData --&gt; TracingMap
    TracingMap --&gt; MapElt
    MapElt --&gt; KeyVal
    HistData --&gt; OnMax
    OnMax --&gt; SaveAction
    OnMax --&gt; SnapshotAction</code></pre>
<strong>图表：直方图触发器组件</strong></p>
<p>直方图触发器将事件流转换为聚合统计信息：</p>
<ul>
<li><strong>键 (Keys)</strong>：定义分组（例如，按 pid、cpu、函数名）</li>
<li><strong>值 (Values)</strong>：累积数据（计数、求和、平均值）</li>
<li><strong>追踪映射 (Tracing Map)</strong>：用于直方图存储的高效哈希表</li>
<li><strong>动作 (Actions)</strong>：条件操作（最大值快照、保存变量）</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events_hist.c#L1-L300">kernel/trace/trace_events_hist.c1-300</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/tracing_map.h">kernel/trace/tracing_map.h</a></p>
<h3 id="_20">直方图触发器语法<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p>直方图通过 tracefs 创建，具有丰富的语法：</p>
<table>
<thead>
<tr>
<th>组件</th>
<th>语法</th>
<th>示例</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>键</td>
<td><code>keys=field1,field2</code></td>
<td><code>keys=pid,cpu</code></td>
<td>按这些字段分组</td>
</tr>
<tr>
<td>值</td>
<td><code>vals=field:op</code></td>
<td><code>vals=bytes:sum</code></td>
<td>带操作的聚合</td>
</tr>
<tr>
<td>排序</td>
<td><code>sort=key:order</code></td>
<td><code>sort=hitcount:desc</code></td>
<td>对直方图输出排序</td>
</tr>
<tr>
<td>大小</td>
<td><code>size=N</code></td>
<td><code>size=2048</code></td>
<td>哈希表大小</td>
</tr>
<tr>
<td>动作</td>
<td><code>onmax($var).action</code></td>
<td><code>onmax($lat).snapshot()</code></td>
<td>条件触发</td>
</tr>
</tbody>
</table>
<p>示例直方图命令：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>echo &#39;hist:keys=pid:vals=bytes:sort=bytes:size=2048&#39; &gt; events/syscalls/sys_enter_read/trigger
</code></pre></div>
高级特性包括：</p>
<ul>
<li><strong>变量引用</strong>：<code>$var</code>, <code>$var.field</code> 用于跨事件关联</li>
<li><strong>算术</strong>：<code>bytes/time</code> 用于计算值</li>
<li><strong>动作</strong>：<code>snapshot()</code>, <code>save()</code>, 合成事件生成</li>
<li><strong>过滤器</strong>：结合事件过滤器进行选择性聚合</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events_hist.c#L4000-L5000">kernel/trace/trace_events_hist.c4000-5000</a></p>
<h3 id="_21">直方图追踪映射实现<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<p><code>tracing_map</code> 为直方图数据提供高效的基于哈希的存储：</p>
<p><pre class="mermaid"><code>flowchart TD
    TM_map["tracing_map映射描述符"]
    TM_ops["map_ops操作"]
    TM_array["arraytracing_map_array[]"]
    TMA_entries["entries[]每 CPU 哈希数组"]
    TMA_n_entries["n_entries数组大小"]
    ELT_key["key[]键值"]
    ELT_val["val[]聚合值"]
    ELT_var["var[]变量存储"]
    Lookup["tracing_map_lookup()"]
    Insert["tracing_map_insert()"]
    Update["更新值"]

    TM --&gt; map_TM_ops
    TM --&gt; map_TM_array
    TM --&gt; array_TMA_entries
    TMA --&gt; entries_ELT_key
    ELT --&gt; key_ELT_val
    ELT --&gt; val_ELT_var
    Lookup --&gt; TMA_entries
    Insert --&gt; TMA_entries
    Update --&gt; ELT_val</code></pre>
<strong>图表：追踪映射数据结构</strong></p>
<p>追踪映射使用每 CPU 哈希表来最小化锁争用：</p>
<ul>
<li><strong>哈希函数</strong>：将键元组映射到数组索引</li>
<li><strong>每 CPU 设计</strong>：每个 CPU 维护自己的映射数组</li>
<li><strong>无锁更新</strong>：每个 CPU 原 update 值</li>
<li><strong>聚合</strong>：读取直方图时合并结果</li>
</ul>
<p>这种设计允许以极小的开销进行高频事件聚合。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/tracing_map.c">kernel/trace/tracing_map.c</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/tracing_map.h">kernel/trace/tracing_map.h</a></p>
<h2 id="tracefs">Tracefs 接口<a class="headerlink" href="#tracefs" title="Permanent link">&para;</a></h2>
<p>tracefs 文件系统提供追踪基础设施的主要用户空间接口。</p>
<h3 id="tracefs_1">Tracefs 文件层次结构<a class="headerlink" href="#tracefs_1" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    Root["tracing/ 根"]
    TracingOn["tracing_on启用/禁用"]
    CurrentTracer["current_tracer选择追踪器"]
    TraceOptions["trace_options追踪器标志"]
    BufferSize["buffer_size_kb环形缓冲区大小"]
    Trace["trace格式化输出"]
    TracePipe["trace_pipe消费读取"]
    RawTrace["trace_raw二进制输出"]
    PerCPUTrace["per_cpu/cpu*/trace"]
    EventsDir["events/事件目录"]
    SystemDir["/子系统事件"]
    EventEnable["/enable"]
    EventFormat["/format"]
    EventFilter["/filter"]
    EventTrigger["/trigger"]
    KprobeEvents["kprobe_eventskprobe 定义"]
    UprobeEvents["uprobe_eventsuprobe 定义"]
    DynamicEvents["dynamic_eventsfprobe/eprobe"]
    AvailFilterFuncs["available_filter_functions"]
    SetFtraceFilter["set_ftrace_filter"]
    SetFtraceNotrace["set_ftrace_notrace"]
    SetFtracePid["set_ftrace_pid"]

    Root --&gt; TracingOn
    Root --&gt; CurrentTracer
    Root --&gt; TraceOptions
    Root --&gt; BufferSize
    Root --&gt; Trace
    Root --&gt; TracePipe
    Root --&gt; RawTrace
    Root --&gt; PerCPUTrace
    Root --&gt; EventsDir
    Root --&gt; KprobeEvents
    Root --&gt; UprobeEvents
    Root --&gt; DynamicEvents
    Root --&gt; AvailFilterFuncs
    Root --&gt; SetFtraceFilter
    Root --&gt; SetFtraceNotrace
    Root --&gt; SetFtracePid
    EventsDir --&gt; SystemDir
    SystemDir --&gt; EventEnable
    SystemDir --&gt; EventFormat
    SystemDir --&gt; EventFilter
    SystemDir --&gt; EventTrigger</code></pre>
<strong>图表：Tracefs 文件系统结构</strong></p>
<p>tracefs 层次结构组织追踪控制和输出：</p>
<ul>
<li><strong>控制文件</strong>：启用/禁用追踪、选择追踪器、配置选项</li>
<li><strong>输出文件</strong>：以各种格式读取追踪数据</li>
<li><strong>事件控制</strong>：每事件启用、格式、过滤、触发</li>
<li><strong>动态事件</strong>：创建/删除动态探针</li>
<li><strong>函数追踪</strong>：过滤要追踪的函数</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.c#L1-L500">kernel/trace/trace.c1-500</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events.c#L1-L500">kernel/trace/trace_events.c1-500</a></p>
<h3 id="tracefs_2">常见 Tracefs 操作<a class="headerlink" href="#tracefs_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>操作</th>
<th>文件路径</th>
<th>示例</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td>启用追踪</td>
<td><code>tracing_on</code></td>
<td><code>echo 1 &gt; tracing_on</code></td>
<td>开始记录事件</td>
</tr>
<tr>
<td>选择追踪器</td>
<td><code>current_tracer</code></td>
<td><code>echo function_graph &gt; current_tracer</code></td>
<td>切换到图追踪器</td>
</tr>
<tr>
<td>启用事件</td>
<td><code>events/sched/sched_switch/enable</code></td>
<td><code>echo 1 &gt; enable</code></td>
<td>启用 sched_switch 事件</td>
</tr>
<tr>
<td>设置过滤器</td>
<td><code>events/sched/sched_switch/filter</code></td>
<td><code>echo 'pid == 1234' &gt; filter</code></td>
<td>按条件过滤</td>
</tr>
<tr>
<td>创建 kprobe</td>
<td><code>kprobe_events</code></td>
<td><code>echo 'p:probe1 vfs_read' &gt;&gt; kprobe_events</code></td>
<td>添加 kprobe</td>
</tr>
<tr>
<td>读取追踪</td>
<td><code>trace</code></td>
<td><code>cat trace</code></td>
<td>读取格式化追踪</td>
</tr>
<tr>
<td>流式追踪</td>
<td><code>trace_pipe</code></td>
<td><code>cat trace_pipe</code></td>
<td>阻塞式追踪读取</td>
</tr>
<tr>
<td>设置函数过滤器</td>
<td><code>set_ftrace_filter</code></td>
<td><code>echo 'vfs_*' &gt; set_ftrace_filter</code></td>
<td>追踪 vfs_* 函数</td>
</tr>
</tbody>
</table>
<p>该接口设计用于交互式使用和通过简单文件操作进行的程序化控制。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.c#L5000-L7000">kernel/trace/trace.c5000-7000</a></p>
<h2 id="_22">追踪器插件<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h2>
<p>追踪基础设施通过 <code>struct tracer</code> 接口支持可插拔的追踪器。</p>
<h3 id="_23">追踪器插件接口<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    Name["name: const char*"]
    Init["init: int (*)(tr)"]
    Start["start: void (*)(tr)"]
    Stop["stop: void (*)(tr)"]
    Update["update_thresh: int (*)(tr)"]
    PrintLine["print_line: enum (*)"]
    Flags["flags: tracer_flags*"]
    NopTracer["nop无操作追踪器"]
    FunctionTracer["function函数追踪器"]
    FunctionGraphTracer["function_graph调用图追踪器"]
    IrqsoffTracer["irqsoffIRQ 延迟"]
    PreemptoffTracer["preemptoff抢占延迟"]
    WakeupTracer["wakeup唤醒延迟"]
    RegisterTracer["register_tracer()"]
    TracersList["trace_types 列表"]
    CurrentTracer["tr-&gt;current_trace"]

    Name --&gt; RegisterTracer
    Init --&gt; RegisterTracer
    Start --&gt; RegisterTracer
    Stop --&gt; RegisterTracer
    Update --&gt; RegisterTracer
    PrintLine --&gt; RegisterTracer
    Flags --&gt; RegisterTracer
    RegisterTracer --&gt; TracersList
    TracersList --&gt; CurrentTracer
    NopTracer --&gt; TracersList
    FunctionTracer --&gt; TracersList
    FunctionGraphTracer --&gt; TracersList
    IrqsoffTracer --&gt; TracersList
    PreemptoffTracer --&gt; TracersList
    WakeupTracer --&gt; TracersList</code></pre>
<strong>图表：追踪器插件架构</strong></p>
<p>追踪器实现标准接口：</p>
<ul>
<li><strong>生命周期</strong>：<code>init()</code>, <code>start()</code>, <code>stop()</code> 控制追踪器状态</li>
<li><strong>输出</strong>：<code>print_line()</code> 格式化追踪输出</li>
<li><strong>配置</strong>：<code>tracer_flags</code> 用于每追踪器选项</li>
<li><strong>注册</strong>：添加到全局列表，可通过 <code>current_tracer</code> 选择</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.h#L610-L650">kernel/trace/trace.h610-650</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.c#L946-L952">kernel/trace/trace.c946-952</a></p>
<h3 id="_24">延迟追踪器<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<p>延迟追踪器测量特定事件的最大延迟：</p>
<table>
<thead>
<tr>
<th>追踪器</th>
<th>用途</th>
<th>测量</th>
<th>实现</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>irqsoff</code></td>
<td>IRQ 禁用延迟</td>
<td>IRQ 禁用的时间</td>
<td><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_irqsoff.c">kernel/trace/trace_irqsoff.c</a></td>
</tr>
<tr>
<td><code>preemptoff</code></td>
<td>抢占延迟</td>
<td>抢占禁用的时间</td>
<td><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_irqsoff.c">kernel/trace/trace_irqsoff.c</a></td>
</tr>
<tr>
<td><code>preemptirqsoff</code></td>
<td>组合延迟</td>
<td>IRQ 或抢占禁用</td>
<td><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_irqsoff.c">kernel/trace/trace_irqsoff.c</a></td>
</tr>
<tr>
<td><code>wakeup</code></td>
<td>唤醒延迟</td>
<td>从唤醒到调度的时间</td>
<td><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_sched_wakeup.c">kernel/trace/trace_sched_wakeup.c</a></td>
</tr>
<tr>
<td><code>wakeup_rt</code></td>
<td>RT 唤醒延迟</td>
<td>RT 任务唤醒延迟</td>
<td><a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_sched_wakeup.c">kernel/trace/trace_sched_wakeup.c</a></td>
</tr>
</tbody>
</table>
<p>这些追踪器使用快照缓冲区来捕获最长延迟期间：</p>
<ol>
<li>连续追踪函数调用</li>
<li>检测延迟期间的开始（例如，IRQ 禁用）</li>
<li>当期间结束时，比较持续时间与最大值</li>
<li>如果是新最大值，快照追踪缓冲区</li>
<li>报告最大延迟和回溯</li>
</ol>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_irqsoff.c#L1-L100">kernel/trace/trace_irqsoff.c1-100</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_sched_wakeup.c#L1-L100">kernel/trace/trace_sched_wakeup.c1-100</a></p>
<h2 id="_25">性能考量<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h2>
<p>追踪基础设施设计为启用时开销极小，禁用时零开销。</p>
<h3 id="_26">开销缓解技术<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<p><pre class="mermaid"><code>flowchart TD
    DynamicPatch["动态代码修补禁用时为 NOP"]
    StaticKeys["静态键分支消除"]
    PerCPUDisable["每 CPU 禁用无同步"]
    LockFreeRing["无锁环形缓冲区每 CPU 设计"]
    InlineCode["内联快速路径最小化函数调用"]
    BulkOps["批量操作减少每事件成本"]
    FunctionFilter["函数过滤哈希表"]
    PIDFilter["PID 过滤位图查找"]
    EventFilter["事件过滤编译的谓词"]
    BufferSize["可配置缓冲区大小以内存换历史"]
    PerCPUBuffer["每 CPU 缓冲区无跨 CPU 流量"]
    RingOverwrite["环形覆盖模式保留最新数据"]

    DynamicPatch --&gt; LockFreeRing
    StaticKeys --&gt; LockFreeRing
    PerCPUDisable --&gt; LockFreeRing
    LockFreeRing --&gt; FunctionFilter
    InlineCode --&gt; FunctionFilter
    BulkOps --&gt; FunctionFilter
    FunctionFilter --&gt; BufferSize
    PIDFilter --&gt; BufferSize
    EventFilter --&gt; BufferSize</code></pre>
<strong>图表：性能优化策略</strong></p>
<p>关键性能技术：</p>
<ul>
<li><strong>动态修补</strong>：追踪禁用时函数调用替换为 NOP</li>
<li><strong>静态键 (Static Keys)</strong>：消除禁用特性的分支预测</li>
<li><strong>无锁环形缓冲区</strong>：每 CPU 设计消除了锁定开销</li>
<li><strong>过滤</strong>：早期过滤防止不必要的数据捕获</li>
<li><strong>每 CPU 架构</strong>：消除缓存行抖动和同步</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c#L1-L500">kernel/trace/ring_buffer.c1-500</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ftrace.c#L1-L500">kernel/trace/ftrace.c1-500</a></p>
<h3 id="_27">缓冲区管理<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<p>环形缓冲区使用复杂的页面管理以提高效率：</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>实现</th>
<th>优势</th>
</tr>
</thead>
<tbody>
<tr>
<td>每 CPU 缓冲区</td>
<td>每个 CPU 独立缓冲区</td>
<td>无跨 CPU 同步</td>
</tr>
<tr>
<td>无锁写入</td>
<td>原子操作</td>
<td>最小写入者开销</td>
</tr>
<tr>
<td>读取器页面交换</td>
<td>专用读取器页面</td>
<td>写入者从不被读取者阻塞</td>
</tr>
<tr>
<td>覆盖模式</td>
<td>环形包裹，丢弃旧数据</td>
<td>始终拥有最新数据</td>
</tr>
<tr>
<td>非覆盖模式</td>
<td>满时停止</td>
<td>保留所有数据</td>
</tr>
<tr>
<td>可变页面大小</td>
<td>可配置页面</td>
<td>内存/历史权衡</td>
</tr>
</tbody>
</table>
<p>当追踪开始时，缓冲区自动从小的默认大小 <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.c#L942-L942">kernel/trace/trace.c942</a> 扩展，在追踪禁用时减少内存使用。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c#L88-L154">kernel/trace/ring_buffer.c88-154</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.c#L932-L944">kernel/trace/trace.c932-944</a></p>
<h2 id="_28">与其他子系统集成<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h2>
<p>追踪基础设施与其他内核子系统深度集成。</p>
<h3 id="_29">调度器集成<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<p>调度器广泛使用追踪事件进行性能分析：</p>
<p><pre class="mermaid"><code>flowchart TD
    SchedSwitch["sched_switch上下文切换"]
    SchedWakeup["sched_wakeup任务唤醒"]
    SchedMigrate["sched_migrate_taskCPU 迁移"]
    WakeupTracer["wakeup 追踪器唤醒延迟"]
    PreemptTracer["preemptoff 追踪器抢占延迟"]
    HistLatency["直方图：唤醒延迟按 comm"]
    HistRuntime["直方图：运行时间按 pid"]

    SchedSwitch --&gt; WakeupTracer
    SchedWakeup --&gt; WakeupTracer
    SchedSwitch --&gt; PreemptTracer
    SchedSwitch --&gt; HistLatency
    SchedWakeup --&gt; HistLatency
    SchedSwitch --&gt; HistRuntime</code></pre>
<strong>图表：调度器追踪集成</strong></p>
<p>调度器事件启用：</p>
<ul>
<li>延迟测量（唤醒、抢占、IRQ）</li>
<li>性能分析（运行时间分布、迁移模式）</li>
<li>行为分析（任务交互、调度决策）</li>
</ul>
<p>有关调度器内部的信息，请参阅 <a href="/torvalds/linux/4.1-process-scheduling-and-sched_ext">进程调度与 sched_ext</a>。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/include/trace/events/sched.h">include/trace/events/sched.h</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_sched_wakeup.c">kernel/trace/trace_sched_wakeup.c</a></p>
<h3 id="bpf">BPF 集成<a class="headerlink" href="#bpf" title="Permanent link">&para;</a></h3>
<p>BPF 程序可以访问追踪基础设施：</p>
<table>
<thead>
<tr>
<th>集成点</th>
<th>描述</th>
<th>用例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bpf_trace_printk()</code></td>
<td>打印到追踪缓冲区</td>
<td>来自 BPF 的调试输出</td>
</tr>
<tr>
<td>Kprobe BPF</td>
<td>将 BPF 附加到 kprobes</td>
<td>动态插桩</td>
</tr>
<tr>
<td>Tracepoint BPF</td>
<td>将 BPF 附加到事件</td>
<td>事件驱动程序</td>
</tr>
<tr>
<td>Fentry/Fexit</td>
<td>直接函数追踪</td>
<td>低开销追踪</td>
</tr>
</tbody>
</table>
<p>BPF 程序既可以生成追踪数据，也可以消费数据用于决策。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_kprobe.c">kernel/trace/trace_kprobe.c</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/bpf_trace.c">kernel/trace/bpf_trace.c</a></p>
<h3 id="_30">合成事件<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h3>
<p>合成事件允许从现有追踪数据创建自定义事件：</p>
<p><pre class="mermaid"><code>flowchart TD
    Event1["sys_enter_readfd, count"]
    Event2["sys_exit_readret"]
    OnEnter["onmatch(enter)save(fd, count)"]
    OnExit["onmatch(exit)generate synthetic"]
    SynthEvent["read_latencyfd, count, ret, latency"]
    SynthData["计算字段latency = exit.time - enter.time"]

    Event1 --&gt; OnEnter
    Event2 --&gt; OnExit
    OnEnter --&gt; SynthEvent
    OnExit --&gt; SynthEvent
    SynthData --&gt; SynthEvent</code></pre>
<strong>图表：合成事件创建</strong></p>
<p>合成事件关联跨多个事件的数据，实现复杂分析：</p>
<ul>
<li>通过公共字段匹配事件</li>
<li>保存早期事件的变量</li>
<li>使用计算字段生成新事件</li>
<li>启用派生指标的直方图分析</li>
</ul>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events_synth.c#L1-L500">kernel/trace/trace_events_synth.c1-500</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events_hist.c#L4000-L5000">kernel/trace/trace_events_hist.c4000-5000</a></p>
<h2 id="_31">总结<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h2>
<p>Linux 内核追踪基础设施提供了一个全面的、低开销的系统来观察内核行为。关键组件包括：</p>
<ul>
<li><strong>环形缓冲区</strong>：用于高效数据存储的无锁每 CPU 循环缓冲区</li>
<li><strong>Ftrace</strong>：具有动态修补和过滤的函数级追踪</li>
<li><strong>追踪事件</strong>：具有丰富格式和过滤的静态追踪点</li>
<li><strong>动态探针</strong>：通过 kprobes、uprobes 和 fprobes 进行运行时插桩</li>
<li><strong>函数图</strong>：具有计时和层次结构的调用/返回追踪</li>
<li><strong>直方图触发器</strong>：内核内聚合和分析</li>
<li><strong>Tracefs 接口</strong>：通过文件系统操作的用户空间控制</li>
</ul>
<p>该基础设施使得能够以最小的运行时开销进行性能分析、调试和对内核的理解。</p>
<p>来源：<a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace.c">kernel/trace/trace.c</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ftrace.c">kernel/trace/ftrace.c</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/ring_buffer.c">kernel/trace/ring_buffer.c</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events.c">kernel/trace/trace_events.c</a> <a href="https://github.com/torvalds/linux/blob/fcb70a56/kernel/trace/trace_events_hist.c">kernel/trace/trace_events_hist.c</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>